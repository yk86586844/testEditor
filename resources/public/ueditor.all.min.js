/*
 UEditor
 version: ueditor
 build: Wed Aug 10 2016 11:06:02 GMT+0800 (CST)
*/
(function(){function Aa(k,b,d){var a;b=b.toLowerCase();return(a=k.__allListeners||d&&(k.__allListeners={}))&&(a[b]||d&&(a[b]=[]))}function wa(k,b,d,a,c,g){a=a&&k[b];var e;for(!a&&(a=k[d]);!a&&(e=(e||k).parentNode);){if("BODY"==e.tagName||g&&!g(e))return null;a=e[d]}return a&&c&&!c(a)?wa(a,b,d,!1,c):a}UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};var C=window.baidu||{};window.baidu=C;window.UE=C.editor=window.UE||{};UE.plugins={};UE.commands={};UE.instants={};UE.I18N={};UE._customizeUI={};UE.version="1.4.3";
    var ja=UE.dom={},B=UE.browser=function(){var k=navigator.userAgent.toLowerCase(),b=window.opera,d={ie:/(msie\s|trident.*rv:)([\w.]+)/.test(k),opera:!!b&&b.version,webkit:-1<k.indexOf(" applewebkit/"),mac:-1<k.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode};d.gecko="Gecko"==navigator.product&&!d.webkit&&!d.opera&&!d.ie;var a=0;if(d.ie){a=k.match(/(?:msie\s([\w.]+))/);var c=k.match(/(?:trident.*rv:([\w.]+))/);a=a&&c&&a[1]&&c[1]?Math.max(1*a[1],1*c[1]):a&&a[1]?1*a[1]:c&&c[1]?1*c[1]:0;
        d.ie11Compat=11==document.documentMode;d.ie9Compat=9==document.documentMode;d.ie8=!!document.documentMode;d.ie8Compat=8==document.documentMode;d.ie7Compat=7==a&&!document.documentMode||7==document.documentMode;d.ie6Compat=7>a||d.quirks;d.ie9above=8<a;d.ie9below=9>a;d.ie11above=10<a;d.ie11below=11>a}d.gecko&&(c=k.match(/rv:([\d\.]+)/))&&(c=c[1].split("."),a=1E4*c[0]+100*(c[1]||0)+1*(c[2]||0));/chrome\/(\d+\.\d)/i.test(k)&&(d.chrome=+RegExp.$1);/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(k)&&
    !/chrome/i.test(k)&&(d.safari=+(RegExp.$1||RegExp.$2));d.opera&&(a=parseFloat(b.version()));d.webkit&&(a=parseFloat(k.match(/ applewebkit\/(\d+)/)[1]));d.version=a;d.isCompatible=!d.mobile&&(d.ie&&6<=a||d.gecko&&10801<=a||d.opera&&9.5<=a||d.air&&1<=a||d.webkit&&522<=a||!1);return d}(),ka=B.ie,Ja=B.opera,x=UE.utils={each:function(k,b,d){if(null!=k)if(k.length===+k.length)for(var a=0,c=k.length;a<c;a++){if(!1===b.call(d,k[a],a,k))return!1}else for(a in k)if(k.hasOwnProperty(a)&&!1===b.call(d,k[a],a,
            k))return!1},makeInstance:function(k){var b=new Function;b.prototype=k;k=new b;b.prototype=null;return k},extend:function(k,b,d){if(b)for(var a in b)d&&k.hasOwnProperty(a)||(k[a]=b[a]);return k},extend2:function(k){for(var b=arguments,d=1;d<b.length;d++){var a=b[d],c;for(c in a)k.hasOwnProperty(c)||(k[c]=a[c])}return k},inherits:function(k,b){var d=k.prototype;b=x.makeInstance(b.prototype);x.extend(b,d,!0);k.prototype=b;return b.constructor=k},bind:function(k,b){return function(){return k.apply(b,
            arguments)}},defer:function(k,b,d){var a;return function(){d&&clearTimeout(a);a=setTimeout(k,b)}},indexOf:function(k,b,d){var a=-1;d=this.isNumber(d)?d:0;this.each(k,function(c,g){if(g>=d&&c===b)return a=g,!1});return a},removeItem:function(k,b){for(var d=0,a=k.length;d<a;d++)k[d]===b&&(k.splice(d,1),d--)},trim:function(k){return k.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(k){if(!k)return{};k=x.isArray(k)?k:k.split(",");for(var b=0,d,a={};d=k[b++];)a[d.toUpperCase()]=a[d]=1;return a},
        unhtml:function(k,b){return k?k.replace(b||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp|#\d+);)?/g,function(d,a){return a?d:{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[d]}):""},unhtmlForUrl:function(k,b){return k?k.replace(b||/[<">']/g,function(d){return{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[d]}):""},html:function(k){return k?k.replace(/&((g|l|quo)t|amp|#39|nbsp);/g,function(b){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">","&#39;":"'","&nbsp;":" "}[b]}):""},cssStyleToDomStyle:function(){var k=
            document.createElement("div").style,b={"float":void 0!=k.cssFloat?"cssFloat":void 0!=k.styleFloat?"styleFloat":"float"};return function(d){return b[d]||(b[d]=d.toLowerCase().replace(/-./g,function(a){return a.charAt(1).toUpperCase()}))}}(),loadFile:function(){function k(d,a){try{for(var c=0,g;g=b[c++];)if(g.doc===d&&g.url==(a.src||a.href))return g}catch(e){return null}}var b=[];return function(d,a,c){var g=k(d,a);if(g)g.ready?c&&c():g.funs.push(c);else if(b.push({doc:d,url:a.src||a.href,funs:[c]}),
            !d.body){c=[];for(var e in a)"tag"!=e&&c.push(e+'="'+a[e]+'"');d.write("<"+a.tag+" "+c.join(" ")+" ></"+a.tag+">")}else if(!a.id||!d.getElementById(a.id)){var f=d.createElement(a.tag);delete a.tag;for(e in a)f.setAttribute(e,a[e]);f.onload=f.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){g=k(d,a);if(0<g.funs.length){g.ready=1;for(var h;h=g.funs.pop();)h()}f.onload=f.onreadystatechange=null}};f.onerror=function(){throw Error("The load "+(a.href||a.src)+
            " fails,check the url settings of file ueditor.config.js ");};d.getElementsByTagName("head")[0].appendChild(f)}}}(),isEmptyObject:function(k){if(null==k)return!0;if(this.isArray(k)||this.isString(k))return 0===k.length;for(var b in k)if(k.hasOwnProperty(b))return!1;return!0},fixColor:function(k,b){if(/color/i.test(k)&&/rgba?/.test(b)){k=b.split(",");if(3<k.length)return"";b="#";for(var d=0,a;a=k[d++];)a=parseInt(a.replace(/[^\d]/gi,""),10).toString(16),b+=1==a.length?"0"+a:a;b=b.toUpperCase()}return b},
        optCss:function(k){function b(c,g){if(!c)return"";var e=c.top,f=c.bottom,h=c.left,n=c.right,l="";if(e&&h&&f&&n)l+=";"+g+":"+(e==f&&f==h&&h==n?e:e==f&&h==n?e+" "+h:h==n?e+" "+h+" "+f:e+" "+n+" "+f+" "+h)+";";else for(var p in c)l+=";"+g+"-"+p+":"+c[p]+";";return l}var d,a;k=k.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(c,g,e,f){if(1==f.split(" ").length)switch(g){case "padding":return!d&&(d={}),d[e]=f,"";case "margin":return!a&&(a={}),a[e]=f,"";case "border":return"initial"==f?
            "":c}return c});k+=b(d,"padding")+b(a,"margin");return k.replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(c,g){return g?g+";;":";"})},clone:function(k,b){b=b||{};for(var d in k)if(k.hasOwnProperty(d)){var a=k[d];"object"==typeof a?(b[d]=x.isArray(a)?[]:{},x.clone(k[d],b[d])):b[d]=a}return b},transUnitToPx:function(k){if(!/(pt|cm)/.test(k))return k;var b;k.replace(/([\d.]+)(\w+)/,function(d,a,c){k=a;b=c});switch(b){case "cm":k=
            25*parseFloat(k);break;case "pt":k=Math.round(96*parseFloat(k)/72)}return k+(k?"px":"")},domReady:function(){function k(d){for(d.isReady=!0;d=b.pop();d());}var b=[];return function(d,a){a=a||window;var c=a.document;d&&b.push(d);"complete"===c.readyState?k(c):(c.isReady&&k(c),B.ie&&11!=B.version?(function(){if(!c.isReady){try{c.documentElement.doScroll("left")}catch(g){setTimeout(arguments.callee,0);return}k(c)}}(),a.attachEvent("onload",function(){k(c)})):(c.addEventListener("DOMContentLoaded",function(){c.removeEventListener("DOMContentLoaded",
            arguments.callee,!1);k(c)},!1),a.addEventListener("load",function(){k(c)},!1)))}}(),cssRule:B.ie&&11!=B.version?function(k,b,d){if(void 0===b||b&&b.nodeType&&9==b.nodeType){d=b&&b.nodeType&&9==b.nodeType?b:d||document;var a=d.indexList||(d.indexList={});var c=a[k];if(void 0!==c)return d.styleSheets[c].cssText}else{d=d||document;a=d.indexList||(d.indexList={});c=a[k];if(""===b)return void 0!==c?(d.styleSheets[c].cssText="",delete a[k],!0):!1;void 0!==c?sheetStyle=d.styleSheets[c]:(sheetStyle=d.createStyleSheet("",
            c=d.styleSheets.length),a[k]=c);sheetStyle.cssText=b}}:function(k,b,d){var a;if(void 0===b||b&&b.nodeType&&9==b.nodeType)return d=b&&b.nodeType&&9==b.nodeType?b:d||document,(a=d.getElementById(k))?a.innerHTML:void 0;d=d||document;a=d.getElementById(k);if(""===b)return a?(a.parentNode.removeChild(a),!0):!1;a?a.innerHTML=b:(a=d.createElement("style"),a.id=k,a.innerHTML=b,d.getElementsByTagName("head")[0].appendChild(a))},sort:function(k,b){b=b||function(f,h){return f.localeCompare(h)};for(var d=0,a=
            k.length;d<a;d++)for(var c=d,g=k.length;c<g;c++)if(0<b(k[d],k[c])){var e=k[d];k[d]=k[c];k[c]=e}return k},serializeParam:function(k){var b=[],d;for(d in k)if("method"!=d&&"timeout"!=d&&"async"!=d)if("function"!=(typeof k[d]).toLowerCase()&&"object"!=(typeof k[d]).toLowerCase())b.push(encodeURIComponent(d)+"="+encodeURIComponent(k[d]));else if(x.isArray(k[d]))for(var a=0;a<k[d].length;a++)b.push(encodeURIComponent(d)+"[]="+encodeURIComponent(k[d][a]));return b.join("&")},formatUrl:function(k){k=k.replace(/&&/g,
            "&");k=k.replace(/\?&/g,"?");k=k.replace(/&$/g,"");k=k.replace(/&#/g,"#");return k=k.replace(/&+/g,"&")},isCrossDomainUrl:function(k){var b=document.createElement("a");b.href=k;B.ie&&(b.href=b.href);return!(b.protocol==location.protocol&&b.hostname==location.hostname&&(b.port==location.port||"80"==b.port&&""==location.port||""==b.port&&"80"==location.port))},clearEmptyAttrs:function(k){for(var b in k)""===k[b]&&delete k[b];return k},str2json:function(k){return x.isString(k)?window.JSON?JSON.parse(k):
            (new Function("return "+x.trim(k||"")))():null},json2str:function(){if(window.JSON)return JSON.stringify;var k=function(a){return 10>a?"0"+a:a},b=function(a){/["\\\x00-\x1f]/.test(a)&&(a=a.replace(/["\\\x00-\x1f]/g,function(c){var g=d[c];if(g)return g;g=c.charCodeAt();return"\\u00"+Math.floor(g/16).toString(16)+(g%16).toString(16)}));return'"'+a+'"'},d={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return function(a){switch(typeof a){case "undefined":return"undefined";
            case "number":return isFinite(a)?String(a):"null";case "string":return b(a);case "boolean":return String(a);default:if(null===a)return"null";if(x.isArray(a)){var c=["["],g=a.length,e;for(e=0;e<g;e++){var f=a[e];switch(typeof f){case "undefined":case "function":case "unknown":break;default:h&&c.push(",");c.push(x.json2str(f));var h=1}}c.push("]");return c.join("")}if(x.isDate(a))return'"'+a.getFullYear()+"-"+k(a.getMonth()+1)+"-"+k(a.getDate())+"T"+k(a.getHours())+":"+k(a.getMinutes())+":"+k(a.getSeconds())+
                '"';h=["{"];e=x.json2str;for(g in a)if(Object.prototype.hasOwnProperty.call(a,g))switch(f=a[g],typeof f){case "undefined":case "unknown":case "function":break;default:c&&h.push(","),c=1,h.push(e(g)+":"+e(f))}h.push("}");return h.join("")}}}()};x.each("String Function Array Number RegExp Object Date".split(" "),function(k){UE.utils["is"+k]=function(b){return Object.prototype.toString.apply(b)=="[object "+k+"]"}});var Ba=UE.EventBase=function(){};Ba.prototype={addListener:function(k,b){k=x.trim(k).split(/\s+/);
            for(var d=0,a;a=k[d++];)Aa(this,a,!0).push(b)},on:function(k,b){return this.addListener(k,b)},off:function(k,b){return this.removeListener(k,b)},trigger:function(){return this.fireEvent.apply(this,arguments)},removeListener:function(k,b){k=x.trim(k).split(/\s+/);for(var d=0,a;a=k[d++];)x.removeItem(Aa(this,a)||[],b)},fireEvent:function(){var k=arguments[0];k=x.trim(k).split(" ");for(var b=0,d;d=k[b++];){var a=Aa(this,d),c,g;if(a)for(g=a.length;g--;)if(a[g]){var e=a[g].apply(this,arguments);if(!0===
            e)return e;void 0!==e&&(c=e)}if(e=this["on"+d.toLowerCase()])c=e.apply(this,arguments)}return c}};var M=ja.dtd=function(){function k(T){for(var L in T)T[L.toUpperCase()]=T[L];return T}var b=x.extend2,d=k({isindex:1,fieldset:1}),a=k({input:1,button:1,select:1,textarea:1,label:1}),c=b(k({a:1}),a),g=b({iframe:1},c),e=k({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),f=k({ins:1,del:1,script:1,style:1}),h=b(k({b:1,
            acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),f),n=b(k({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),h),l=b(k({p:1}),n);a=b(k({iframe:1}),n,a);n=k({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,
            noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1});var p=b(k({a:0}),a),r=k({tr:1}),q=k({"#":1}),t=b(k({param:1}),n),u=b(k({form:1}),d,g,e,l),w=k({li:1,ol:1,ul:1}),v=k({style:1,script:1}),y=k({base:1,link:1,meta:1,title:1});v=b(y,v);var A=k({head:1,body:1}),E=k({html:1}),I=k({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,
            fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),H=k({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});return k({$nonBodyContent:b(E,A,y),$block:I,$inline:p,$inlineWithA:b(k({a:1}),p),$body:b(k({script:1,style:1}),I),$cdata:k({script:1,style:1}),$empty:H,$nonChild:k({iframe:1,textarea:1}),$listItem:k({dd:1,dt:1,li:1}),$list:k({ul:1,ol:1,dl:1}),
            $isNotEmpty:k({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),$removeEmpty:k({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1}),$removeEmptyBlock:k({p:1,div:1}),$tableContent:k({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:k({pre:1,
                script:1,style:1,textarea:1}),html:A,head:v,style:q,script:q,body:u,base:{},link:{},meta:{},title:q,col:{},tr:k({td:1,th:1}),img:{},embed:{},colgroup:k({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:u,td:u,br:{},th:u,center:u,kbd:p,button:b(l,e),basefont:{},h5:p,h4:p,samp:p,h6:p,ol:w,h1:p,h3:p,option:q,h2:p,form:b(d,g,e,l),select:k({optgroup:1,option:1}),font:p,ins:p,menu:w,abbr:p,label:p,table:k({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:p,tfoot:r,cite:p,li:u,input:{},iframe:u,
            strong:p,textarea:q,noframes:u,big:p,small:p,span:k({"#":1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),hr:p,dt:p,sub:p,optgroup:k({option:1}),param:{},bdo:p,"var":p,div:u,object:t,sup:p,dd:u,strike:p,area:{},dir:w,map:b(k({area:1,form:1,p:1}),d,f,e),applet:t,dl:k({dt:1,dd:1}),del:p,isindex:{},fieldset:b(k({legend:1}),n),thead:r,ul:w,acronym:p,b:p,a:b(k({a:1}),a),blockquote:b(k({td:1,tr:1,tbody:1,li:1}),u),caption:p,i:p,u:p,tbody:r,s:p,address:b(g,l),tt:p,legend:p,q:p,pre:b(h,c),p:b(k({a:1}),
            p),em:p,dfn:p})}(),Ga=ka&&9>B.version?{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},Ka=x.listToMap("-webkit-box -moz-box block list-item table table-row-group table-header-group table-footer-group table-row table-column-group table-column table-cell table-caption".split(" ")),
        m=ja.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:ka&&"6"==B.version?"\ufeff":"\u200b",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},getPosition:function(k,b){if(k===b)return 0;var d,a=[k],c=[b];for(d=k;d=d.parentNode;){if(d===b)return 10;a.push(d)}for(d=b;d=d.parentNode;){if(d===k)return 20;c.push(d)}a.reverse();
                c.reverse();if(a[0]!==c[0])return 1;for(b=-1;b++,a[b]===c[b];);k=a[b];for(b=c[b];k=k.nextSibling;)if(k===b)return 4;return 2},getNodeIndex:function(k,b){for(var d=0;k=k.previousSibling;)b&&3==k.nodeType?k.nodeType!=k.nextSibling.nodeType&&d++:d++;return d},inDoc:function(k,b){return 10==m.getPosition(k,b)},findParent:function(k,b,d){if(k&&!m.isBody(k))for(k=d?k:k.parentNode;k;){if(!b||b(k)||m.isBody(k))return b&&!b(k)&&m.isBody(k)?null:k;k=k.parentNode}return null},findParentByTagName:function(k,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   b,d,a){b=x.listToMap(x.isArray(b)?b:[b]);return m.findParent(k,function(c){return b[c.tagName]&&!(a&&a(c))},d)},findParents:function(k,b,d,a){for(b=b&&(d&&d(k)||!d)?[k]:[];k=m.findParent(k,d);)b.push(k);return a?b:b.reverse()},insertAfter:function(k,b){return k.nextSibling?k.parentNode.insertBefore(b,k.nextSibling):k.parentNode.appendChild(b)},remove:function(k,b){var d=k.parentNode;if(d){if(b&&k.hasChildNodes())for(;b=k.firstChild;)d.insertBefore(b,k);d.removeChild(k)}return k},getNextDomNode:function(k,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               b,d,a){return wa(k,"firstChild","nextSibling",b,d,a)},getPreDomNode:function(k,b,d,a){return wa(k,"lastChild","previousSibling",b,d,a)},isBookmarkNode:function(k){return 1==k.nodeType&&k.id&&/^_baidu_bookmark_/i.test(k.id)},getWindow:function(k){k=k.ownerDocument||k;return k.defaultView||k.parentWindow},getCommonAncestor:function(k,b){if(k===b)return k;for(var d=[k],a=[b],c=k,g=-1;c=c.parentNode;){if(c===b)return c;d.push(c)}for(c=b;c=c.parentNode;){if(c===k)return c;a.push(c)}d.reverse();for(a.reverse();g++,
            d[g]===a[g];);return 0==g?null:d[g-1]},clearEmptySibling:function(k,b,d){function a(c,g){for(var e;c&&!m.isBookmarkNode(c)&&(m.isEmptyInlineElement(c)||!(new RegExp("[^\t\n\r"+m.fillChar+"]")).test(c.nodeValue));)e=c[g],m.remove(c),c=e}!b&&a(k.nextSibling,"nextSibling");!d&&a(k.previousSibling,"previousSibling")},split:function(k,b){var d=k.ownerDocument;if(B.ie&&b==k.nodeValue.length)return d=d.createTextNode(""),m.insertAfter(k,d);k=k.splitText(b);B.ie8&&(d=d.createTextNode(""),m.insertAfter(k,
                d),m.remove(d));return k},isWhitespace:function(k){return!(new RegExp("[^ \t\n\r"+m.fillChar+"]")).test(k.nodeValue)},getXY:function(k){for(var b=0,d=0;k.offsetParent;)d+=k.offsetTop,b+=k.offsetLeft,k=k.offsetParent;return{x:b,y:d}},on:function(k,b,d){var a=x.isArray(b)?b:x.trim(b).split(/\s+/),c=a.length;if(c)for(;c--;)if(b=a[c],k.addEventListener)k.addEventListener(b,d,!1);else{d._d||(d._d={els:[]});var g=b+d.toString(),e=x.indexOf(d._d.els,k);d._d[g]&&-1!=e||(-1==e&&d._d.els.push(k),d._d[g]||(d._d[g]=
                function(f){return d.call(f.srcElement,f||window.event)}),k.attachEvent("on"+b,d._d[g]))}k=null},un:function(k,b,d){var a=x.isArray(b)?b:x.trim(b).split(/\s+/),c=a.length;if(c)for(;c--;)if(b=a[c],k.removeEventListener)k.removeEventListener(b,d,!1);else{var g=b+d.toString();try{k.detachEvent("on"+b,d._d?d._d[g]:d)}catch(e){}d._d&&d._d[g]&&(b=x.indexOf(d._d.els,k),-1!=b&&d._d.els.splice(b,1),0==d._d.els.length&&delete d._d[g])}},isSameElement:function(k,b){if(k.tagName!=b.tagName)return!1;var d=k.attributes,
                a=b.attributes;if(!ka&&d.length!=a.length)return!1;for(var c,g,e=0,f=0,h=0;c=d[h++];){if("style"==c.nodeName)if(c.specified&&e++,m.isSameStyle(k,b))continue;else return!1;if(ka)if(c.specified)e++,g=a.getNamedItem(c.nodeName);else continue;else g=b.attributes[c.nodeName];if(!g.specified||c.nodeValue!=g.nodeValue)return!1}if(ka){for(h=0;g=a[h++];)g.specified&&f++;if(e!=f)return!1}return!0},isSameStyle:function(k,b){var d=k.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),a=b.style.cssText.replace(/( ?; ?)/g,
                ";").replace(/( ?: ?)/g,":");if(B.opera){d=k.style;a=b.style;if(d.length!=a.length)return!1;for(var c in d)if(!/^(\d+|csstext)$/i.test(c)&&d[c]!=a[c])return!1;return!0}if(!d||!a)return d==a;d=d.split(";");a=a.split(";");if(d.length!=a.length)return!1;for(k=0;b=d[k++];)if(-1==x.indexOf(a,b))return!1;return!0},isBlockElm:function(k){return 1==k.nodeType&&(M.$block[k.tagName]||Ka[m.getComputedStyle(k,"display")])&&!M.$nonChild[k.tagName]},isBody:function(k){return k&&1==k.nodeType&&"body"==k.tagName.toLowerCase()},
            breakParent:function(k,b){var d=k,a=k;do{d=d.parentNode;if(g){var c=d.cloneNode(!1);c.appendChild(g);var g=c;c=d.cloneNode(!1);c.appendChild(e);var e=c}else g=d.cloneNode(!1),e=g.cloneNode(!1);for(;c=a.previousSibling;)g.insertBefore(c,g.firstChild);for(;c=a.nextSibling;)e.appendChild(c);a=d}while(b!==d);c=b.parentNode;c.insertBefore(g,b);c.insertBefore(e,b);c.insertBefore(k,e);m.remove(b);return k},isEmptyInlineElement:function(k){if(1!=k.nodeType||!M.$removeEmpty[k.tagName])return 0;for(k=k.firstChild;k;){if(m.isBookmarkNode(k)||
                1==k.nodeType&&!m.isEmptyInlineElement(k)||3==k.nodeType&&!m.isWhitespace(k))return 0;k=k.nextSibling}return 1},trimWhiteTextNode:function(k){function b(d){for(var a;(a=k[d])&&3==a.nodeType&&m.isWhitespace(a);)k.removeChild(a)}b("firstChild");b("lastChild")},mergeChild:function(k,b,d){b=m.getElementsByTagName(k,k.tagName.toLowerCase());for(var a=0,c;c=b[a++];)if(c.parentNode&&!m.isBookmarkNode(c))if("span"==c.tagName.toLowerCase()){if(k===c.parentNode&&(m.trimWhiteTextNode(k),1==k.childNodes.length)){k.style.cssText=
                c.style.cssText+";"+k.style.cssText;m.remove(c,!0);continue}c.style.cssText=k.style.cssText+";"+c.style.cssText;if(d){var g=d.style;if(g){g=g.split(";");for(var e=0,f;f=g[e++];)c.style[x.cssStyleToDomStyle(f.split(":")[0])]=f.split(":")[1]}}m.isSameStyle(c,k)&&m.remove(c,!0)}else m.isSameElement(k,c)&&m.remove(c,!0)},getElementsByTagName:function(k,b,d){if(d&&x.isString(d)){var a=d;d=function(n){return m.hasClass(n,a)}}b=x.trim(b).replace(/[ ]{2,}/g," ").split(" ");for(var c=[],g=0,e;e=b[g++];){e=
                k.getElementsByTagName(e);for(var f=0,h;h=e[f++];)d&&!d(h)||c.push(h)}return c},mergeToParent:function(k){for(var b=k.parentNode;b&&M.$removeEmpty[b.tagName];){if(b.tagName==k.tagName||"A"==b.tagName){m.trimWhiteTextNode(b);if("SPAN"==b.tagName&&!m.isSameStyle(b,k)||"A"==b.tagName&&"SPAN"==k.tagName)if(1<b.childNodes.length||b!==k.parentNode){k.style.cssText=b.style.cssText+";"+k.style.cssText;b=b.parentNode;continue}else b.style.cssText+=";"+k.style.cssText,"A"==b.tagName&&(b.style.textDecoration=
                "underline");if("A"!=b.tagName){b===k.parentNode&&m.remove(k,!0);break}}b=b.parentNode}},mergeSibling:function(k,b,d){function a(c,g,e){var f;if((f=e[c])&&!m.isBookmarkNode(f)&&1==f.nodeType&&m.isSameElement(e,f)){for(;f.firstChild;)"firstChild"==g?e.insertBefore(f.lastChild,e.firstChild):e.appendChild(f.firstChild);m.remove(f)}}!b&&a("previousSibling","firstChild",k);!d&&a("nextSibling","lastChild",k)},unSelectable:ka&&B.ie9below||B.opera?function(k){k.onselectstart=function(){return!1};k.onclick=
                k.onkeyup=k.onkeydown=function(){return!1};k.unselectable="on";k.setAttribute("unselectable","on");for(var b=0,d;d=k.all[b++];)switch(d.tagName.toLowerCase()){case "iframe":case "textarea":case "input":case "select":break;default:d.unselectable="on",k.setAttribute("unselectable","on")}}:function(k){k.style.MozUserSelect=k.style.webkitUserSelect=k.style.msUserSelect=k.style.KhtmlUserSelect="none"},removeAttributes:function(k,b){b=x.isArray(b)?b:x.trim(b).replace(/[ ]{2,}/g," ").split(" ");for(var d=
                0,a;a=b[d++];){a=Ga[a]||a;switch(a){case "className":k[a]="";break;case "style":k.style.cssText="";var c=k.getAttributeNode("style");!B.ie&&c&&k.removeAttributeNode(c)}k.removeAttribute(a)}},createElement:function(k,b,d){return m.setAttributes(k.createElement(b),d)},setAttributes:function(k,b){for(var d in b)if(b.hasOwnProperty(d)){var a=b[d];switch(d){case "class":k.className=a;break;case "style":k.style.cssText=k.style.cssText+";"+a;break;case "innerHTML":k[d]=a;break;case "value":k.value=a;break;
                default:k.setAttribute(Ga[d]||d,a)}}return k},getComputedStyle:function(k,b){if(-1<"width height top left".indexOf(b))return k["offset"+b.replace(/^\w/,function(a){return a.toUpperCase()})]+"px";3==k.nodeType&&(k=k.parentNode);if(B.ie&&9>B.version&&"font-size"==b&&!k.style.fontSize&&!M.$empty[k.tagName]&&!M.$nonChild[k.tagName]){b=k.ownerDocument.createElement("span");b.style.cssText="padding:0;border:0;font-family:simsun;";b.innerHTML=".";k.appendChild(b);var d=b.offsetHeight;k.removeChild(b);b=
                null;return d+"px"}try{d=m.getStyle(k,b)||(window.getComputedStyle?m.getWindow(k).getComputedStyle(k,"").getPropertyValue(b):(k.currentStyle||k.style)[x.cssStyleToDomStyle(b)])}catch(a){return""}return x.transUnitToPx(x.fixColor(b,d))},removeClasses:function(k,b){b=x.isArray(b)?b:x.trim(b).replace(/[ ]{2,}/g," ").split(" ");for(var d=0,a,c=k.className;a=b[d++];)c=c.replace(new RegExp("\\b"+a+"\\b"),"");(c=x.trim(c).replace(/[ ]{2,}/g," "))?k.className=c:m.removeAttributes(k,["class"])},addClass:function(k,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             b){if(k){b=x.trim(b).replace(/[ ]{2,}/g," ").split(" ");for(var d=0,a,c=k.className;a=b[d++];)(new RegExp("\\b"+a+"\\b")).test(c)||(c+=" "+a);k.className=x.trim(c)}},hasClass:function(k,b){if(x.isRegExp(b))return b.test(k.className);b=x.trim(b).replace(/[ ]{2,}/g," ").split(" ");for(var d=0,a=k.className;k=b[d++];)if(!(new RegExp("\\b"+k+"\\b","i")).test(a))return!1;return d-1==b.length},preventDefault:function(k){k.preventDefault?k.preventDefault():k.returnValue=!1},removeStyle:function(k,b){B.ie?
                ("color"==b&&(b="(^|;)"+b),k.style.cssText=k.style.cssText.replace(new RegExp(b+"[^:]*:[^;]+;?","ig"),"")):k.style.removeProperty?k.style.removeProperty(b):k.style.removeAttribute(x.cssStyleToDomStyle(b));k.style.cssText||m.removeAttributes(k,["style"])},getStyle:function(k,b){k=k.style[x.cssStyleToDomStyle(b)];return x.fixColor(b,k)},setStyle:function(k,b,d){k.style[x.cssStyleToDomStyle(b)]=d;x.trim(k.style.cssText)||this.removeAttributes(k,"style")},setStyles:function(k,b){for(var d in b)b.hasOwnProperty(d)&&
            m.setStyle(k,d,b[d])},removeDirtyAttr:function(k){for(var b=0,d,a=k.getElementsByTagName("*");d=a[b++];)d.removeAttribute("_moz_dirty");k.removeAttribute("_moz_dirty")},getChildCount:function(k,b){var d=0;k=k.firstChild;for(b=b||function(){return 1};k;)b(k)&&d++,k=k.nextSibling;return d},isEmptyNode:function(k){return!k.firstChild||0==m.getChildCount(k,function(b){return!m.isBr(b)&&!m.isBookmarkNode(b)&&!m.isWhitespace(b)})},clearSelectedArr:function(k){for(var b;b=k.pop();)m.removeAttributes(b,["class"])},
            scrollToView:function(k,b,d){var a=function(){var c=b.document,g="CSS1Compat"==c.compatMode;return{width:(g?c.documentElement.clientWidth:c.body.clientWidth)||0,height:(g?c.documentElement.clientHeight:c.body.clientHeight)||0}}().height;d=-1*a+d+(k.offsetHeight||0);k=m.getXY(k);d+=k.y;k=function(c){if("pageXOffset"in c)return{x:c.pageXOffset||0,y:c.pageYOffset||0};c=c.document;return{x:c.documentElement.scrollLeft||c.body.scrollLeft||0,y:c.documentElement.scrollTop||c.body.scrollTop||0}}(b).y;(d>
                k||d<k-a)&&b.scrollTo(0,d+(0>d?-20:20))},isBr:function(k){return 1==k.nodeType&&"BR"==k.tagName},isFillChar:function(k,b){if(3!=k.nodeType)return!1;k=k.nodeValue;return b?(new RegExp("^"+m.fillChar)).test(k):!k.replace(new RegExp(m.fillChar,"g"),"").length},isStartInblock:function(k){k=k.cloneRange();var b=0,d=k.startContainer;if(1==d.nodeType&&d.childNodes[k.startOffset]){d=d.childNodes[k.startOffset];for(var a=d.previousSibling;a&&m.isFillChar(a);)d=a,a=a.previousSibling}this.isFillChar(d,!0)&&
            1==k.startOffset&&(k.setStartBefore(d),d=k.startContainer);for(;d&&m.isFillChar(d);){var c=d;d=d.previousSibling}c&&(k.setStartBefore(c),d=k.startContainer);for(1==d.nodeType&&m.isEmptyNode(d)&&1==k.startOffset&&k.setStart(d,0).collapse(!0);!k.startOffset;){d=k.startContainer;if(m.isBlockElm(d)||m.isBody(d)){b=1;break}a=k.startContainer.previousSibling;if(a){for(;a&&m.isFillChar(a);){var g=a;a=a.previousSibling}g?k.setStartBefore(g):k.setStartBefore(k.startContainer)}else k.setStartBefore(k.startContainer)}return b&&
            !m.isBody(k.startContainer)?1:0},isEmptyBlock:function(k,b){if(1!=k.nodeType)return 0;b=b||new RegExp("[ \u00a0\t\r\n"+m.fillChar+"]","g");if(0<k[B.ie?"innerText":"textContent"].replace(b,"").length)return 0;for(var d in M.$isNotEmpty)if(k.getElementsByTagName(d).length)return 0;return 1},setViewportOffset:function(k,b){var d=parseInt(k.style.left)|0,a=parseInt(k.style.top)|0,c=k.getBoundingClientRect(),g=b.left-c.left;b=b.top-c.top;g&&(k.style.left=d+g+"px");b&&(k.style.top=a+b+"px")},fillNode:function(k,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         b){k=B.ie?k.createTextNode(m.fillChar):k.createElement("br");b.innerHTML="";b.appendChild(k)},moveChild:function(k,b,d){for(;k.firstChild;)d&&b.firstChild?b.insertBefore(k.lastChild,b.firstChild):b.appendChild(k.firstChild)},hasNoAttributes:function(k){return B.ie?/^<\w+\s*?>/.test(k.outerHTML):0==k.attributes.length},isCustomeNode:function(k){return 1==k.nodeType&&k.getAttribute("_ue_custom_node_")},isTagNode:function(k,b){return 1==k.nodeType&&(new RegExp("\\b"+k.tagName+"\\b","i")).test(b)},filterNodeList:function(k,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    b,d){var a=[];if(!x.isFunction(b)){var c=b;b=function(g){return-1!=x.indexOf(x.isArray(c)?c:c.split(" "),g.tagName.toLowerCase())}}x.each(k,function(g){b(g)&&a.push(g)});return 0==a.length?null:1!=a.length&&d?a:a[0]},isInNodeEndBoundary:function(k,b){var d=k.startContainer;if(3==d.nodeType&&k.startOffset!=d.nodeValue.length||1==d.nodeType&&k.startOffset!=d.childNodes.length)return 0;for(;d!==b;){if(d.nextSibling)return 0;d=d.parentNode}return 1},isBoundaryNode:function(k,b){for(var d;!m.isBody(k);)if(d=
                k,k=k.parentNode,d!==k[b])return!1;return!0},fillHtml:B.ie11below?"&nbsp;":"<br/>"},ta=new RegExp(m.fillChar,"g");(function(){function k(n){return!n.collapsed&&1==n.startContainer.nodeType&&n.startContainer===n.endContainer&&1==n.endOffset-n.startOffset}function b(n,l,p,r){1==l.nodeType&&(M.$empty[l.tagName]||M.$nonChild[l.tagName])&&(p=m.getNodeIndex(l)+(n?0:1),l=l.parentNode);n?(r.startContainer=l,r.startOffset=p,r.endContainer||r.collapse(!0)):(r.endContainer=l,r.endOffset=p,r.startContainer||
    r.collapse(!1));r.collapsed=r.startContainer&&r.endContainer&&r.startContainer===r.endContainer&&r.startOffset==r.endOffset;return r}function d(n,l){var p=n.startContainer,r=n.endContainer,q=n.startOffset,t=n.endOffset,u=n.document,w=u.createDocumentFragment(),v,y;1==p.nodeType&&(p=p.childNodes[q]||(v=p.appendChild(u.createTextNode(""))));1==r.nodeType&&(r=r.childNodes[t]||(y=r.appendChild(u.createTextNode(""))));if(p===r&&3==p.nodeType)return w.appendChild(u.createTextNode(p.substringData(q,t-q))),
    l&&(p.deleteData(q,t-q),n.collapse(!0)),w;for(var A,E,I=w,H=m.findParents(p,!0),T=m.findParents(r,!0),L=0;H[L]==T[L];)L++;for(var ba=L,S;S=H[ba];ba++){A=S.nextSibling;S==p?v||(3==n.startContainer.nodeType?(I.appendChild(u.createTextNode(p.nodeValue.slice(q))),l&&p.deleteData(q,p.nodeValue.length-q)):I.appendChild(l?p:p.cloneNode(!0))):(E=S.cloneNode(!1),I.appendChild(E));for(;A&&A!==r&&A!==T[ba];)S=A.nextSibling,I.appendChild(l?A:A.cloneNode(!0)),A=S;I=E}I=w;H[L]||(I.appendChild(H[L-1].cloneNode(!1)),
        I=I.firstChild);for(ba=L;q=T[ba];ba++){A=q.previousSibling;q==r?y||3!=n.endContainer.nodeType||(I.appendChild(u.createTextNode(r.substringData(0,t))),l&&r.deleteData(0,t)):(E=q.cloneNode(!1),I.appendChild(E));if(ba!=L||!H[L])for(;A&&A!==p;)q=A.previousSibling,I.insertBefore(l?A:A.cloneNode(!0),I.firstChild),A=q;I=E}l&&n.setStartBefore(T[L]?H[L]?T[L]:H[L-1]:T[L-1]).collapse(!0);v&&m.remove(v);y&&m.remove(y);return w}function a(n,l){try{if(f&&m.inDoc(f,n))if(f.nodeValue.replace(ta,"").length)f.nodeValue=
        f.nodeValue.replace(ta,"");else{var p=f.parentNode;for(m.remove(f);p&&m.isEmptyInlineElement(p)&&(B.safari?!(m.getPosition(p,l)&m.POSITION_CONTAINS):!p.contains(l));)f=p.parentNode,m.remove(p),p=f}}catch(r){}}function c(n,l){for(n=n[l];n&&m.isFillChar(n);){var p=n[l];m.remove(n);n=p}}var g=0,e=m.fillChar,f,h=ja.Range=function(n){this.startContainer=this.startOffset=this.endContainer=this.endOffset=null;this.document=n;this.collapsed=!0};h.prototype={cloneContents:function(){return this.collapsed?
            null:d(this,0)},deleteContents:function(){this.collapsed||d(this,1);if(B.webkit){var n=this.startContainer;3!=n.nodeType||n.nodeValue.length||(this.setStartBefore(n).collapse(!0),m.remove(n))}return this},extractContents:function(){return this.collapsed?null:d(this,2)},setStart:function(n,l){return b(!0,n,l,this)},setEnd:function(n,l){return b(!1,n,l,this)},setStartAfter:function(n){return this.setStart(n.parentNode,m.getNodeIndex(n)+1)},setStartBefore:function(n){return this.setStart(n.parentNode,
            m.getNodeIndex(n))},setEndAfter:function(n){return this.setEnd(n.parentNode,m.getNodeIndex(n)+1)},setEndBefore:function(n){return this.setEnd(n.parentNode,m.getNodeIndex(n))},setStartAtFirst:function(n){return this.setStart(n,0)},setStartAtLast:function(n){return this.setStart(n,3==n.nodeType?n.nodeValue.length:n.childNodes.length)},setEndAtFirst:function(n){return this.setEnd(n,0)},setEndAtLast:function(n){return this.setEnd(n,3==n.nodeType?n.nodeValue.length:n.childNodes.length)},selectNode:function(n){return this.setStartBefore(n).setEndAfter(n)},
        selectNodeContents:function(n){return this.setStart(n,0).setEndAtLast(n)},cloneRange:function(){return(new h(this.document)).setStart(this.startContainer,this.startOffset).setEnd(this.endContainer,this.endOffset)},collapse:function(n){n?(this.endContainer=this.startContainer,this.endOffset=this.startOffset):(this.startContainer=this.endContainer,this.startOffset=this.endOffset);this.collapsed=!0;return this},shrinkBoundary:function(n){function l(q){return 1==q.nodeType&&!m.isBookmarkNode(q)&&!M.$empty[q.tagName]&&
            !M.$nonChild[q.tagName]}for(var p,r=this.collapsed;1==this.startContainer.nodeType&&(p=this.startContainer.childNodes[this.startOffset])&&l(p);)this.setStart(p,0);if(r)return this.collapse(!0);if(!n)for(;1==this.endContainer.nodeType&&0<this.endOffset&&(p=this.endContainer.childNodes[this.endOffset-1])&&l(p);)this.setEnd(p,p.childNodes.length);return this},getCommonAncestor:function(n,l){var p=this.startContainer,r=this.endContainer;return p===r?n&&k(this)&&(p=p.childNodes[this.startOffset],1==p.nodeType)?
            p:l&&3==p.nodeType?p.parentNode:p:m.getCommonAncestor(p,r)},trimBoundary:function(n){this.txtToElmBoundary();var l=this.startContainer,p=this.startOffset,r=this.collapsed,q=this.endContainer;if(3==l.nodeType){if(0==p)this.setStartBefore(l);else if(p>=l.nodeValue.length)this.setStartAfter(l);else{var t=m.split(l,p);l===q?this.setEnd(t,this.endOffset-p):l.parentNode===q&&(this.endOffset+=1);this.setStartBefore(t)}if(r)return this.collapse(!0)}n||(p=this.endOffset,q=this.endContainer,3==q.nodeType&&
        (0==p?this.setEndBefore(q):(p<q.nodeValue.length&&m.split(q,p),this.setEndAfter(q))));return this},txtToElmBoundary:function(n){function l(p,r){var q=p[r+"Container"],t=p[r+"Offset"];if(3==q.nodeType)if(!t)p["set"+r.replace(/(\w)/,function(u){return u.toUpperCase()})+"Before"](q);else if(t>=q.nodeValue.length)p["set"+r.replace(/(\w)/,function(u){return u.toUpperCase()})+"After"](q)}if(n||!this.collapsed)l(this,"start"),l(this,"end");return this},insertNode:function(n){var l=n,p=1;11==n.nodeType&&
        (l=n.firstChild,p=n.childNodes.length);this.trimBoundary(!0);var r=this.startContainer,q=r.childNodes[this.startOffset];q?r.insertBefore(n,q):r.appendChild(n);l.parentNode===this.endContainer&&(this.endOffset+=p);return this.setStartBefore(l)},setCursor:function(n,l){return this.collapse(!n).select(l)},createBookmark:function(n,l){var p=this.document.createElement("span");p.style.cssText="display:none;line-height:0px;";p.appendChild(this.document.createTextNode("\u200d"));p.id="_baidu_bookmark_start_"+
            (l?"":g++);if(!this.collapsed){var r=p.cloneNode(!0);r.id="_baidu_bookmark_end_"+(l?"":g++)}this.insertNode(p);r&&this.collapse().insertNode(r).setEndBefore(r);this.setStartAfter(p);return{start:n?p.id:p,end:r?n?r.id:r:null,id:n}},moveToBookmark:function(n){var l=n.id?this.document.getElementById(n.start):n.start;n=n.end&&n.id?this.document.getElementById(n.end):n.end;this.setStartBefore(l);m.remove(l);n?(this.setEndBefore(n),m.remove(n)):this.collapse(!0);return this},enlarge:function(n,l){var p=
            m.isBody,r=this.document.createTextNode("");if(n){var q=this.startContainer;1==q.nodeType?q.childNodes[this.startOffset]?n=q=q.childNodes[this.startOffset]:(q.appendChild(r),n=q=r):n=q;for(;;){if(m.isBlockElm(q)){for(q=n;(n=q.previousSibling)&&!m.isBlockElm(n);)q=n;this.setStartBefore(q);break}n=q;q=q.parentNode}q=this.endContainer;1==q.nodeType?((n=q.childNodes[this.endOffset])?q.insertBefore(r,n):q.appendChild(r),n=q=r):n=q;for(;;){if(m.isBlockElm(q)){for(q=n;(n=q.nextSibling)&&!m.isBlockElm(n);)q=
            n;this.setEndAfter(q);break}n=q;q=q.parentNode}r.parentNode===this.endContainer&&this.endOffset--;m.remove(r)}if(!this.collapsed){for(;!(0!=this.startOffset||l&&l(this.startContainer)||p(this.startContainer));)this.setStartBefore(this.startContainer);for(;!(this.endOffset!=(1==this.endContainer.nodeType?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)||l&&l(this.endContainer)||p(this.endContainer));)this.setEndAfter(this.endContainer)}return this},enlargeToBlockElm:function(n){for(;!m.isBlockElm(this.startContainer);)this.setStartBefore(this.startContainer);
            if(!n)for(;!m.isBlockElm(this.endContainer);)this.setEndAfter(this.endContainer);return this},adjustmentBoundary:function(){if(!this.collapsed){for(;!m.isBody(this.startContainer)&&this.startOffset==this.startContainer[3==this.startContainer.nodeType?"nodeValue":"childNodes"].length&&this.startContainer[3==this.startContainer.nodeType?"nodeValue":"childNodes"].length;)this.setStartAfter(this.startContainer);for(;!m.isBody(this.endContainer)&&!this.endOffset&&this.endContainer[3==this.endContainer.nodeType?
            "nodeValue":"childNodes"].length;)this.setEndBefore(this.endContainer)}return this},applyInlineStyle:function(n,l,p){if(this.collapsed)return this;this.trimBoundary().enlarge(!1,function(L){return 1==L.nodeType&&m.isBlockElm(L)}).adjustmentBoundary();for(var r=this.createBookmark(),q=r.end,t=function(L){return 1==L.nodeType?"br"!=L.tagName.toLowerCase():!m.isWhitespace(L)},u=m.getNextDomNode(r.start,!1,t),w,v,y=this.cloneRange();u&&m.getPosition(u,q)&m.POSITION_PRECEDING;)if(3==u.nodeType||M[n][u.tagName]){y.setStartBefore(u);
            for(w=u;w&&(3==w.nodeType||M[n][w.tagName])&&w!==q;)v=w,w=m.getNextDomNode(w,1==w.nodeType,null,function(L){return M[n][L.tagName]});u=y.setEndAfter(v).extractContents();var A;if(p&&0<p.length){var E=A=p[0].cloneNode(!1);for(var I=1,H;H=p[I++];)A.appendChild(H.cloneNode(!1)),A=A.firstChild}else A=y.document.createElement(n);l&&m.setAttributes(A,l);A.appendChild(u);y.insertNode(p?E:A);var T;"span"==n&&l.style&&/text\-decoration/.test(l.style)&&(T=m.findParentByTagName(A,"a",!0))?(m.setAttributes(T,
                l),m.remove(A,!0),A=T):(m.mergeSibling(A),m.clearEmptySibling(A));m.mergeChild(A,l);u=m.getNextDomNode(A,!1,t);m.mergeToParent(A);if(w===q)break}else u=m.getNextDomNode(u,!0,t);return this.moveToBookmark(r)},removeInlineStyle:function(n){if(this.collapsed)return this;n=x.isArray(n)?n:[n];this.shrinkBoundary().adjustmentBoundary();for(var l=this.startContainer,p=this.endContainer;;){if(1==l.nodeType){if(-1<x.indexOf(n,l.tagName.toLowerCase()))break;if("body"==l.tagName.toLowerCase()){l=null;break}}l=
            l.parentNode}for(;;){if(1==p.nodeType){if(-1<x.indexOf(n,p.tagName.toLowerCase()))break;if("body"==p.tagName.toLowerCase()){p=null;break}}p=p.parentNode}var r=this.createBookmark();if(l){var q=this.cloneRange().setEndBefore(r.start).setStartBefore(l);var t=q.extractContents();q.insertNode(t);m.clearEmptySibling(l,!0);l.parentNode.insertBefore(r.start,l)}p&&(q=this.cloneRange().setStartAfter(r.end).setEndAfter(p),t=q.extractContents(),q.insertNode(t),m.clearEmptySibling(p,!1,!0),p.parentNode.insertBefore(r.end,
            p.nextSibling));for(l=m.getNextDomNode(r.start,!1,function(u){return 1==u.nodeType});l&&l!==r.end;)p=m.getNextDomNode(l,!0,function(u){return 1==u.nodeType}),-1<x.indexOf(n,l.tagName.toLowerCase())&&m.remove(l,!0),l=p;return this.moveToBookmark(r)},getClosedNode:function(){var n;if(!this.collapsed){var l=this.cloneRange().adjustmentBoundary().shrinkBoundary();k(l)&&(l=l.startContainer.childNodes[l.startOffset])&&1==l.nodeType&&(M.$empty[l.tagName]||M.$nonChild[l.tagName])&&(n=l)}return n},select:B.ie?
            function(n,l){this.collapsed||this.shrinkBoundary();var p=this.getClosedNode();if(p&&!l){try{var r=this.document.body.createControlRange();r.addElement(p);r.select()}catch(t){}return this}l=this.createBookmark();p=l.start;r=this.document.body.createTextRange();r.moveToElementText(p);r.moveStart("character",1);if(!this.collapsed)p=this.document.body.createTextRange(),n=l.end,p.moveToElementText(n),r.setEndPoint("EndToEnd",p);else if(!n&&3!=this.startContainer.nodeType){n=this.document.createTextNode(e);
                var q=this.document.createElement("span");q.appendChild(this.document.createTextNode(e));p.parentNode.insertBefore(q,p);p.parentNode.insertBefore(n,p);a(this.document,n);f=n;c(q,"previousSibling");c(p,"nextSibling");r.moveStart("character",-1);r.collapse(!0)}this.moveToBookmark(l);q&&m.remove(q);try{r.select()}catch(t){}return this}:function(n){function l(q){function t(u,w,v){3==u.nodeType&&u.nodeValue.length<w&&(q[v+"Offset"]=u.nodeValue.length)}t(q.startContainer,q.startOffset,"start");t(q.endContainer,
                q.endOffset,"end")}var p=m.getWindow(this.document),r=p.getSelection();B.gecko?this.document.body.focus():p.focus();if(r){r.removeAllRanges();this.collapsed&&!n&&(n=p=this.startContainer,1==p.nodeType&&(n=p.childNodes[this.startOffset]),3==p.nodeType&&this.startOffset||(n?n.previousSibling&&3==n.previousSibling.nodeType:p.lastChild&&3==p.lastChild.nodeType)||(n=this.document.createTextNode(e),this.insertNode(n),a(this.document,n),c(n,"previousSibling"),c(n,"nextSibling"),f=n,this.setStart(n,B.webkit?
                1:0).collapse(!0)));p=this.document.createRange();if(this.collapsed&&B.opera&&1==this.startContainer.nodeType)if(n=this.startContainer.childNodes[this.startOffset]){for(;n&&m.isBlockElm(n);)if(1==n.nodeType&&n.childNodes[0])n=n.childNodes[0];else break;n&&this.setStartBefore(n).collapse(!0)}else(n=this.startContainer.lastChild)&&m.isBr(n)&&this.setStartBefore(n).collapse(!0);l(this);p.setStart(this.startContainer,this.startOffset);p.setEnd(this.endContainer,this.endOffset);r.addRange(p)}return this},
        scrollToView:function(n,l){n=n?window:m.getWindow(this.document);var p=this.document.createElement("span");p.innerHTML="&nbsp;";this.cloneRange().insertNode(p);m.scrollToView(p,n,l);m.remove(p);return this},inFillChar:function(){var n=this.startContainer;return this.collapsed&&3==n.nodeType&&n.nodeValue.replace(new RegExp("^"+m.fillChar),"").length+1==n.nodeValue.length?!0:!1},createAddress:function(n,l){function p(t){for(var u=t?q.startContainer:q.endContainer,w=m.findParents(u,!0,function(E){return!m.isBody(E)}),
                                                                                                                                                                                                                                                                                                                                                                                                                                                      v=[],y=0,A;A=w[y++];)v.push(m.getNodeIndex(A,l));w=0;if(l)if(3==u.nodeType){for(u=u.previousSibling;u&&3==u.nodeType;)w+=u.nodeValue.replace(ta,"").length,u=u.previousSibling;w+=t?q.startOffset:q.endOffset}else if(u=u.childNodes[t?q.startOffset:q.endOffset])w=m.getNodeIndex(u,l);else for(u=t?q.startContainer:q.endContainer,t=u.firstChild;t;)if(m.isFillChar(t))t=t.nextSibling;else if(w++,3==t.nodeType)for(;t&&3==t.nodeType;)t=t.nextSibling;else t=t.nextSibling;else w=t?m.isFillChar(u)?0:q.startOffset:
            q.endOffset;0>w&&(w=0);v.push(w);return v}var r={},q=this;r.startAddress=p(!0);n||(r.endAddress=q.collapsed?[].concat(r.startAddress):p());return r},moveToAddress:function(n,l){function p(q,t){for(var u=r.document.body,w,v,y=0,A,E=q.length;y<E;y++)if(A=q[y],w=u,u=u.childNodes[A],!u){v=A;break}t?u?r.setStartBefore(u):r.setStart(w,v):u?r.setEndBefore(u):r.setEnd(w,v)}var r=this;p(n.startAddress,!0);!l&&n.endAddress&&p(n.endAddress);return r},equals:function(n){for(var l in this)if(this.hasOwnProperty(l)&&
            this[l]!==n[l])return!1;return!0},traversal:function(n,l){if(this.collapsed)return this;for(var p=this.createBookmark(),r=p.end,q=m.getNextDomNode(p.start,!1,l);q&&q!==r&&m.getPosition(q,r)&m.POSITION_PRECEDING;){var t=m.getNextDomNode(q,!1,l);n(q);q=t}return this.moveToBookmark(p)}}})();(function(){function k(a,c){var g=m.getNodeIndex;a=a.duplicate();a.collapse(c);c=a.parentElement();if(!c.hasChildNodes())return{container:c,offset:0};for(var e=c.children,f,h=a.duplicate(),n=0,l=e.length-1,p=-1;n<=
    l;){p=Math.floor((n+l)/2);f=e[p];h.moveToElementText(f);var r=h.compareEndPoints("StartToStart",a);if(0<r)l=p-1;else if(0>r)n=p+1;else return{container:c,offset:g(f)}}if(-1==p){h.moveToElementText(c);h.setEndPoint("StartToStart",a);a=h.text.replace(/(\r\n|\r)/g,"\n").length;e=c.childNodes;if(!a)return f=e[e.length-1],{container:f,offset:f.nodeValue.length};for(g=e.length;0<a;)a-=e[--g].nodeValue.length;return{container:e[g],offset:-a}}h.collapse(0<r);h.setEndPoint(0<r?"StartToStart":"EndToStart",
        a);a=h.text.replace(/(\r\n|\r)/g,"\n").length;if(!a)return M.$empty[f.tagName]||M.$nonChild[f.tagName]?{container:c,offset:g(f)+(0<r?0:1)}:{container:f,offset:0<r?0:f.childNodes.length};for(;0<a;)try{e=f,f=f[0<r?"previousSibling":"nextSibling"],a-=f.nodeValue.length}catch(q){return{container:c,offset:g(e)}}return{container:f,offset:0<r?-a:f.nodeValue.length+a}}function b(a,c){if(a.item)c.selectNode(a.item(0));else{var g=k(a,!0);c.setStart(g.container,g.offset);0!=a.compareEndPoints("StartToEnd",a)&&
    (g=k(a,!1),c.setEnd(g.container,g.offset))}return c}function d(a){try{var c=a.getNative().createRange()}catch(e){return null}var g=c.item?c.item(0):c.parentElement();return(g.ownerDocument||g)===a.document?c:null}(ja.Selection=function(a){var c=this;c.document=a;B.ie9below&&(a=m.getWindow(a).frameElement,m.on(a,"beforedeactivate",function(){c._bakIERange=c.getIERange()}),m.on(a,"activate",function(){try{!d(c)&&c._bakIERange&&c._bakIERange.select()}catch(g){}c._bakIERange=null}));a=a=null}).prototype=
        {rangeInBody:function(a,c){a=B.ie9below||c?a.item?a.item():a.parentElement():a.startContainer;return a===this.document.body||m.inDoc(a,this.document)},getNative:function(){var a=this.document;try{return a?B.ie9below?a.selection:m.getWindow(a).getSelection():null}catch(c){return null}},getIERange:function(){var a=d(this);return!a&&this._bakIERange?this._bakIERange:a},cache:function(){this.clear();this._cachedRange=this.getRange();this._cachedStartElement=this.getStart();this._cachedStartElementPath=
                this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath)return this._cachedStartElementPath;var a=this.getStart();return a?m.findParents(a,!0,null,!0):[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{if(B.ie9below){var a=d(this);return!(!a||!this.rangeInBody(a))}return!!this.getNative().rangeCount}catch(c){return!1}},getRange:function(){function a(h){for(var n=c.document.body.firstChild,l=h.collapsed;n&&
            n.firstChild;)h.setStart(n,0),n=n.firstChild;h.startContainer||h.setStart(c.document.body,0);l&&h.collapse(!0)}var c=this;if(null!=c._cachedRange)return this._cachedRange;var g=new C.editor.dom.Range(c.document);if(B.ie9below){var e=c.getIERange();if(e)try{b(e,g)}catch(h){a(g)}else a(g)}else{var f=c.getNative();if(f&&f.rangeCount)e=f.getRangeAt(0),f=f.getRangeAt(f.rangeCount-1),g.setStart(e.startContainer,e.startOffset).setEnd(f.endContainer,f.endOffset),g.collapsed&&m.isBody(g.startContainer)&&!g.startOffset&&
            a(g);else{if(this._bakRange&&m.inDoc(this._bakRange.startContainer,this.document))return this._bakRange;a(g)}}return this._bakRange=g},getStart:function(){if(this._cachedStartElement)return this._cachedStartElement;var a=B.ie9below?this.getIERange():this.getRange(),c;if(B.ie9below){if(!a)return this.document.body.firstChild;if(a.item)return a.item(0);var g=a.duplicate();0<g.text.length&&g.moveStart("character",1);g.collapse(1);g=g.parentElement();for(c=a=a.parentElement();a=a.parentNode;)if(a==g){g=
                c;break}}else if(a.shrinkBoundary(),g=a.startContainer,1==g.nodeType&&g.hasChildNodes()&&(g=g.childNodes[Math.min(g.childNodes.length-1,a.startOffset)]),3==g.nodeType)return g.parentNode;return g},getText:function(){var a;return this.isFocus()&&(a=this.getNative())?(a=B.ie9below?a.createRange():a.getRangeAt(0),B.ie9below?a.text:a.toString()):""},clearRange:function(){this.getNative()[B.ie9below?"empty":"removeAllRanges"]()}}})();(function(){function k(e,f){if(f.textarea)if(x.isString(f.textarea))for(var h=
        0,n,l=m.getElementsByTagName(e,"textarea");n=l[h++];){if(n.id=="ueditor_textarea_"+f.options.textarea){var p=n;break}}else p=f.textarea;p||(e.appendChild(p=m.createElement(document,"textarea",{name:f.options.textarea,id:"ueditor_textarea_"+f.options.textarea,style:"display:none"})),f.textarea=p);!p.getAttribute("name")&&p.setAttribute("name",f.options.textarea);p.value=f.hasContents()?f.options.allHtmlEnabled?f.getAllHtml():f.getContent(null,null,!0):""}function b(e){for(var f in e)return f}function d(e){e.langIsReady=
        !0;e.fireEvent("langReady")}var a=0,c,g=UE.Editor=function(e){var f=this;f.uid=a++;Ba.call(f);f.commands={};f.options=x.extend(x.clone(e||{}),UEDITOR_CONFIG,!0);f.shortcutkeys={};f.inputRules=[];f.outputRules=[];f.setOpt(g.defaultOptions(f));f.loadServerConfig();x.isEmptyObject(UE.I18N)?x.loadFile(document,{src:f.options.langPath+f.options.lang+"/"+f.options.lang+".js",tag:"script",type:"text/javascript",defer:"defer"},function(){UE.plugin.load(f);d(f)}):(f.options.lang=b(UE.I18N),UE.plugin.load(f),
        d(f));UE.instants["ueditorInstant"+f.uid]=f};g.prototype={registerCommand:function(e,f){this.commands[e]=f},ready:function(e){e&&(this.isReady?e.apply(this):this.addListener("ready",e))},setOpt:function(e,f){var h={};x.isString(e)?h[e]=f:h=e;x.extend(this.options,h,!0)},getOpt:function(e){return this.options[e]},destroy:function(){this.fireEvent("destroy");var e=this.container.parentNode,f=this.textarea;f?f.style.display="":(f=document.createElement("textarea"),e.parentNode.insertBefore(f,e));f.style.width=
            this.iframe.offsetWidth+"px";f.style.height=this.iframe.offsetHeight+"px";f.value=this.getContent();f.id=this.key;e.innerHTML="";m.remove(e);e=this.key;for(var h in this)this.hasOwnProperty(h)&&delete this[h];UE.delEditor(e)},render:function(e){var f=this.options;x.isString(e)&&(e=document.getElementById(e));e&&(f.minFrameWidth=f.initialFrameWidth?f.initialFrameWidth:f.initialFrameWidth=e.offsetWidth,f.initialFrameHeight?f.minFrameHeight=f.initialFrameHeight:f.initialFrameHeight=f.minFrameHeight=
            e.offsetHeight,e.style.width=/%$/.test(f.initialFrameWidth)?"100%":f.initialFrameWidth-parseInt(m.getComputedStyle(e,"padding-left"))-parseInt(m.getComputedStyle(e,"padding-right"))+"px",e.style.height=/%$/.test(f.initialFrameHeight)?"100%":f.initialFrameHeight-parseInt(m.getComputedStyle(e,"padding-top"))-parseInt(m.getComputedStyle(e,"padding-bottom"))+"px",e.style.zIndex=f.zIndex,f.iframeCssUrl&&x.unhtml(f.iframeCssUrl),e.appendChild(m.createElement(document,"iframe",{id:"ueditor_"+this.uid,width:"100%",
            height:"100%",frameborder:"0",src:this.options.UEDITOR_HOME_URL+"iframe.html?uid="+this.uid})),e.style.overflow="hidden",setTimeout(function(){/%$/.test(f.initialFrameWidth)&&(f.minFrameWidth=f.initialFrameWidth=e.offsetWidth);/%$/.test(f.initialFrameHeight)&&(f.minFrameHeight=f.initialFrameHeight=e.offsetHeight,e.style.height=f.initialFrameHeight+"px")}))},_setup:function(e){var f=this,h=f.options;ka?(e.body.disabled=!0,e.body.contentEditable=!0,e.body.disabled=!1):e.body.contentEditable=!0;e.body.spellcheck=
            !1;f.document=e;f.window=e.defaultView||e.parentWindow;f.iframe=f.window.frameElement;f.body=e.body;f.selection=new ja.Selection(e);var n;B.gecko&&(n=this.selection.getNative())&&n.removeAllRanges();this._initEvents();for(var l=this.iframe.parentNode;!m.isBody(l);l=l.parentNode)if("FORM"==l.tagName){f.form=l;if(f.options.autoSyncData)m.on(f.window,"blur",function(){k(l,f)});else m.on(l,"submit",function(){k(this,f)});break}if(h.initialContent)if(h.autoClearinitialContent){var p=f.execCommand;f.execCommand=
            function(){f.fireEvent("firstBeforeExecCommand");return p.apply(f,arguments)};this._setDefaultContent(h.initialContent)}else this.setContent(h.initialContent,!1,!0);m.isEmptyNode(f.body)&&(f.body.innerHTML="<p>"+(B.ie?"":"<br/>")+"</p>");h.focus&&setTimeout(function(){f.focus(f.options.focusInEnd);!f.options.autoClearinitialContent&&f._selectionChange()},0);f.container||(f.container=this.iframe.parentNode);h.fullscreen&&f.ui&&f.ui.setFullScreen(!0);try{f.document.execCommand("2D-position",!1,!1)}catch(r){}try{f.document.execCommand("enableInlineTableEditing",
            !1,!1)}catch(r){}try{f.document.execCommand("enableObjectResizing",!1,!1)}catch(r){}f._bindshortcutKeys();f.isReady=1;f.fireEvent("ready");h.onready&&h.onready.call(f);if(!B.ie9below)m.on(f.window,["blur","focus"],function(r){if("blur"==r.type){f._bakRange=f.selection.getRange();try{f._bakNativeRange=f.selection.getNative().getRangeAt(0),f.selection.getNative().removeAllRanges()}catch(q){f._bakNativeRange=null}}else try{f._bakRange&&f._bakRange.select()}catch(q){}});B.gecko&&10902>=B.version&&(f.body.contentEditable=
            !1,setTimeout(function(){f.body.contentEditable=!0},100),setInterval(function(){f.body.style.height=f.iframe.offsetHeight-20+"px"},100));!h.isShow&&f.setHide();h.readonly&&f.setDisabled()},sync:function(e){(e=e?document.getElementById(e):m.findParent(this.iframe.parentNode,function(f){return"FORM"==f.tagName},!0))&&k(e,this)},setHeight:function(e,f){e!==parseInt(this.iframe.parentNode.style.height)&&(this.iframe.parentNode.style.height=e+"px");!f&&(this.options.minFrameHeight=this.options.initialFrameHeight=
            e);this.body.style.height=e+"px";!f&&this.trigger("setHeight")},addshortcutkey:function(e,f){var h={};f?h[e]=f:h=e;x.extend(this.shortcutkeys,h)},_bindshortcutKeys:function(){var e=this,f=this.shortcutkeys;e.addListener("keydown",function(h,n){h=n.keyCode||n.which;for(var l in f)for(var p=f[l].split(","),r=0,q;q=p[r++];){q=q.split(":");var t=q[0];q=q[1];if(/^(ctrl)(\+shift)?\+(\d+)$/.test(t.toLowerCase())||/^(\d+)$/.test(t))if("ctrl"==RegExp.$1&&(n.ctrlKey||n.metaKey)&&(""!=RegExp.$2?n[RegExp.$2.slice(1)+
        "Key"]:1)&&h==RegExp.$3||h==RegExp.$1)-1!=e.queryCommandState(l,q)&&e.execCommand(l,q),m.preventDefault(n)}})},getContent:function(e,f,h,n,l){e&&x.isFunction(e)&&(f=e,e="");if(f?!f():!this.hasContents())return"";this.fireEvent("beforegetcontent");f=UE.htmlparser(this.body.innerHTML,n);this.filterOutputRule(f);this.fireEvent("aftergetcontent",e,f);return f.toHtml(l)},getAllHtml:function(){var e=[];this.fireEvent("getAllHtml",e);if(B.ie&&8<B.version){var f="";x.each(this.document.styleSheets,function(h){f+=
            h.href?'<link rel="stylesheet" type="text/css" href="'+h.href+'" />':"<style>"+h.cssText+"</style>"});x.each(this.document.getElementsByTagName("script"),function(h){f+=h.outerHTML})}return"<html><head>"+(this.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+this.options.charset+'"/>':"")+(f||this.document.getElementsByTagName("head")[0].innerHTML)+e.join("\n")+"</head><body "+(ka&&9>B.version?'class="view"':"")+">"+this.getContent(null,null,!0)+"</body></html>"},getPlainTxt:function(){var e=
            new RegExp(m.fillChar,"g"),f=this.body.innerHTML.replace(/[\n\r]/g,"");f=f.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(h,n,l){return M.$block[l]?"\n":n?n:""});return f.replace(e,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){return this.body[B.ie?"innerText":"textContent"].replace(new RegExp(m.fillChar,"g"),"").replace(/\u00a0/g," ")},setContent:function(e,f,h){this.fireEvent("beforesetcontent",
            e);e=UE.htmlparser(e);this.filterInputRule(e);e=e.toHtml();this.body.innerHTML=(f?this.body.innerHTML:"")+e;if("p"==this.options.enterTag)if(f=this.body.firstChild,!f||1==f.nodeType&&(M.$cdata[f.tagName]||"DIV"==f.tagName&&f.getAttribute("cdata_tag")||m.isCustomeNode(f))&&f===this.body.lastChild)this.body.innerHTML="<p>"+(B.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML;else for(var n=this.document.createElement("p");f;){for(;f&&(3==f.nodeType||1==f.nodeType&&M.p[f.tagName]&&!M.$cdata[f.tagName]);)e=
            f.nextSibling,n.appendChild(f),f=e;if(n.firstChild)if(f)f.parentNode.insertBefore(n,f),n=this.document.createElement("p");else{this.body.appendChild(n);break}f=f.nextSibling}this.fireEvent("aftersetcontent");this.fireEvent("contentchange");!h&&this._selectionChange();this._bakRange=this._bakIERange=this._bakNativeRange=null;var l;B.gecko&&(l=this.selection.getNative())&&l.removeAllRanges();this.options.autoSyncData&&this.form&&k(this.form,this)},focus:function(e){try{var f=this.selection.getRange();
            if(e){var h=this.body.lastChild;h&&1==h.nodeType&&!M.$empty[h.tagName]&&(m.isEmptyBlock(h)?f.setStartAtFirst(h):f.setStartAtLast(h),f.collapse(!0));f.setCursor(!0)}else!f.collapsed&&m.isBody(f.startContainer)&&0==f.startOffset&&(h=this.body.firstChild)&&1==h.nodeType&&!M.$empty[h.tagName]&&f.setStartAtFirst(h).collapse(!0),f.select(!0);this.fireEvent("focus selectionchange")}catch(n){}},isFocus:function(){return this.selection.isFocus()},blur:function(){var e=this.selection.getNative();if(e.empty&&
            B.ie){var f=document.body.createTextRange();f.moveToElementText(document.body);f.collapse(!0);f.select();e.empty()}else e.removeAllRanges()},_initEvents:function(){var e=this,f=e.document,h=e.window;e._proxyDomEvent=x.bind(e._proxyDomEvent,e);m.on(f,"click contextmenu mousedown keydown keyup keypress mouseup mouseover mouseout selectstart".split(" "),e._proxyDomEvent);m.on(h,["focus","blur"],e._proxyDomEvent);m.on(e.body,"drop",function(n){B.gecko&&n.stopPropagation&&n.stopPropagation();e.fireEvent("contentchange")});
            m.on(f,["mouseup","keydown"],function(n){"keydown"==n.type&&(n.ctrlKey||n.metaKey||n.shiftKey||n.altKey)||2!=n.button&&e._selectionChange(250,n)})},_proxyDomEvent:function(e){return!1===this.fireEvent("before"+e.type.replace(/^on/,"").toLowerCase())||!1===this.fireEvent(e.type.replace(/^on/,""),e)?!1:this.fireEvent("after"+e.type.replace(/^on/,"").toLowerCase())},_selectionChange:function(e,f){var h=this,n=!1;if(B.ie&&9>B.version&&f&&"mouseup"==f.type&&!this.selection.getRange().collapsed){n=!0;var l=
            f.clientX;var p=f.clientY}clearTimeout(c);c=setTimeout(function(){if(h.selection&&h.selection.getNative()){if(n&&"None"==h.selection.getNative().type){var r=h.document.body.createTextRange();try{r.moveToPoint(l,p)}catch(t){r=null}}if(r){var q=h.selection.getIERange;h.selection.getIERange=function(){return r}}h.selection.cache();q&&(h.selection.getIERange=q);h.selection._cachedRange&&h.selection._cachedStartElement&&(h.fireEvent("beforeselectionchange"),h.fireEvent("selectionchange",!!f),h.fireEvent("afterselectionchange"),
            h.selection.clear())}},e||50)},_callCmdFn:function(e,f){var h=f[0].toLowerCase();var n=(h=this.commands[h]||UE.commands[h])&&h[e];if(!(h&&n||"queryCommandState"!=e))return 0;if(n)return n.apply(this,f)},execCommand:function(e){e=e.toLowerCase();var f=this.commands[e]||UE.commands[e];if(!f||!f.execCommand)return null;if(f.notNeedUndo||this.__hasEnterExecCommand){var h=this._callCmdFn("execCommand",arguments);this.__hasEnterExecCommand||f.ignoreContentChange||this._ignoreContentChange||this.fireEvent("contentchange")}else this.__hasEnterExecCommand=
            !0,-1!=this.queryCommandState.apply(this,arguments)&&(this.fireEvent("saveScene"),this.fireEvent.apply(this,["beforeexeccommand",e].concat(arguments)),h=this._callCmdFn("execCommand",arguments),this.fireEvent.apply(this,["afterexeccommand",e].concat(arguments)),this.fireEvent("saveScene")),this.__hasEnterExecCommand=!1;this.__hasEnterExecCommand||f.ignoreContentChange||this._ignoreContentChange||this._selectionChange();return h},queryCommandState:function(e){return this._callCmdFn("queryCommandState",
            arguments)},queryCommandValue:function(e){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(e){if(e)for(var f=0,h;h=e[f++];)if(0<this.document.getElementsByTagName(h).length)return!0;if(!m.isEmptyBlock(this.body))return!0;e=["div"];for(f=0;h=e[f++];){h=m.getElementsByTagName(this.document,h);for(var n=0,l;l=h[n++];)if(m.isCustomeNode(l))return!0}return!1},reset:function(){this.fireEvent("reset")},setEnabled:function(){if("false"==this.body.contentEditable){this.body.contentEditable=
            !0;var e=this.selection.getRange();try{e.moveToBookmark(this.lastBk),delete this.lastBk}catch(f){e.setStartAtFirst(this.body).collapse(!0)}e.select(!0);this.bkqueryCommandState&&(this.queryCommandState=this.bkqueryCommandState,delete this.bkqueryCommandState);this.bkqueryCommandValue&&(this.queryCommandValue=this.bkqueryCommandValue,delete this.bkqueryCommandValue);this.fireEvent("selectionchange")}},enable:function(){return this.setEnabled()},setDisabled:function(e){var f=this;e=e?x.isArray(e)?e:
            [e]:[];"true"==f.body.contentEditable&&(f.lastBk||(f.lastBk=f.selection.getRange().createBookmark(!0)),f.body.contentEditable=!1,f.bkqueryCommandState=f.queryCommandState,f.bkqueryCommandValue=f.queryCommandValue,f.queryCommandState=function(h){return-1!=x.indexOf(e,h)?f.bkqueryCommandState.apply(f,arguments):-1},f.queryCommandValue=function(h){return-1!=x.indexOf(e,h)?f.bkqueryCommandValue.apply(f,arguments):null},f.fireEvent("selectionchange"))},disable:function(e){return this.setDisabled(e)},_setDefaultContent:function(){function e(){var f=
            this;f.document.getElementById("initContent")&&(f.body.innerHTML="<p>"+(ka?"":"<br/>")+"</p>",f.removeListener("firstBeforeExecCommand focus",e),setTimeout(function(){f.focus();f._selectionChange()},0))}return function(f){this.body.innerHTML='<p id="initContent">'+f+"</p>";this.addListener("firstBeforeExecCommand focus",e)}}(),setShow:function(){var e=this.selection.getRange();if("none"==this.container.style.display){try{e.moveToBookmark(this.lastBk),delete this.lastBk}catch(f){e.setStartAtFirst(this.body).collapse(!0)}setTimeout(function(){e.select(!0)},
            100);this.container.style.display=""}},show:function(){return this.setShow()},setHide:function(){this.lastBk||(this.lastBk=this.selection.getRange().createBookmark(!0));this.container.style.display="none"},hide:function(){return this.setHide()},getLang:function(e){var f=UE.I18N[this.options.lang];if(!f)throw Error("not import language file");e=(e||"").split(".");for(var h=0,n;(n=e[h++])&&(f=f[n],f););return f},getContentLength:function(e,f){var h=this.getContent(!1,!1,!0).length;if(e){f=(f||[]).concat(["hr",
            "img","iframe"]);h=this.getContentTxt().replace(/[\t\r\n]+/g,"").length;e=0;for(var n;n=f[e++];)h+=this.document.getElementsByTagName(n).length}return h},addInputRule:function(e){this.inputRules.push(e)},filterInputRule:function(e){for(var f=0,h;h=this.inputRules[f++];)h.call(this,e)},addOutputRule:function(e){this.outputRules.push(e)},filterOutputRule:function(e){for(var f=0,h;h=this.outputRules[f++];)h.call(this,e)},getActionUrl:function(e){e=this.getOpt(e)||e;var f=this.getOpt("imageUrl"),h=this.getOpt("serverUrl");
            !h&&f&&(h=f.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2"));return h?(h=h+(-1==h.indexOf("?")?"?":"&")+"action="+(e||""),x.formatUrl(h)):""}};x.inherits(g,Ba)})();UE.Editor.defaultOptions=function(k){k=k.options.UEDITOR_HOME_URL;return{isShow:!0,initialContent:"",initialStyle:"",autoClearinitialContent:!1,iframeCssUrl:k+"themes/iframe.css",textarea:"editorValue",focus:!1,focusInEnd:!0,autoClearEmptyNode:!0,fullscreen:!1,readonly:!1,zIndex:999,imagePopup:!0,enterTag:"p",customDomain:!1,lang:"zh-cn",
        langPath:k+"lang/",theme:"default",themePath:k+"themes/",allHtmlEnabled:!1,scaleEnabled:!1,tableNativeEditInFF:!1,autoSyncData:!0,fileNameFormat:"{time}{rand:6}"}};(function(){UE.Editor.prototype.loadServerConfig=function(){function k(d){console&&console.error(d)}var b=this;setTimeout(function(){try{b.options.imageUrl&&b.setOpt("serverUrl",b.options.imageUrl.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2"));var d=b.getActionUrl("config"),a=x.isCrossDomainUrl(d);b._serverConfigLoaded=!1;d&&UE.ajax.request(d,
        {method:"GET",dataType:a?"jsonp":"",onsuccess:function(c){try{var g=a?c:eval("("+c.responseText+")");x.extend(b.options,g);b.fireEvent("serverConfigLoaded");b._serverConfigLoaded=!0}catch(e){k(b.getLang("loadconfigFormatError"))}},onerror:function(){k(b.getLang("loadconfigHttpError"))}})}catch(c){k(b.getLang("loadconfigError"))}})};UE.Editor.prototype.isServerConfigLoaded=function(){return this._serverConfigLoaded||!1};UE.Editor.prototype.afterConfigReady=function(k){if(k&&x.isFunction(k)){var b=
        this,d=function(){k.apply(b,arguments);b.removeListener("serverConfigLoaded",d)};b.isServerConfigLoaded()?k.call(b,"serverConfigLoaded"):b.addListener("serverConfigLoaded",d)}}})();UE.ajax=function(){function k(g){var e=[],f;for(f in g)if("method"!=f&&"timeout"!=f&&"async"!=f&&"dataType"!=f&&"callback"!=f&&void 0!=g[f]&&null!=g[f])if("function"!=(typeof g[f]).toLowerCase()&&"object"!=(typeof g[f]).toLowerCase())e.push(encodeURIComponent(f)+"="+encodeURIComponent(g[f]));else if(x.isArray(g[f]))for(var h=
        0;h<g[f].length;h++)e.push(encodeURIComponent(f)+"[]="+encodeURIComponent(g[f][h]));return e.join("&")}function b(g,e){var f=c(),h=!1,n={method:"POST",timeout:5E3,async:!0,data:{},onsuccess:function(){},onerror:function(){}};"object"===typeof g&&(e=g,g=e.url);if(f&&g){var l=e?x.extend(n,e):n;e=k(l);x.isEmptyObject(l.data)||(e+=(e?"&":"")+k(l.data));var p=setTimeout(function(){4!=f.readyState&&(h=!0,f.abort(),clearTimeout(p))},l.timeout);n=l.method.toUpperCase();g=g+(-1==g.indexOf("?")?"?":"&")+("POST"==
    n?"":e+"&noCache="+ +new Date);f.open(n,g,l.async);f.onreadystatechange=function(){if(4==f.readyState)if(h||200!=f.status)l.onerror(f);else l.onsuccess(f)};"POST"==n?(f.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),f.send(e)):f.send(null)}}function d(g,e){function f(y){return function(){try{if(y)l.onerror&&l.onerror();else try{clearTimeout(t),h.apply(window,arguments)}catch(A){}}catch(A){l.onerror&&l.onerror.call(window,A)}finally{l.oncomplete&&l.oncomplete.apply(window,arguments);
        n.parentNode&&n.parentNode.removeChild(n);window[v]=null;try{delete window[v]}catch(A){}}}}var h=e.onsuccess||function(){},n=document.createElement("SCRIPT"),l=e||{},p=l.charset,r=l.jsonp||"callback",q=l.timeOut||0,t,u=new RegExp("(\\?|&)"+r+"=([^&]*)"),w;if(x.isFunction(h)){var v="bd__editor__"+Math.floor(2147483648*Math.random()).toString(36);window[v]=f(0)}else if(x.isString(h))v=h;else if(w=u.exec(g))v=w[2];g=g.replace(u,"$1"+r+"="+v);0>g.search(u)&&(g+=(0>g.indexOf("?")?"?":"&")+r+"="+v);r=k(e);
        x.isEmptyObject(e.data)||(r+=(r?"&":"")+k(e.data));r&&(g=g.replace(/\?/,"?"+r+"&"));n.onerror=f(1);q&&(t=setTimeout(f(1),q));(function(y,A,E){y.setAttribute("type","text/javascript");y.setAttribute("defer","defer");E&&y.setAttribute("charset",E);y.setAttribute("src",A);document.getElementsByTagName("head")[0].appendChild(y)})(n,g,p)}var a="XMLHttpRequest()";try{new ActiveXObject("Msxml2.XMLHTTP"),a="ActiveXObject('Msxml2.XMLHTTP')"}catch(g){try{new ActiveXObject("Microsoft.XMLHTTP"),a="ActiveXObject('Microsoft.XMLHTTP')"}catch(e){}}var c=
        new Function("return new "+a);return{request:function(g,e){e&&"jsonp"==e.dataType?d(g,e):b(g,e)},getJSONP:function(g,e,f){d(g,{data:e,oncomplete:f})}}}();UE.filterWord=function(){function k(d){return d=d.replace(/[\d.]+\w+/g,function(a){return x.transUnitToPx(a)})}function b(d){return d.replace(/[\t\r\n]+/g," ").replace(/\x3c!--[\s\S]*?--\x3e/ig,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(a){if(B.opera)return"";try{if(/Bitmap/i.test(a))return"";var c=a.match(/width:([ \d.]*p[tx])/i)[1],
        g=a.match(/height:([ \d.]*p[tx])/i)[1],e=a.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+k(c)+'" height="'+k(g)+'" src="'+e+'" />'}catch(f){return""}}).replace(/<\/?div[^>]*>/g,"").replace(/v:\w+=(["']?)[^'"]+\1/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/\s+(class|lang|align)\s*=\s*(['"]?)([\w-]+)\2/ig,function(a,c,g,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       e){return"class"==c&&"MsoListParagraph"==e?a:""}).replace(/<(font|span)[^>]*>(\s*)<\/\1>/gi,function(a,c,g){return g.replace(/[\t\r\n ]+/g," ")}).replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(a,c,g,e){a=[];e=e.replace(/^\s+|\s+$/,"").replace(/&#39;/g,"'").replace(/&quot;/gi,"'").replace(/[\d.]+(cm|pt)/g,function(l){return x.transUnitToPx(l)}).split(/;\s*/g);g=0;for(var f;f=e[g];g++){var h=f.split(":");if(2==h.length){f=h[0].toLowerCase();var n=h[1].toLowerCase();if(!(/^(background)\w*/.test(f)&&
        0==n.replace(/(initial|\s)/g,"").length||/^(margin)\w*/.test(f)&&/^0\w+$/.test(n))){switch(f){case "mso-padding-alt":case "mso-padding-top-alt":case "mso-padding-right-alt":case "mso-padding-bottom-alt":case "mso-padding-left-alt":case "mso-margin-alt":case "mso-margin-top-alt":case "mso-margin-right-alt":case "mso-margin-bottom-alt":case "mso-margin-left-alt":case "mso-height":case "mso-width":case "mso-vertical-align-alt":/<table/.test(c)||(a[g]=f.replace(/^mso-|-alt$/g,"")+":"+k(n));continue;case "horiz-align":a[g]=
        "text-align:"+n;continue;case "vert-align":a[g]="vertical-align:"+n;continue;case "font-color":case "mso-foreground":a[g]="color:"+n;continue;case "mso-background":case "mso-highlight":a[g]="background:"+n;continue;case "mso-default-height":a[g]="min-height:"+k(n);continue;case "mso-default-width":a[g]="min-width:"+k(n);continue;case "mso-padding-between-alt":a[g]="border-collapse:separate;border-spacing:"+k(n);continue;case "text-line-through":if("single"==n||"double"==n)a[g]="text-decoration:line-through";
        continue;case "mso-zero-height":"yes"==n&&(a[g]="display:none");continue;case "margin":if(!/[1-9]/.test(n))continue}/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(f)||/text\-indent|padding|margin/.test(f)&&/\-[\d.]+/.test(n)||(a[g]=f+":"+h[1])}}}return c+(a.length?' style="'+a.join(";").replace(/;{2,}/g,";")+'"':"")})}return function(d){return/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<(v|o):|lang=)/ig.test(d)?
        b(d):d}}();(function(){function k(l,p,r){l.push("\n");return p+(r?1:-1)}function b(l,p){for(var r=0;r<p;r++)l.push("    ")}function d(l,p,r,q){switch(l.type){case "root":for(var t=0,u;u=l.children[t++];)r&&"element"==u.type&&!M.$inlineWithA[u.tagName]&&1<t&&(k(p,q,!0),b(p,q)),d(u,p,r,q);break;case "text":"pre"==l.parentNode.tagName?p.push(l.data):p.push(n[l.parentNode.tagName]?x.html(l.data):l.data.replace(/[ ]{2}/g," &nbsp;"));break;case "element":a(l,p,r,q);break;case "comment":p.push("\x3c!--"+
        l.data+"--\x3e")}return p}function a(l,p,r,q){var t="";if(l.attrs){t=[];var u=l.attrs,w;for(w in u)t.push(w+(void 0!==u[w]?'="'+(h[w]?x.html(u[w]).replace(/["]/g,function(v){return"&quot;"}):x.unhtml(u[w]))+'"':""));t=t.join(" ")}p.push("<"+l.tagName+(t?" "+t:"")+(M.$empty[l.tagName]?"/":"")+">");r&&!M.$inlineWithA[l.tagName]&&"pre"!=l.tagName&&l.children&&l.children.length&&(q=k(p,q,!0),b(p,q));if(l.children&&l.children.length)for(t=0;u=l.children[t++];)r&&"element"==u.type&&!M.$inlineWithA[u.tagName]&&
    1<t&&(k(p,q),b(p,q)),d(u,p,r,q);M.$empty[l.tagName]||(r&&!M.$inlineWithA[l.tagName]&&"pre"!=l.tagName&&l.children&&l.children.length&&(q=k(p,q),b(p,q)),p.push("</"+l.tagName+">"))}function c(l,p){var r;if("element"==l.type&&l.getAttr("id")==p)return l;if(l.children&&l.children.length)for(var q=0;r=l.children[q++];)if(r=c(r,p))return r}function g(l,p,r){"element"==l.type&&l.tagName==p&&r.push(l);if(l.children&&l.children.length)for(var q=0,t;t=l.children[q++];)g(t,p,r)}function e(l,p){if(l.children&&
        l.children.length)for(var r=0,q;q=l.children[r];)e(q,p),q.parentNode&&(q.children&&q.children.length&&p(q),q.parentNode&&r++);else p(l)}var f=UE.uNode=function(l){this.type=l.type;this.data=l.data;this.tagName=l.tagName;this.parentNode=l.parentNode;this.attrs=l.attrs||{};this.children=l.children},h={href:1,src:1,_src:1,_href:1,cdata_data:1},n={style:1,script:1};f.createElement=function(l){return/[<>]/.test(l)?UE.htmlparser(l).children[0]:new f({type:"element",children:[],tagName:l})};f.createText=
        function(l,p){return new UE.uNode({type:"text",data:p?l:x.unhtml(l||"")})};f.prototype={toHtml:function(l){var p=[];d(this,p,l,0);return p.join("")},innerHTML:function(l){if("element"!=this.type||M.$empty[this.tagName])return this;if(x.isString(l)){if(this.children)for(var p=0,r;r=this.children[p++];)r.parentNode=null;this.children=[];l=UE.htmlparser(l);for(p=0;r=l.children[p++];)this.children.push(r),r.parentNode=this;return this}l=new UE.uNode({type:"root",children:this.children});return l.toHtml()},
        innerText:function(l,p){if("element"!=this.type||M.$empty[this.tagName])return this;if(l){if(this.children)for(var r=0,q;q=this.children[r++];)q.parentNode=null;this.children=[];this.appendChild(f.createText(l,p));return this}return this.toHtml().replace(/<[^>]+>/g,"")},getData:function(){return"element"==this.type?"":this.data},firstChild:function(){return this.children?this.children[0]:null},lastChild:function(){return this.children?this.children[this.children.length-1]:null},previousSibling:function(){for(var l=
            this.parentNode,p=0,r;r=l.children[p];p++)if(r===this)return 0==p?null:l.children[p-1]},nextSibling:function(){for(var l=this.parentNode,p=0,r;r=l.children[p++];)if(r===this)return l.children[p]},replaceChild:function(l,p){if(this.children){l.parentNode&&l.parentNode.removeChild(l);for(var r=0,q;q=this.children[r];r++)if(q===p)return this.children.splice(r,1,l),p.parentNode=null,l.parentNode=this,l}},appendChild:function(l){if("root"==this.type||"element"==this.type&&!M.$empty[this.tagName]){this.children||
        (this.children=[]);l.parentNode&&l.parentNode.removeChild(l);for(var p=0,r;r=this.children[p];p++)if(r===l){this.children.splice(p,1);break}this.children.push(l);l.parentNode=this;return l}},insertBefore:function(l,p){if(this.children){l.parentNode&&l.parentNode.removeChild(l);for(var r=0,q;q=this.children[r];r++)if(q===p)return this.children.splice(r,0,l),l.parentNode=this,l}},insertAfter:function(l,p){if(this.children){l.parentNode&&l.parentNode.removeChild(l);for(var r=0,q;q=this.children[r];r++)if(q===
            p)return this.children.splice(r+1,0,l),l.parentNode=this,l}},removeChild:function(l,p){if(this.children)for(var r=0,q;q=this.children[r];r++)if(q===l){this.children.splice(r,1);q.parentNode=null;if(p&&q.children&&q.children.length)for(l=0;p=q.children[l];l++)this.children.splice(r+l,0,p),p.parentNode=this;return q}},getAttr:function(l){return this.attrs&&this.attrs[l.toLowerCase()]},setAttr:function(l,p){if(l)if(this.attrs||(this.attrs={}),x.isObject(l))for(var r in l)l[r]?this.attrs[r.toLowerCase()]=
            l[r]:delete this.attrs[r];else p?this.attrs[l.toLowerCase()]=p:delete this.attrs[l];else delete this.attrs},getIndex:function(){for(var l=this.parentNode,p=0,r;r=l.children[p];p++)if(r===this)return p;return-1},getNodeById:function(l){var p;if(this.children&&this.children.length)for(var r=0;p=this.children[r++];)if(p=c(p,l))return p},getNodesByTagName:function(l){l=x.trim(l).replace(/[ ]{2,}/g," ").split(" ");var p=[],r=this;x.each(l,function(q){if(r.children&&r.children.length)for(var t=0,u;u=r.children[t++];)g(u,
            q,p)});return p},getStyle:function(l){var p=this.getAttr("style");return p?(l=p.match(new RegExp("(^|;)\\s*"+l+":([^;]+)","i")))&&l[0]?l[2]:"":""},setStyle:function(l,p){function r(u,w){q=q.replace(new RegExp("(^|;)\\s*"+u+":([^;]+;?)","gi"),"$1");w&&(q=u+":"+x.unhtml(w)+";"+q)}var q=this.getAttr("style");q||(q="");if(x.isObject(l))for(var t in l)r(t,l[t]);else r(l,p);this.setAttr("style",x.trim(q))},traversal:function(l){this.children&&this.children.length&&e(this,l);return this}}})();UE.htmlparser=
        function(k,b){function d(w,v){if(l[w.tagName]){var y=h.createElement(l[w.tagName]);w.appendChild(y);y.appendChild(h.createText(v))}else w.appendChild(h.createText(v))}function a(w,v,y){var A;if(A=n[v]){for(var E=w,I;"root"!=E.type;){if(x.isArray(A)?-1!=x.indexOf(A,E.tagName):A==E.tagName){w=E;I=!0;break}E=E.parentNode}I||(w=a(w,x.isArray(A)?A[0]:A))}A=new h({parentNode:w,type:"element",tagName:v.toLowerCase(),children:M.$empty[v]?null:[]});if(y){for(E={};I=g.exec(y);)E[I[1].toLowerCase()]=f[I[1].toLowerCase()]?
            I[2]||I[3]||I[4]:x.unhtml(I[2]||I[3]||I[4]);A.attrs=E}w.children.push(A);return M.$empty[v]?w:A}var c=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\s\/<>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,g=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,e={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1};k=k.replace(new RegExp(m.fillChar,"g"),"");b||(k=k.replace(new RegExp("[\\r\\t\\n"+
            (b?"":" ")+"]*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n"+(b?"":" ")+"]*","g"),function(w,v){return v&&e[v.toLowerCase()]?w.replace(/(^[\n\r]+)|([\n\r]+$)/g,""):w.replace(new RegExp("^[\\r\\n"+(b?"":" ")+"]+"),"").replace(new RegExp("[\\r\\n"+(b?"":" ")+"]+$"),"")}));for(var f={href:1,src:1},h=UE.uNode,n={td:"tr",tr:["tbody","thead","tfoot"],tbody:"table",th:"tr",thead:"table",tfoot:"table",caption:"table",li:["ul","ol"],dt:"dl",dd:"dl",option:"select"},l={ol:"li",ul:"li"},p,r=0,q=0,t=new h({type:"root",children:[]}),
                                                                                                                                                                                                                                                                                       u=t;p=c.exec(k);){r=p.index;try{if(r>q&&d(u,k.slice(q,r)),p[3])M.$cdata[u.tagName]?d(u,p[0]):u=a(u,p[3].toLowerCase(),p[4]);else if(p[1]){if("root"!=u.type)if(M.$cdata[u.tagName]&&!M.$cdata[p[1]])d(u,p[0]);else{for(r=u;"element"==u.type&&u.tagName!=p[1].toLowerCase();)if(u=u.parentNode,"root"==u.type)throw u=r,"break";u=u.parentNode}}else p[2]&&u.children.push(new h({type:"comment",data:p[2],parentNode:u}))}catch(w){}q=c.lastIndex}q<k.length&&d(u,k.slice(q));return t};UE.filterNode=function(){function k(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    d){switch(b.type){case "element":var a;if(a=d[b.tagName])if("-"===a)b.parentNode.removeChild(b);else if(x.isFunction(a)){var c=b.parentNode,g=b.getIndex();a(b);if(b.parentNode){if(b.children)for(a=0;g=b.children[a];)k(g,d),g.parentNode&&a++}else for(a=g;g=c.children[a];)k(g,d),g.parentNode&&a++}else{if((a=a.$)&&b.attrs){g={};for(c in a){var e=b.getAttr(c);if("style"==c&&x.isArray(a[c])){var f=[];x.each(a[c],function(h){var n;(n=b.getStyle(h))&&f.push(h+":"+n)});e=f.join(";")}e&&(g[c]=e)}b.attrs=g}if(b.children)for(a=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                0;g=b.children[a];)k(g,d),g.parentNode&&a++}else if(M.$cdata[b.tagName])b.parentNode.removeChild(b);else for(c=b.parentNode,g=b.getIndex(),b.parentNode.removeChild(b,!0),a=g;g=c.children[a];)k(g,d),g.parentNode&&a++;break;case "comment":b.parentNode.removeChild(b)}}return function(b,d){if(x.isEmptyObject(d))return b;var a;(a=d["-"])&&x.each(a.split(" "),function(g){d[g]="-"});a=0;for(var c;c=b.children[a];)k(c,d),c.parentNode&&a++;return b}}();UE.plugin=function(){var k={};return{register:function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       d,a,c){a&&x.isFunction(a)&&(c=a,a=null);k[b]={optionName:a||b,execFn:d,afterDisabled:c}},load:function(b){x.each(k,function(d){var a=d.execFn.call(b);!1!==b.options[d.optionName]?a&&x.each(a,function(c,g){switch(g.toLowerCase()){case "shortcutkey":b.addshortcutkey(c);break;case "bindevents":x.each(c,function(e,f){b.addListener(f,e)});break;case "bindmultievents":x.each(x.isArray(c)?c:[c],function(e){var f=x.trim(e.type).split(/\s+/);x.each(f,function(h){b.addListener(h,e.handler)})});break;case "commands":x.each(c,
            function(e,f){b.commands[f]=e});break;case "outputrule":b.addOutputRule(c);break;case "inputrule":b.addInputRule(c);break;case "defaultoptions":b.setOpt(c)}}):d.afterDisabled&&d.afterDisabled.call(b)});x.each(UE.plugins,function(d){d.call(b)})},run:function(b,d){(b=k[b])&&b.exeFn.call(d)}}}();var Ca=UE.keymap={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Del:46,NumLock:144,Cmd:91,
        "=":187,"-":189,b:66,i:73,z:90,y:89,v:86,x:88,s:83,n:78},ua=UE.LocalStorage=function(){function k(){var a=document.createElement("div");a.style.display="none";if(!a.addBehavior)return null;a.addBehavior("#default#userdata");return{getItem:function(c){var g=null;try{document.body.appendChild(a),a.load(d),g=a.getAttribute(c),document.body.removeChild(a)}catch(e){}return g},setItem:function(c,g){document.body.appendChild(a);a.setAttribute(c,g);a.save(d);document.body.removeChild(a)},removeItem:function(c){document.body.appendChild(a);
            a.removeAttribute(c);a.save(d);document.body.removeChild(a)}}}var b=window.localStorage||k()||null,d="localStorage";return{saveLocalData:function(a,c){return b&&c?(b.setItem(a,c),!0):!1},getLocalData:function(a){return b?b.getItem(a):null},removeItem:function(a){b&&b.removeItem(a)}}}();(function(){UE.Editor.prototype.setPreferences=function(k,b){var d={};x.isString(k)?d[k]=b:d=k;(k=ua.getLocalData("ueditor_preference"))&&(k=x.str2json(k))?x.extend(k,d):k=d;k&&ua.saveLocalData("ueditor_preference",
        x.json2str(k))};UE.Editor.prototype.getPreferences=function(k){var b=ua.getLocalData("ueditor_preference");return b&&(b=x.str2json(b))?k?b[k]:b:null};UE.Editor.prototype.removePreferences=function(k){var b=ua.getLocalData("ueditor_preference");b&&(b=x.str2json(b))&&(b[k]=void 0,delete b[k]);b&&ua.saveLocalData("ueditor_preference",x.json2str(b))}})();UE.plugins.defaultfilter=function(){var k=this;k.setOpt({allowDivTransToP:!0,disabledTableInTable:!0});k.addInputRule(function(b){function d(g){for(;g&&
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              "element"==g.type;){if("td"==g.tagName)return!0;g=g.parentNode}return!1}var a=this.options.allowDivTransToP,c;b.traversal(function(g){if("element"==g.type)if(M.$cdata[g.tagName]||!k.options.autoClearEmptyNode||!M.$inline[g.tagName]||M.$empty[g.tagName]||g.attrs&&!x.isEmptyObject(g.attrs))switch(g.tagName){case "style":case "script":g.setAttr({cdata_tag:g.tagName,cdata_data:g.innerHTML()||"",_ue_custom_node_:"true"});g.tagName="div";g.innerHTML("");break;case "a":(c=g.getAttr("href"))&&g.setAttr("_href",
        c);break;case "img":if((c=g.getAttr("src"))&&/^data:/.test(c)){g.parentNode.removeChild(g);break}g.setAttr("_src",g.getAttr("src"));break;case "span":B.webkit&&(c=g.getStyle("white-space"))&&/nowrap|normal/.test(c)&&(g.setStyle("white-space",""),k.options.autoClearEmptyNode&&x.isEmptyObject(g.attrs)&&g.parentNode.removeChild(g,!0));(c=g.getAttr("id"))&&/^_baidu_bookmark_/i.test(c)&&g.parentNode.removeChild(g);break;case "p":if(c=g.getAttr("align"))g.setAttr("align"),g.setStyle("text-align",c);x.each(g.children,
        function(h){if("element"==h.type&&"p"==h.tagName){var n=h.nextSibling();for(g.parentNode.insertAfter(h,g);n;){var l=n.nextSibling();g.parentNode.insertAfter(n,h);h=n;n=l}return!1}});g.firstChild()||g.innerHTML(B.ie?"&nbsp;":"<br/>");break;case "div":if(g.getAttr("cdata_tag"))break;if((c=g.getAttr("class"))&&/^line number\d+/.test(c))break;if(!a)break;for(var e,f=UE.uNode.createElement("p");e=g.firstChild();)"text"!=e.type&&UE.dom.dtd.$block[e.tagName]?f.firstChild()?(g.parentNode.insertBefore(f,g),
        f=UE.uNode.createElement("p")):g.parentNode.insertBefore(e,g):f.appendChild(e);f.firstChild()&&g.parentNode.insertBefore(f,g);g.parentNode.removeChild(g);break;case "dl":g.tagName="ul";break;case "dt":case "dd":g.tagName="li";break;case "li":(e=g.getAttr("class"))&&/list\-/.test(e)||g.setAttr();e=g.getNodesByTagName("ol ul");UE.utils.each(e,function(h){g.parentNode.insertAfter(h,g)});break;case "td":case "th":case "caption":g.children&&g.children.length||g.appendChild(B.ie11below?UE.uNode.createText(" "):
        UE.uNode.createElement("br"));break;case "table":k.options.disabledTableInTable&&d(g)&&(g.parentNode.insertBefore(UE.uNode.createText(g.innerText()),g),g.parentNode.removeChild(g))}else g.firstChild()?"span"!=g.tagName||g.attrs&&!x.isEmptyObject(g.attrs)||g.parentNode.removeChild(g,!0):g.parentNode.removeChild(g)})});k.addOutputRule(function(b){var d;b.traversal(function(a){if("element"==a.type)if(!k.options.autoClearEmptyNode||!M.$inline[a.tagName]||M.$empty[a.tagName]||a.attrs&&!x.isEmptyObject(a.attrs))switch(a.tagName){case "div":if(d=
        a.getAttr("cdata_tag"))a.tagName=d,a.appendChild(UE.uNode.createText(a.getAttr("cdata_data"))),a.setAttr({cdata_tag:"",cdata_data:"",_ue_custom_node_:""});break;case "a":(d=a.getAttr("_href"))&&a.setAttr({href:x.html(d),_href:""});break;case "span":(d=a.getAttr("id"))&&/^_baidu_bookmark_/i.test(d)&&a.parentNode.removeChild(a);break;case "img":(d=a.getAttr("_src"))&&a.setAttr({src:a.getAttr("_src"),_src:""})}else a.firstChild()?"span"!=a.tagName||a.attrs&&!x.isEmptyObject(a.attrs)||a.parentNode.removeChild(a,
        !0):a.parentNode.removeChild(a)})})};UE.commands.inserthtml={execCommand:function(k,b,d){var a=this;if(b&&!0!==a.fireEvent("beforeinserthtml",b)){var c=a.selection.getRange();k=c.document.createElement("div");k.style.display="inline";d||(d=UE.htmlparser(b),a.options.filterRules&&UE.filterNode(d,a.options.filterRules),a.filterInputRule(d),b=d.toHtml());k.innerHTML=x.trim(b);if(!c.collapsed&&(d=c.startContainer,m.isFillChar(d)&&c.setStartBefore(d),d=c.endContainer,m.isFillChar(d)&&c.setEndAfter(d),
            c.txtToElmBoundary(),c.endContainer&&1==c.endContainer.nodeType&&(d=c.endContainer.childNodes[c.endOffset])&&m.isBr(d)&&c.setEndAfter(d),0==c.startOffset&&(d=c.startContainer,m.isBoundaryNode(d,"firstChild")&&(d=c.endContainer,c.endOffset==(3==d.nodeType?d.nodeValue.length:d.childNodes.length)&&m.isBoundaryNode(d,"lastChild")&&(a.body.innerHTML="<p>"+(B.ie?"":"<br/>")+"</p>",c.setStart(a.body.firstChild,0).collapse(!0)))),!c.collapsed&&c.deleteContents(),1==c.startContainer.nodeType)){d=c.startContainer.childNodes[c.startOffset];
            var g;if(d&&m.isBlockElm(d)&&(g=d.previousSibling)&&m.isBlockElm(g)){for(c.setEnd(g,g.childNodes.length).collapse();d.firstChild;)g.appendChild(d.firstChild);m.remove(d)}}var e,f=0;c.inFillChar()&&(d=c.startContainer,m.isFillChar(d)?(c.setStartBefore(d).collapse(!0),m.remove(d)):m.isFillChar(d,!0)&&(d.nodeValue=d.nodeValue.replace(ta,""),c.startOffset--,c.collapsed&&c.collapse(!0)));var h=m.findParentByTagName(c.startContainer,"li",!0);if(h){for(var n;d=k.firstChild;){for(;d&&(3==d.nodeType||!m.isBlockElm(d)||
            "HR"==d.tagName);){n=d.nextSibling;c.insertNode(d).collapse();var l=d;d=n}if(d)if(/^(ol|ul)$/i.test(d.tagName)){for(;d.firstChild;)l=d.firstChild,m.insertAfter(h,d.firstChild),h=h.nextSibling;m.remove(d)}else n=d.nextSibling,g=a.document.createElement("li"),m.insertAfter(h,g),g.appendChild(d),l=d,d=n,h=g}h=m.findParentByTagName(c.startContainer,"li",!0);m.isEmptyBlock(h)&&m.remove(h);l&&c.setStartAfter(l).collapse(!0).select(!0)}else{for(;d=k.firstChild;){if(f){for(l=a.document.createElement("p");d&&
        (3==d.nodeType||!M.$block[d.tagName]);){var p=d.nextSibling;l.appendChild(d);d=p}l.firstChild&&(d=l)}c.insertNode(d);p=d.nextSibling;if(!f&&d.nodeType==m.NODE_ELEMENT&&m.isBlockElm(d)&&(l=m.findParent(d,function(r){return m.isBlockElm(r)}))&&"body"!=l.tagName.toLowerCase()&&(!M[l.tagName][d.nodeName]||d.parentNode!==l)){if(M[l.tagName][d.nodeName])for(e=d.parentNode;e!==l;)g=e,e=e.parentNode;else g=l;m.breakParent(d,g||e);g=d.previousSibling;m.trimWhiteTextNode(g);g.childNodes.length||m.remove(g);
            !B.ie&&(n=d.nextSibling)&&m.isBlockElm(n)&&n.lastChild&&!m.isBr(n.lastChild)&&n.appendChild(a.document.createElement("br"));f=1}n=d.nextSibling;if(!k.firstChild&&n&&m.isBlockElm(n)){c.setStart(n,0).collapse(!0);break}c.setEndAfter(d).collapse()}d=c.startContainer;p&&m.isBr(p)&&m.remove(p);if(m.isBlockElm(d)&&m.isEmptyNode(d))if(p=d.nextSibling)m.remove(d),1==p.nodeType&&M.$block[p.tagName]&&c.setStart(p,0).collapse(!0).shrinkBoundary();else try{d.innerHTML=B.ie?m.fillChar:"<br/>"}catch(r){c.setStartBefore(d),
            m.remove(d)}try{c.select(!0)}catch(r){}}setTimeout(function(){c=a.selection.getRange();c.scrollToView(a.autoHeightEnabled,a.autoHeightEnabled?m.getXY(a.iframe).y:0);a.fireEvent("afterinserthtml",b)},200)}}};UE.plugins.autotypeset=function(){function k(n,l){if(!n||3==n.nodeType)return 0;if(m.isBr(n))return 1;if(n&&n.parentNode&&f[n.tagName.toLowerCase()])return h&&h.contains(n)||n.getAttribute("pagebreak")?0:l?!m.isEmptyBlock(n):m.isEmptyBlock(n,new RegExp("[\\s"+m.fillChar+"]","g"))}function b(n){n.style.cssText||
    (m.removeAttributes(n,["style"]),"span"==n.tagName.toLowerCase()&&m.hasNoAttributes(n)&&m.remove(n,!0))}function d(n,l){if(l){if(!c.pasteFilter)return;n=this.document.createElement("div");n.innerHTML=l.html}else n=this.document.body;for(var p=m.getElementsByTagName(n,"*"),r=0,q;q=p[r++];)if(!0!==this.fireEvent("excludeNodeinautotype",q)){c.clearFontSize&&q.style.fontSize&&(m.removeStyle(q,"font-size"),b(q));c.clearFontFamily&&q.style.fontFamily&&(m.removeStyle(q,"font-family"),b(q));if(k(q)){if(c.mergeEmptyline)for(var t=
        q.nextSibling,u,w=m.isBr(q);k(t);){u=t;t=u.nextSibling;if(w&&(!t||t&&!m.isBr(t)))break;m.remove(u)}if(c.removeEmptyline&&m.inDoc(q,n)&&!e[q.parentNode.tagName.toLowerCase()]){if(m.isBr(q)&&(t=q.nextSibling)&&!m.isBr(t))continue;m.remove(q);continue}}k(q,!0)&&"SPAN"!=q.tagName&&(c.indent&&(q.style.textIndent=c.indentValue),c.textAlign&&(q.style.textAlign=c.textAlign));if(c.removeClass&&q.className&&!g[q.className.toLowerCase()]){if(h&&h.contains(q))continue;m.removeAttributes(q,["class"])}if(c.imageBlockLine&&
        "img"==q.tagName.toLowerCase()&&!q.getAttribute("emotion"))if(l)switch(w=q,c.imageBlockLine){case "left":case "right":case "none":t=w.parentNode;for(var v;M.$inline[t.tagName]||"A"==t.tagName;)t=t.parentNode;u=t;if("P"==u.tagName&&"center"==m.getStyle(u,"text-align")&&!m.isBody(u)&&1==m.getChildCount(u,function(y){return!m.isBr(y)&&!m.isWhitespace(y)}))if(v=u.previousSibling,t=u.nextSibling,v&&t&&1==v.nodeType&&1==t.nodeType&&v.tagName==t.tagName&&m.isBlockElm(v)){for(v.appendChild(u.firstChild);t.firstChild;)v.appendChild(t.firstChild);
        m.remove(u);m.remove(t)}else m.setStyle(u,"text-align","");m.setStyle(w,"float",c.imageBlockLine);break;case "center":if("center"!=this.queryCommandValue("imagefloat")){t=w.parentNode;m.setStyle(w,"float","none");for(u=w;t&&1==m.getChildCount(t,function(y){return!m.isBr(y)&&!m.isWhitespace(y)})&&(M.$inline[t.tagName]||"A"==t.tagName);)u=t,t=t.parentNode;t=this.document.createElement("p");m.setAttributes(t,{style:"text-align:center"});u.parentNode.insertBefore(t,u);t.appendChild(u);m.setStyle(u,"float",
        "")}}else this.selection.getRange().selectNode(q).select(),this.execCommand("imagefloat",c.imageBlockLine);c.removeEmptyNode&&c.removeTagNames[q.tagName.toLowerCase()]&&m.hasNoAttributes(q)&&m.isEmptyBlock(q)&&m.remove(q)}c.tobdc&&(p=UE.htmlparser(n.innerHTML),p.traversal(function(y){if("text"==y.type){var A=y.data;A=x.html(A);for(var E="",I=0;I<A.length;I++)E=32==A.charCodeAt(I)?E+String.fromCharCode(12288):127>A.charCodeAt(I)?E+String.fromCharCode(A.charCodeAt(I)+65248):E+A.charAt(I);y.data=E}}),
        n.innerHTML=p.toHtml());c.bdc2sb&&(p=UE.htmlparser(n.innerHTML),p.traversal(function(y){if("text"==y.type){for(var A=y.data,E="",I=0;I<A.length;I++){var H=A.charCodeAt(I);E=65281<=H&&65373>=H?E+String.fromCharCode(A.charCodeAt(I)-65248):12288==H?E+String.fromCharCode(A.charCodeAt(I)-12288+32):E+A.charAt(I)}y.data=E}}),n.innerHTML=p.toHtml());l&&(l.html=n.innerHTML)}this.setOpt({autotypeset:{mergeEmptyline:!0,removeClass:!0,removeEmptyline:!1,textAlign:"left",imageBlockLine:"center",pasteFilter:!1,
            clearFontSize:!1,clearFontFamily:!1,removeEmptyNode:!1,removeTagNames:x.extend({div:1},M.$removeEmpty),indent:!1,indentValue:"2em",bdc2sb:!1,tobdc:!1}});var a=this,c=a.options.autotypeset,g={selectTdClass:1,pagebreak:1,anchorclass:1},e={li:1},f={div:1,p:1,blockquote:1,center:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,span:1},h;c&&(function(){var n=a.getPreferences("autotypeset");x.extend(a.options.autotypeset,n)}(),c.pasteFilter&&a.addListener("beforepaste",d),a.commands.autotypeset={execCommand:function(){a.removeListener("beforepaste",
            d);c.pasteFilter&&a.addListener("beforepaste",d);d.call(a)}})};UE.plugin.register("autosubmit",function(){return{shortcutkey:{autosubmit:"ctrl+13"},commands:{autosubmit:{execCommand:function(){var k=m.findParentByTagName(this.iframe,"form",!1);k&&!1!==this.fireEvent("beforesubmit")&&(this.sync(),k.submit())}}}}});UE.plugin.register("background",function(){function k(e){var f={};e=e.split(";");x.each(e,function(h){var n=h.indexOf(":"),l=x.trim(h.substr(0,n)).toLowerCase();l&&(f[l]=x.trim(h.substr(n+
        1)||""))});return f}function b(e){if(e){var f=[],h;for(h in e)e.hasOwnProperty(h)&&f.push(h+":"+e[h]+"; ");x.cssRule("editor_background",f.length?"body{"+f.join("")+"}":"",d.document)}else x.cssRule("editor_background","",d.document)}var d=this,a,c=/body[\s]*\{(.+)\}/i,g=d.hasContents;d.hasContents=function(){return d.queryCommandValue("background")?!0:g.apply(d,arguments)};return{bindEvents:{getAllHtml:function(e,f){e=this.body;var h=m.getComputedStyle(e,"background-image");var n=0<h.indexOf(d.options.imagePath)?
                h.substring(h.indexOf(d.options.imagePath),h.length-1).replace(/"|\(|\)/ig,""):"none"!=h?h.replace(/url\("?|"?\)/ig,""):"";h='<style type="text/css">body{';e={"background-color":m.getComputedStyle(e,"background-color")||"#ffffff","background-image":n?"url("+n+")":"","background-repeat":m.getComputedStyle(e,"background-repeat")||"","background-position":B.ie?m.getComputedStyle(e,"background-position-x")+" "+m.getComputedStyle(e,"background-position-y"):m.getComputedStyle(e,"background-position"),height:m.getComputedStyle(e,
                    "height")};for(var l in e)e.hasOwnProperty(l)&&(h+=l+":"+e[l]+"; ");f.push(h+"}</style> ")},aftersetcontent:function(){0==a&&b()}},inputRule:function(e){a=!1;x.each(e.getNodesByTagName("p"),function(f){var h=f.getAttr("data-background");h&&(a=!0,b(k(h)),f.parentNode.removeChild(f))})},outputRule:function(e){var f=(x.cssRule("editor_background",this.document)||"").replace(/[\n\r]+/g,"").match(c);f&&e.appendChild(UE.uNode.createElement('<p style="display:none;" data-background="'+x.trim(f[1].replace(/"/g,
            "").replace(/[\s]+/g," "))+'"><br/></p>'))},commands:{background:{execCommand:function(e,f){b(f)},queryCommandValue:function(){var e=(x.cssRule("editor_background",this.document)||"").replace(/[\n\r]+/g,"").match(c);return e?k(e[1]):null},notNeedUndo:!0}}}});UE.commands.imagefloat={execCommand:function(k,b){k=this.selection.getRange();if(!k.collapsed){var d=k.getClosedNode();if(d&&"IMG"==d.tagName)switch(b){case "left":case "right":case "none":for(var a=d.parentNode,c,g;M.$inline[a.tagName]||"A"==
        a.tagName;)a=a.parentNode;c=a;if("P"==c.tagName&&"center"==m.getStyle(c,"text-align")){if(!m.isBody(c)&&1==m.getChildCount(c,function(e){return!m.isBr(e)&&!m.isWhitespace(e)}))if(a=c.previousSibling,g=c.nextSibling,a&&g&&1==a.nodeType&&1==g.nodeType&&a.tagName==g.tagName&&m.isBlockElm(a)){for(a.appendChild(c.firstChild);g.firstChild;)a.appendChild(g.firstChild);m.remove(c);m.remove(g)}else m.setStyle(c,"text-align","");k.selectNode(d).select()}m.setStyle(d,"float","none"==b?"":b);"none"==b&&m.removeAttributes(d,
            "align");break;case "center":if("center"!=this.queryCommandValue("imagefloat")){a=d.parentNode;m.setStyle(d,"float","");m.removeAttributes(d,"align");for(c=d;a&&1==m.getChildCount(a,function(e){return!m.isBr(e)&&!m.isWhitespace(e)})&&(M.$inline[a.tagName]||"A"==a.tagName);)c=a,a=a.parentNode;k.setStartBefore(c).setCursor(!1);a=this.document.createElement("div");a.appendChild(c);m.setStyle(c,"float","");this.execCommand("insertHtml",'<p id="_img_parent_tmp" style="text-align:center">'+a.innerHTML+
            "</p>");c=this.document.getElementById("_img_parent_tmp");c.removeAttribute("id");c=c.firstChild;k.selectNode(c).select();(g=c.parentNode.nextSibling)&&m.isEmptyNode(g)&&m.remove(g)}}}},queryCommandValue:function(){var k=this.selection.getRange();if(k.collapsed)return"none";if((k=k.getClosedNode())&&1==k.nodeType&&"IMG"==k.tagName){var b=m.getComputedStyle(k,"float")||k.getAttribute("align");"none"==b&&(b="center"==m.getComputedStyle(k.parentNode,"text-align")?"center":b);return{left:1,right:1,center:1}[b]?
            b:"none"}return"none"},queryCommandState:function(){var k=this.selection.getRange();return k.collapsed?-1:(k=k.getClosedNode())&&1==k.nodeType&&"IMG"==k.tagName?0:-1}};UE.commands.insertimage={execCommand:function(k,b){function d(e){x.each(["width","height","border","hspace","vspace"],function(f){e[f]&&(e[f]=parseInt(e[f],10)||0)});x.each(["src","_src"],function(f){e[f]&&(e[f]=x.unhtmlForUrl(e[f]))});x.each(["title","alt"],function(f){e[f]&&(e[f]=x.unhtml(e[f]))})}b=x.isArray(b)?b:[b];if(b.length){k=
            this.selection.getRange();var a=k.getClosedNode();if(!0!==this.fireEvent("beforeinsertimage",b)){if(!a||!/img/i.test(a.tagName)||"edui-faked-video"==a.className&&-1==a.className.indexOf("edui-upload-video")||a.getAttribute("word_img")){k=[];a="";var c=b[0];if(1==b.length)d(c),a='<img src="'+c.src+'" '+(c._src?' _src="'+c._src+'" ':"")+(c.width?'width="'+c.width+'" ':"")+(c.height?' height="'+c.height+'" ':"")+("left"==c.floatStyle||"right"==c.floatStyle?' style="float:'+c.floatStyle+';"':"")+(c.title&&
        ""!=c.title?' title="'+c.title+'"':"")+(c.border&&"0"!=c.border?' border="'+c.border+'"':"")+(c.alt&&""!=c.alt?' alt="'+c.alt+'"':"")+(c.hspace&&"0"!=c.hspace?' hspace = "'+c.hspace+'"':"")+(c.vspace&&"0"!=c.vspace?' vspace = "'+c.vspace+'"':"")+"/>","center"==c.floatStyle&&(a='<p style="text-align: center">'+a+"</p>"),k.push(a);else for(var g=0;c=b[g++];)d(c),a="<p "+("center"==c.floatStyle?'style="text-align: center" ':"")+'><img src="'+c.src+'" '+(c.width?'width="'+c.width+'" ':"")+(c._src?' _src="'+
            c._src+'" ':"")+(c.height?' height="'+c.height+'" ':"")+' style="'+(c.floatStyle&&"center"!=c.floatStyle?"float:"+c.floatStyle+";":"")+(c.border||"")+'" '+(c.title?' title="'+c.title+'"':"")+" /></p>",k.push(a);this.execCommand("insertHtml",k.join(""))}else c=b.shift(),g=c.floatStyle,delete c.floatStyle,m.setAttributes(a,c),this.execCommand("imagefloat",g),0<b.length&&(k.setStartAfter(a).setCursor(!1,!0),this.execCommand("insertimage",b));this.fireEvent("afterinsertimage",b)}}}};UE.plugins.justify=
        function(){var k=m.isBlockElm,b={left:1,right:1,center:1,justify:1},d=function(a,c){var g=a.createBookmark(),e=function(r){return 1==r.nodeType?"br"!=r.tagName.toLowerCase()&&!m.isBookmarkNode(r):!m.isWhitespace(r)};a.enlarge(!0);for(var f=a.createBookmark(),h=m.getNextDomNode(f.start,!1,e),n=a.cloneRange(),l;h&&!(m.getPosition(h,f.end)&m.POSITION_FOLLOWING);)if(3!=h.nodeType&&k(h))h=m.getNextDomNode(h,!0,e);else{for(n.setStartBefore(h);h&&h!==f.end&&!k(h);)l=h,h=m.getNextDomNode(h,!1,null,function(r){return!k(r)});
            n.setEndAfter(l);h=n.getCommonAncestor();if(!m.isBody(h)&&k(h))m.setStyles(h,x.isString(c)?{"text-align":c}:c);else{h=a.document.createElement("p");m.setStyles(h,x.isString(c)?{"text-align":c}:c);var p=n.extractContents();h.appendChild(p);n.insertNode(h)}h=m.getNextDomNode(h,!1,e)}return a.moveToBookmark(f).moveToBookmark(g)};UE.commands.justify={execCommand:function(a,c){a=this.selection.getRange();if(a.collapsed){var g=this.document.createTextNode("p");a.insertNode(g)}d(a,c);g&&(a.setStartBefore(g).collapse(!0),
                m.remove(g));a.select();return!0},queryCommandValue:function(){var a=this.selection.getStart();a=m.getComputedStyle(a,"text-align");return b[a]?a:"left"},queryCommandState:function(){var a=this.selection.getStart();return a&&m.findParentByTagName(a,["td","th","caption"],!0)?-1:0}}};UE.plugins.font=function(){function k(f){for(var h;h=f.parentNode;)if("SPAN"==h.tagName&&1==m.getChildCount(h,function(n){return!m.isBookmarkNode(n)&&!m.isBr(n)}))h.style.cssText+=f.style.cssText,m.remove(f,!0),f=h;else break}
        function b(f,h,n){if(g[h]&&(f.adjustmentBoundary(),!f.collapsed&&1==f.startContainer.nodeType)){var l=f.startContainer.childNodes[f.startOffset];if(l&&m.isTagNode(l,"span")){var p=f.createBookmark();x.each(m.getElementsByTagName(l,"span"),function(r){!r.parentNode||m.isBookmarkNode(r)||"backcolor"==h&&m.getComputedStyle(r,"background-color").toLowerCase()===n||(m.removeStyle(r,g[h]),0==r.style.cssText.replace(/^\s+$/,"").length&&m.remove(r,!0))});f.moveToBookmark(p)}}}function d(f,h,n){var l=f.collapsed,
            p=f.createBookmark();if(l)for(l=p.start.parentNode;M.$inline[l.tagName];)l=l.parentNode;else l=m.getCommonAncestor(p.start,p.end);x.each(m.getElementsByTagName(l,"span"),function(r){if(r.parentNode&&!m.isBookmarkNode(r))if(/\s*border\s*:\s*none;?\s*/i.test(r.style.cssText))/^\s*border\s*:\s*none;?\s*$/.test(r.style.cssText)?m.remove(r,!0):m.removeStyle(r,"border");else{/border/i.test(r.style.cssText)&&"SPAN"==r.parentNode.tagName&&/border/i.test(r.parentNode.style.cssText)&&(r.style.cssText=r.style.cssText.replace(/border[^:]*:[^;]+;?/gi,
            ""));if("fontborder"!=h||"none"!=n)for(var q=r.nextSibling;q&&1==q.nodeType&&"SPAN"==q.tagName;){if(m.isBookmarkNode(q)&&"fontborder"==h)r.appendChild(q);else if(q.style.cssText==r.style.cssText&&(m.moveChild(q,r),m.remove(q)),r.nextSibling===q)break;q=r.nextSibling}k(r);B.ie&&8<B.version&&(q=m.findParent(r,function(t){return"SPAN"==t.tagName&&/background-color/.test(t.style.cssText)}))&&!/background-color/.test(r.style.cssText)&&(r.style.backgroundColor=q.style.backgroundColor)}});f.moveToBookmark(p);
            b(f,h,n)}var a={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family",underline:"text-decoration",strikethrough:"text-decoration",fontborder:"border"},c={underline:1,strikethrough:1,fontborder:1},g={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family"};this.setOpt({fontfamily:[{name:"songti",val:"\u5b8b\u4f53,SimSun"},{name:"yahei",val:"\u5fae\u8f6f\u96c5\u9ed1,Microsoft YaHei"},{name:"kaiti",val:"\u6977\u4f53,\u6977\u4f53_GB2312, SimKai"},
                {name:"heiti",val:"\u9ed1\u4f53, SimHei"},{name:"lishu",val:"\u96b6\u4e66, SimLi"},{name:"andaleMono",val:"andale mono"},{name:"arial",val:"arial, helvetica,sans-serif"},{name:"arialBlack",val:"arial black,avant garde"},{name:"comicSansMs",val:"comic sans ms"},{name:"impact",val:"impact,chicago"},{name:"timesNewRoman",val:"times new roman"}],fontsize:[10,11,12,14,16,18,20,24,36]});this.addInputRule(function(f){x.each(f.getNodesByTagName("u s del font strike"),function(h){if("font"==h.tagName){var n=
            [],l;for(l in h.attrs)switch(l){case "size":n.push("font-size:"+({1:"10",2:"12",3:"16",4:"18",5:"24",6:"32",7:"48"}[h.attrs[l]]||h.attrs[l])+"px");break;case "color":n.push("color:"+h.attrs[l]);break;case "face":n.push("font-family:"+h.attrs[l]);break;case "style":n.push(h.attrs[l])}h.attrs={style:n.join(";")}}else n="u"==h.tagName?"underline":"line-through",h.attrs={style:(h.getAttr("style")||"")+"text-decoration:"+n+";"};h.tagName="span"})});for(var e in a)(function(f,h){UE.commands[f]={execCommand:function(n,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               l){l=l||(this.queryCommandState(n)?"none":"underline"==n?"underline":"fontborder"==n?"1px solid #000":"line-through");var p=this.selection.getRange();if("default"==l){if(p.collapsed){var r=this.document.createTextNode("font");p.insertNode(r).select()}this.execCommand("removeFormat","span,a",h);r&&(p.setStartBefore(r).collapse(!0),m.remove(r));d(p,n,l);p.select()}else if(p.collapsed){var q=m.findParentByTagName(p.startContainer,"span",!0);r=this.document.createTextNode("font");if(!q||q.children.length||
                q[B.ie?"innerText":"textContent"].replace(ta,"").length){p.insertNode(r);p.selectNode(r).select();q=p.document.createElement("span");if(c[f]){if(m.findParentByTagName(r,"a",!0)){p.setStartBefore(r).setCursor();m.remove(r);return}this.execCommand("removeFormat","span,a",h)}q.style.cssText=h+":"+l;r.parentNode.insertBefore(q,r);if(!B.ie||B.ie&&9==B.version)for(var t=q.parentNode;!m.isBlockElm(t);)"SPAN"==t.tagName&&(q.style.cssText=t.style.cssText+";"+q.style.cssText),t=t.parentNode;Ja?setTimeout(function(){p.setStart(q,
                0).collapse(!0);d(p,n,l);p.select()}):(p.setStart(q,0).collapse(!0),d(p,n,l),p.select())}else p.insertNode(r),c[f]&&(p.selectNode(r).select(),this.execCommand("removeFormat","span,a",h,null),q=m.findParentByTagName(r,"span",!0),p.setStartBefore(r)),q&&(q.style.cssText+=";"+h+":"+l),p.collapse(!0).select();m.remove(r)}else c[f]&&this.queryCommandValue(f)&&this.execCommand("removeFormat","span,a",h),p=this.selection.getRange(),p.applyInlineStyle("span",{style:h+":"+l}),d(p,n,l),p.select();return!0},
            queryCommandValue:function(n){var l=this.selection.getStart();if("underline"==n||"strikethrough"==n){for(var p=l;p&&!m.isBlockElm(p)&&!m.isBody(p);){if(1==p.nodeType&&(n=m.getComputedStyle(p,h),"none"!=n))return n;p=p.parentNode}return"none"}if("fontborder"==n){for(n=l;n&&M.$inline[n.tagName];){if((p=m.getComputedStyle(n,"border"))&&/1px/.test(p)&&/solid/.test(p))return p;n=n.parentNode}return""}return"FontSize"==n?(p=m.getComputedStyle(l,h),(n=/^([\d\.]+)(\w+)$/.exec(p))?Math.floor(n[1])+n[2]:p):
                m.getComputedStyle(l,h)},queryCommandState:function(n){if(!c[n])return 0;var l=this.queryCommandValue(n);return"fontborder"==n?/1px/.test(l)&&/solid/.test(l):"underline"==n?/underline/.test(l):/line\-through/.test(l)}}})(e,a[e])};UE.plugins.link=function(){function k(b){var d=b.startContainer,a=b.endContainer;(d=m.findParentByTagName(d,"a",!0))&&b.setStartBefore(d);(a=m.findParentByTagName(a,"a",!0))&&b.setEndAfter(a)}UE.commands.unlink={execCommand:function(){var b=this.selection.getRange();if(!b.collapsed||
            m.findParentByTagName(b.startContainer,"a",!0)){var d=b.createBookmark();k(b);b.removeInlineStyle("a").moveToBookmark(d).select()}},queryCommandState:function(){return!this.highlight&&this.queryCommandValue("link")?0:-1}};UE.commands.link={execCommand:function(b,d){d._href&&(d._href=x.unhtml(d._href,/[<">]/g));d.href&&(d.href=x.unhtml(d.href,/[<">]/g));d.textValue&&(d.textValue=x.unhtml(d.textValue,/[<">]/g));var a=b=this.selection.getRange(),c=a.cloneRange(),g=this.queryCommandValue("link");k(a=
            a.adjustmentBoundary());var e=a.startContainer;1==e.nodeType&&g&&(e=e.childNodes[a.startOffset])&&1==e.nodeType&&"A"==e.tagName&&/^(?:https?|ftp|file)\s*:\s*\/\//.test(e[B.ie?"innerText":"textContent"])&&(e[B.ie?"innerText":"textContent"]=x.html(d.textValue||d.href));if(!c.collapsed||g)a.removeInlineStyle("a"),c=a.cloneRange();if(c.collapsed){g=a.document.createElement("a");if(d.textValue){var f=x.html(d.textValue);delete d.textValue}else f=x.html(d.href);m.setAttributes(g,d);(e=m.findParentByTagName(c.startContainer,
            "a",!0))&&m.isInNodeEndBoundary(c,e)&&a.setStartAfter(e).collapse(!0);g[B.ie?"innerText":"textContent"]=f;a.insertNode(g).selectNode(g)}else a.applyInlineStyle("a",d);b.collapse().select(!0)},queryCommandValue:function(){var b=this.selection.getRange();if(b.collapsed){var d=b.startContainer;if((d=1==d.nodeType?d:d.parentNode)&&(d=m.findParentByTagName(d,"a",!0))&&!m.isInNodeEndBoundary(b,d))return d}else{b.shrinkBoundary();var a=3!=b.startContainer.nodeType&&b.startContainer.childNodes[b.startOffset]?
            b.startContainer.childNodes[b.startOffset]:b.startContainer,c=3==b.endContainer.nodeType||0==b.endOffset?b.endContainer:b.endContainer.childNodes[b.endOffset-1];b=b.getCommonAncestor();d=m.findParentByTagName(b,"a",!0);if(!d&&1==b.nodeType){b=b.getElementsByTagName("a");for(var g,e,f=0,h;h=b[f++];)if(g=m.getPosition(h,a),e=m.getPosition(h,c),(g&m.POSITION_FOLLOWING||g&m.POSITION_CONTAINS)&&(e&m.POSITION_PRECEDING||e&m.POSITION_CONTAINS)){d=h;break}}return d}},queryCommandState:function(){var b=this.selection.getRange().getClosedNode();
            return!b||"edui-faked-video"!=b.className&&-1==b.className.indexOf("edui-upload-video")?0:-1}}};UE.plugins.insertframe=function(){var k=this;k.addListener("selectionchange",function(){k._iframe&&delete k._iframe})};UE.commands.scrawl={queryCommandState:function(){return B.ie&&8>=B.version?-1:0}};UE.plugins.removeformat=function(){this.setOpt({removeFormatTags:"b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var",removeFormatAttributes:"class,style,lang,width,height,align,hspace,valign"});
        this.commands.removeformat={execCommand:function(k,b,d,a,c){function g(p){if(3==p.nodeType||"span"!=p.tagName.toLowerCase())return 0;if(B.ie){var r=p.attributes;if(r.length){p=0;for(var q=r.length;p<q;p++)if(r[p].specified)return 0;return 1}}return!p.attributes.length}var e=new RegExp("^(?:"+(b||this.options.removeFormatTags).replace(/,/g,"|")+")$","i"),f=d?[]:(a||this.options.removeFormatAttributes).split(",");k=new ja.Range(this.document);var h,n,l=function(p){return 1==p.nodeType};k=this.selection.getRange();
                (function(p){var r=p.createBookmark();p.collapsed&&p.enlarge(!0);if(!c){var q=m.findParentByTagName(p.startContainer,"a",!0);q&&p.setStartBefore(q);(q=m.findParentByTagName(p.endContainer,"a",!0))&&p.setEndAfter(q)}h=p.createBookmark();for(q=h.start;(n=q.parentNode)&&!m.isBlockElm(n);)m.breakParent(q,n),m.clearEmptySibling(q);if(h.end){for(q=h.end;(n=q.parentNode)&&!m.isBlockElm(n);)m.breakParent(q,n),m.clearEmptySibling(q);q=m.getNextDomNode(h.start,!1,l);for(var t;q&&q!=h.end;)t=m.getNextDomNode(q,
                    !0,l),M.$empty[q.tagName.toLowerCase()]||m.isBookmarkNode(q)||(e.test(q.tagName)?d?(m.removeStyle(q,d),g(q)&&"text-decoration"!=d&&m.remove(q,!0)):m.remove(q,!0):M.$tableContent[q.tagName]||M.$list[q.tagName]||(m.removeAttributes(q,f),g(q)&&m.remove(q,!0))),q=t}q=h.start.parentNode;!m.isBlockElm(q)||M.$tableContent[q.tagName]||M.$list[q.tagName]||m.removeAttributes(q,f);q=h.end.parentNode;h.end&&m.isBlockElm(q)&&!M.$tableContent[q.tagName]&&!M.$list[q.tagName]&&m.removeAttributes(q,f);p.moveToBookmark(h).moveToBookmark(r);
                    q=p.startContainer;for(t=p.collapsed;1==q.nodeType&&m.isEmptyNode(q)&&M.$removeEmpty[q.tagName];)r=q.parentNode,p.setStartBefore(q),p.startContainer===p.endContainer&&p.endOffset--,m.remove(q),q=r;if(!t)for(q=p.endContainer;1==q.nodeType&&m.isEmptyNode(q)&&M.$removeEmpty[q.tagName];)r=q.parentNode,p.setEndBefore(q),m.remove(q),q=r})(k);k.select()}}};UE.plugins.blockquote=function(){this.commands.blockquote={execCommand:function(k,b){k=this.selection.getRange();var d=m.filterNodeList(this.selection.getStartElementPath(),
            "blockquote"),a=M.blockquote,c=k.createBookmark();if(d){b=k.startContainer;b=m.isBlockElm(b)?b:m.findParent(b,function(h){return m.isBlockElm(h)});a=k.endContainer;a=m.isBlockElm(a)?a:m.findParent(a,function(h){return m.isBlockElm(h)});b=m.findParentByTagName(b,"li",!0)||b;a=m.findParentByTagName(a,"li",!0)||a;"LI"==b.tagName||"TD"==b.tagName||b===d||m.isBody(b)?m.remove(d,!0):m.breakParent(b,d);b!==a&&(d=m.findParentByTagName(a,"blockquote"))&&("LI"==a.tagName||"TD"==a.tagName||m.isBody(a)?d.parentNode&&
            m.remove(d,!0):m.breakParent(a,d));var g=m.getElementsByTagName(this.document,"blockquote");d=0;for(var e;e=g[d++];)e.childNodes.length?m.getPosition(e,b)&m.POSITION_FOLLOWING&&m.getPosition(e,a)&m.POSITION_PRECEDING&&m.remove(e,!0):m.remove(e)}else{d=k.cloneRange();e=g=1==d.startContainer.nodeType?d.startContainer:d.startContainer.parentNode;for(var f=1;;){if(m.isBody(g)){e!==g?k.collapsed?(d.selectNode(e),f=0):d.setStartBefore(e):d.setStart(g,0);break}if(!a[g.tagName]){k.collapsed?d.selectNode(e):
            d.setStartBefore(e);break}e=g;g=g.parentNode}if(f)for(e=g=g=1==d.endContainer.nodeType?d.endContainer:d.endContainer.parentNode;;){if(m.isBody(g)){e!==g?d.setEndAfter(e):d.setEnd(g,g.childNodes.length);break}if(!a[g.tagName]){d.setEndAfter(e);break}e=g;g=g.parentNode}g=k.document.createElement("blockquote");m.setAttributes(g,b);g.appendChild(d.extractContents());d.insertNode(g);b=m.getElementsByTagName(g,"blockquote");for(d=0;a=b[d++];)a.parentNode&&m.remove(a,!0)}k.moveToBookmark(c).select()},queryCommandState:function(){return m.filterNodeList(this.selection.getStartElementPath(),
            "blockquote")?1:0}}};UE.commands.touppercase=UE.commands.tolowercase={execCommand:function(k){var b=this.selection.getRange();if(b.collapsed)return b;for(var d=b.createBookmark(),a=d.end,c=function(e){return!m.isBr(e)&&!m.isWhitespace(e)},g=m.getNextDomNode(d.start,!1,c);g&&m.getPosition(g,a)&m.POSITION_PRECEDING&&(3==g.nodeType&&(g.nodeValue=g.nodeValue["touppercase"==k?"toUpperCase":"toLowerCase"]()),g=m.getNextDomNode(g,!0,c),g!==a););b.moveToBookmark(d).select()}};UE.commands.indent={execCommand:function(){var k=
            this.queryCommandState("indent")?"0em":this.options.indentValue||"2em";this.execCommand("Paragraph","p",{style:"text-indent:"+k})},queryCommandState:function(){var k=m.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return k&&k.style.textIndent&&parseInt(k.style.textIndent)?1:0}};UE.commands.print={execCommand:function(){this.window.print()},notNeedUndo:1};UE.commands.preview={execCommand:function(){var k=window.open("","_blank","").document;k.open();k.write('<!DOCTYPE html><html><head><meta charset="utf-8"/><script src="'+
            this.options.UEDITOR_HOME_URL+"ueditor.parse.js\">\x3c/script><script>setTimeout(function(){uParse('div',{rootPath: '"+this.options.UEDITOR_HOME_URL+"'})},300)\x3c/script></head><body><div>"+this.getContent(null,null,!0)+"</div></body></html>");k.close()},notNeedUndo:1};UE.plugins.selectall=function(){this.commands.selectall={execCommand:function(){var k=this.body,b=this.selection.getRange();b.selectNodeContents(k);m.isEmptyBlock(k)&&(B.opera&&k.firstChild&&1==k.firstChild.nodeType&&b.setStartAtFirst(k.firstChild),
            b.collapse(!0));b.select(!0)},notNeedUndo:1};this.addshortcutkey({selectAll:"ctrl+65"})};UE.plugins.paragraph=function(){var k=m.isBlockElm,b=["TD","LI","PRE"],d=function(a,c,g,e){var f=a.createBookmark(),h=function(t){return 1==t.nodeType?"br"!=t.tagName.toLowerCase()&&!m.isBookmarkNode(t):!m.isWhitespace(t)};a.enlarge(!0);var n=a.createBookmark();var l=m.getNextDomNode(n.start,!1,h);for(var p=a.cloneRange(),r;l&&!(m.getPosition(l,n.end)&m.POSITION_FOLLOWING);)if(3!=l.nodeType&&k(l))l=m.getNextDomNode(l,
        !0,h);else{for(p.setStartBefore(l);l&&l!==n.end&&!k(l);)r=l,l=m.getNextDomNode(l,!1,null,function(t){return!k(t)});p.setEndAfter(r);l=a.document.createElement(c);g&&(m.setAttributes(l,g),e&&"customstyle"==e&&g.style&&(l.style.cssText=g.style));l.appendChild(p.extractContents());m.isEmptyNode(l)&&m.fillChar(a.document,l);p.insertNode(l);var q=l.parentNode;k(q)&&!m.isBody(l.parentNode)&&-1==x.indexOf(b,q.tagName)&&(e&&"customstyle"==e||(q.getAttribute("dir")&&l.setAttribute("dir",q.getAttribute("dir")),
    q.style.cssText&&(l.style.cssText=q.style.cssText+";"+l.style.cssText),q.style.textAlign&&!l.style.textAlign&&(l.style.textAlign=q.style.textAlign),q.style.textIndent&&!l.style.textIndent&&(l.style.textIndent=q.style.textIndent),q.style.padding&&!l.style.padding&&(l.style.padding=q.style.padding)),g&&/h\d/i.test(q.tagName)&&!/h\d/i.test(l.tagName)?(m.setAttributes(q,g),e&&"customstyle"==e&&g.style&&(q.style.cssText=g.style),m.remove(l,!0),l=q):m.remove(l.parentNode,!0));l=-1!=x.indexOf(b,q.tagName)?
        q:l;l=m.getNextDomNode(l,!1,h)}return a.moveToBookmark(n).moveToBookmark(f)};this.setOpt("paragraph",{p:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:""});this.commands.paragraph={execCommand:function(a,c,g,e){a=this.selection.getRange();if(a.collapsed){var f=this.document.createTextNode("p");a.insertNode(f);if(B.ie){var h=f.previousSibling;h&&m.isWhitespace(h)&&m.remove(h);(h=f.nextSibling)&&m.isWhitespace(h)&&m.remove(h)}}a=d(a,c,g,e);f&&(a.setStartBefore(f).collapse(!0),pN=f.parentNode,m.remove(f),m.isBlockElm(pN)&&
        m.isEmptyNode(pN)&&m.fillNode(this.document,pN));B.gecko&&a.collapsed&&1==a.startContainer.nodeType&&(g=a.startContainer.childNodes[a.startOffset])&&1==g.nodeType&&g.tagName.toLowerCase()==c&&a.setStart(g,0).collapse(!0);a.select();return!0},queryCommandValue:function(){var a=m.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return a?a.tagName.toLowerCase():""}}};(function(){var k=m.isBlockElm,b=function(a){return m.filterNodeList(a.selection.getStartElementPath(),function(c){return c&&
        1==c.nodeType&&c.getAttribute("dir")})},d=function(a,c,g){var e=function(r){return 1==r.nodeType?!m.isBookmarkNode(r):!m.isWhitespace(r)};if((c=b(c))&&a.collapsed)return c.setAttribute("dir",g),a;c=a.createBookmark();a.enlarge(!0);for(var f=a.createBookmark(),h=m.getNextDomNode(f.start,!1,e),n=a.cloneRange(),l;h&&!(m.getPosition(h,f.end)&m.POSITION_FOLLOWING);)if(3!=h.nodeType&&k(h))h=m.getNextDomNode(h,!0,e);else{for(n.setStartBefore(h);h&&h!==f.end&&!k(h);)l=h,h=m.getNextDomNode(h,!1,null,function(r){return!k(r)});
        n.setEndAfter(l);h=n.getCommonAncestor();if(!m.isBody(h)&&k(h))h.setAttribute("dir",g);else{h=a.document.createElement("p");h.setAttribute("dir",g);var p=n.extractContents();h.appendChild(p);n.insertNode(h)}h=m.getNextDomNode(h,!1,e)}return a.moveToBookmark(f).moveToBookmark(c)};UE.commands.directionality={execCommand:function(a,c){a=this.selection.getRange();if(a.collapsed){var g=this.document.createTextNode("d");a.insertNode(g)}d(a,this,c);g&&(a.setStartBefore(g).collapse(!0),m.remove(g));a.select();
            return!0},queryCommandValue:function(){var a=b(this);return a?a.getAttribute("dir"):"ltr"}}})();UE.plugins.horizontal=function(){this.commands.horizontal={execCommand:function(k){if(-1!==this.queryCommandState(k)){this.execCommand("insertHtml","<hr>");k=this.selection.getRange();var b=k.startContainer;if(1==b.nodeType&&!b.childNodes[k.startOffset]){var d;(d=b.childNodes[k.startOffset-1])&&1==d.nodeType&&"HR"==d.tagName&&("p"==this.options.enterTag?(d=this.document.createElement("p"),k.insertNode(d),
            k.setStart(d,0).setCursor()):(d=this.document.createElement("br"),k.insertNode(d),k.setStartBefore(d).setCursor()))}return!0}},queryCommandState:function(){return m.filterNodeList(this.selection.getStartElementPath(),"table")?-1:0}};this.addListener("delkeydown",function(k,b){k=this.selection.getRange();k.txtToElmBoundary(!0);if(m.isStartInblock(k)){var d=k.startContainer.previousSibling;if(d&&m.isTagNode(d,"hr"))return m.remove(d),k.select(),m.preventDefault(b),!0}})};UE.commands.time=UE.commands.date=
        {execCommand:function(k,b){function d(g,e){var f=("0"+g.getHours()).slice(-2),h=("0"+g.getMinutes()).slice(-2);g=("0"+g.getSeconds()).slice(-2);return(e||"hh:ii:ss").replace(/hh/ig,f).replace(/ii/ig,h).replace(/ss/ig,g)}function a(g,e){var f=("000"+g.getFullYear()).slice(-4),h=f.slice(-2),n=("0"+(g.getMonth()+1)).slice(-2);g=("0"+g.getDate()).slice(-2);return(e||"yyyy-mm-dd").replace(/yyyy/ig,f).replace(/yy/ig,h).replace(/mm/ig,n).replace(/dd/ig,g)}var c=new Date;this.execCommand("insertHtml","time"==
            k?d(c,b):a(c,b))}};UE.plugins.rowspacing=function(){this.setOpt({rowspacingtop:["5","10","15","20","25"],rowspacingbottom:["5","10","15","20","25"]});this.commands.rowspacing={execCommand:function(k,b,d){this.execCommand("paragraph","p",{style:"margin-"+d+":"+b+"px"});return!0},queryCommandValue:function(k,b){return(k=m.filterNodeList(this.selection.getStartElementPath(),function(d){return m.isBlockElm(d)}))?(b=m.getComputedStyle(k,"margin-"+b).replace(/[^\d]/g,""))?b:0:0}}};UE.plugins.lineheight=
        function(){this.setOpt({lineheight:"1 1.5 1.75 2 3 4 5".split(" ")});this.commands.lineheight={execCommand:function(k,b){this.execCommand("paragraph","p",{style:"line-height:"+("1"==b?"normal":b+"em")});return!0},queryCommandValue:function(){var k=m.filterNodeList(this.selection.getStartElementPath(),function(b){return m.isBlockElm(b)});if(k)return k=m.getComputedStyle(k,"line-height"),"normal"==k?1:k.replace(/[^\d.]*/ig,"")}}};UE.plugins.insertcode=function(){var k=this;k.ready(function(){x.cssRule("pre",
        "pre{margin:.5em 0;padding:.4em .6em;border-radius:8px;background:#f8f8f8;}",k.document)});k.setOpt("insertcode",{as3:"ActionScript3",bash:"Bash/Shell",cpp:"C/C++",css:"Css",cf:"CodeFunction","c#":"C#",delphi:"Delphi",diff:"Diff",erlang:"Erlang",groovy:"Groovy",html:"Html",java:"Java",jfx:"JavaFx",js:"Javascript",pl:"Perl",php:"Php",plain:"Plain Text",ps:"PowerShell",python:"Python",ruby:"Ruby",scala:"Scala",sql:"Sql",vb:"Vb",xml:"Xml"});k.commands.insertcode={execCommand:function(b,d){var a=this.selection.getRange();
            if(b=m.findParentByTagName(a.startContainer,"pre",!0))b.className="brush:"+d+";toolbar:false;";else{var c="";a.collapsed?c=B.ie&&B.ie11below?8>=B.version?"&nbsp;":"":"<br/>":(b=a.extractContents(),a=this.document.createElement("div"),a.appendChild(b),x.each(UE.filterNode(UE.htmlparser(a.innerHTML.replace(/[\r\t]/g,"")),this.options.filterTxtRules).children,function(g){B.ie&&B.ie11below&&8<B.version?("element"==g.type?"br"==g.tagName?c+="\n":M.$empty[g.tagName]||(x.each(g.children,function(e){"element"==
            e.type?"br"==e.tagName?c+="\n":M.$empty[g.tagName]||(c+=e.innerText()):c+=e.data}),/\n$/.test(c)||(c+="\n")):c+=g.data+"\n",!g.nextSibling()&&/\n$/.test(c)&&(c=c.replace(/\n$/,""))):B.ie&&B.ie11below?("element"==g.type?"br"==g.tagName?c+="<br>":M.$empty[g.tagName]||(x.each(g.children,function(e){"element"==e.type?"br"==e.tagName?c+="<br>":M.$empty[g.tagName]||(c+=e.innerText()):c+=e.data}),/br>$/.test(c)||(c+="<br>")):c+=g.data+"<br>",!g.nextSibling()&&/<br>$/.test(c)&&(c=c.replace(/<br>$/,""))):
                (c+="element"==g.type?M.$empty[g.tagName]?"":g.innerText():g.data,!/br\/?\s*>$/.test(c)&&g.nextSibling()&&(c+="<br>"))}));this.execCommand("inserthtml",'<pre id="coder"class="brush:'+d+';toolbar:false">'+c+"</pre>",!0);b=this.document.getElementById("coder");m.removeAttributes(b,"id");(d=b.previousSibling)&&(3==d.nodeType&&1==d.nodeValue.length&&B.ie&&6==B.version||m.isEmptyBlock(d))&&m.remove(d);a=this.selection.getRange();m.isEmptyBlock(b)?a.setStart(b,0).setCursor(!1,!0):a.selectNodeContents(b).select()}},
        queryCommandValue:function(){var b=this.selection.getStartElementPath(),d="";x.each(b,function(a){if("PRE"==a.nodeName)return d=(a=a.className.match(/brush:([^;]+)/))&&a[1]?a[1]:"",!1});return d}};k.addInputRule(function(b){x.each(b.getNodesByTagName("pre"),function(d){var a=d.getNodesByTagName("br");a.length?B.ie&&B.ie11below&&8<B.version&&x.each(a,function(c){var g=UE.uNode.createText("\n");c.parentNode.insertBefore(g,c);c.parentNode.removeChild(c)}):B.ie&&B.ie11below&&8<B.version||(a=d.innerText().split(/\n/),
        d.innerHTML(""),x.each(a,function(c){c.length&&d.appendChild(UE.uNode.createText(c));d.appendChild(UE.uNode.createElement("br"))}))})});k.addOutputRule(function(b){x.each(b.getNodesByTagName("pre"),function(d){var a="";x.each(d.children,function(c){a="text"==c.type?a+c.data.replace(/[ ]/g,"&nbsp;").replace(/\n$/,""):"br"==c.tagName?a+"\n":a+(M.$empty[c.tagName]?c.innerText():"")});d.innerText(a.replace(/(&nbsp;|\n)+$/,""))})});k.notNeedCodeQuery={help:1,undo:1,redo:1,source:1,print:1,searchreplace:1,
        fullscreen:1,preview:1,insertparagraph:1,elementpath:1,insertcode:1,inserthtml:1,selectall:1};k.queryCommandState=function(b){return!this.notNeedCodeQuery[b.toLowerCase()]&&this.selection&&this.queryCommandValue("insertcode")?-1:UE.Editor.prototype.queryCommandState.apply(this,arguments)};k.addListener("beforeenterkeydown",function(){var b=k.selection.getRange(),d=m.findParentByTagName(b.startContainer,"pre",!0);if(d){k.fireEvent("saveScene");b.collapsed||b.deleteContents();if(!B.ie||B.ie9above){d=
        k.document.createElement("br");b.insertNode(d).setStartAfter(d).collapse(!0);d.nextSibling||B.ie&&!(10<B.version)?b.setStartAfter(d):b.insertNode(d.cloneNode(!1));d=d.previousSibling;for(var a;d;)if(a=d,d=d.previousSibling,!d||"BR"==d.nodeName){d=a;break}if(d){for(a="";d&&"BR"!=d.nodeName&&(new RegExp("^[\\s"+m.fillChar+"]*$")).test(d.nodeValue);)a+=d.nodeValue,d=d.nextSibling;"BR"!=d.nodeName&&(d=d.nodeValue.match(new RegExp("^([\\s"+m.fillChar+"]+)")))&&d[1]&&(a+=d[1]);a&&(a=k.document.createTextNode(a),
        b.insertNode(a).setStartAfter(a))}b.collapse(!0).select(!0)}else if(8<B.version)if(d=k.document.createTextNode("\n"),a=b.startContainer,0==b.startOffset){if(a.previousSibling){b.insertNode(d);var c=k.document.createTextNode(" ");b.setStartAfter(d).insertNode(c).setStart(c,0).collapse(!0).select(!0)}}else b.insertNode(d).setStartAfter(d),c=k.document.createTextNode(" "),(a=b.startContainer.childNodes[b.startOffset])&&!/^\n/.test(a.nodeValue)&&b.setStartBefore(d),b.insertNode(c).setStart(c,0).collapse(!0).select(!0);
    else{d=k.document.createElement("br");b.insertNode(d);b.insertNode(k.document.createTextNode(m.fillChar));b.setStartAfter(d);for(d=d.previousSibling;d;)if(a=d,d=d.previousSibling,!d||"BR"==d.nodeName){d=a;break}if(d){for(a="";d&&"BR"!=d.nodeName&&(new RegExp("^[ "+m.fillChar+"]*$")).test(d.nodeValue);)a+=d.nodeValue,d=d.nextSibling;"BR"!=d.nodeName&&(d=d.nodeValue.match(new RegExp("^([ "+m.fillChar+"]+)")))&&d[1]&&(a+=d[1]);a=k.document.createTextNode(a);b.insertNode(a).setStartAfter(a)}b.collapse(!0).select()}k.fireEvent("saveScene");
        return!0}});k.addListener("tabkeydown",function(b,d){b=k.selection.getRange();var a=m.findParentByTagName(b.startContainer,"pre",!0);if(a){k.fireEvent("saveScene");if(!d.shiftKey)if(b.collapsed)a=k.document.createTextNode("    "),b.insertNode(a).setStartAfter(a).collapse(!0).select(!0);else{d=b.createBookmark();for(var c=d.start.previousSibling;c;){if(a.firstChild===c&&!m.isBr(c)){a.insertBefore(k.document.createTextNode("    "),c);break}if(m.isBr(c)){a.insertBefore(k.document.createTextNode("    "),
        c.nextSibling);break}c=c.previousSibling}var g=d.end;c=d.start.nextSibling;for(a.firstChild===d.start&&a.insertBefore(k.document.createTextNode("    "),c.nextSibling);c&&c!==g;){if(m.isBr(c)&&c.nextSibling){if(c.nextSibling===g)break;a.insertBefore(k.document.createTextNode("    "),c.nextSibling)}c=c.nextSibling}b.moveToBookmark(d).select()}k.fireEvent("saveScene");return!0}});k.addListener("beforeinserthtml",function(b,d){var a=this;b=a.selection.getRange();if(m.findParentByTagName(b.startContainer,
        "pre",!0)){b.collapsed||b.deleteContents();var c="";if(B.ie&&8<B.version)x.each(UE.filterNode(UE.htmlparser(d),a.options.filterTxtRules).children,function(e){"element"==e.type?"br"==e.tagName?c+="\n":M.$empty[e.tagName]||(x.each(e.children,function(f){"element"==f.type?"br"==f.tagName?c+="\n":M.$empty[e.tagName]||(c+=f.innerText()):c+=f.data}),/\n$/.test(c)||(c+="\n")):c+=e.data+"\n";!e.nextSibling()&&/\n$/.test(c)&&(c=c.replace(/\n$/,""))}),d=a.document.createTextNode(x.html(c.replace(/&nbsp;/g,
        " "))),b.insertNode(d).selectNode(d).select();else{var g=a.document.createDocumentFragment();x.each(UE.filterNode(UE.htmlparser(d),a.options.filterTxtRules).children,function(e){"element"==e.type?"br"==e.tagName?g.appendChild(a.document.createElement("br")):M.$empty[e.tagName]||(x.each(e.children,function(f){"element"==f.type?"br"==f.tagName?g.appendChild(a.document.createElement("br")):M.$empty[e.tagName]||g.appendChild(a.document.createTextNode(x.html(f.innerText().replace(/&nbsp;/g," ")))):g.appendChild(a.document.createTextNode(x.html(f.data.replace(/&nbsp;/g,
        " "))))}),"BR"!=g.lastChild.nodeName&&g.appendChild(a.document.createElement("br"))):g.appendChild(a.document.createTextNode(x.html(e.data.replace(/&nbsp;/g," "))));e.nextSibling()||"BR"!=g.lastChild.nodeName||g.removeChild(g.lastChild)});b.insertNode(g).select()}return!0}});k.addListener("keydown",function(b,d){if(40==(d.keyCode||d.which)){b=this.selection.getRange();var a,c=b.startContainer;if(b.collapsed&&(a=m.findParentByTagName(b.startContainer,"pre",!0))&&!a.nextSibling){for(var g=a.lastChild;g&&
    "BR"==g.nodeName;)g=g.previousSibling;if(g===c||b.startContainer===a&&b.startOffset==a.childNodes.length)this.execCommand("insertparagraph"),m.preventDefault(d)}}});k.addListener("delkeydown",function(b,d){b=this.selection.getRange();b.txtToElmBoundary(!0);var a=b.startContainer;if(m.isTagNode(a,"pre")&&b.collapsed&&m.isStartInblock(b)){var c=k.document.createElement("p");m.fillNode(k.document,c);a.parentNode.insertBefore(c,a);m.remove(a);b.setStart(c,0).setCursor(!1,!0);m.preventDefault(d);return!0}})};
    UE.commands.cleardoc={execCommand:function(k){var b=this;k=b.options.enterTag;var d=b.selection.getRange();"br"==k?(b.body.innerHTML="<br/>",d.setStart(b.body,0).setCursor()):(b.body.innerHTML="<p>"+(ka?"":"<br/>")+"</p>",d.setStart(b.body.firstChild,0).setCursor(!1,!0));setTimeout(function(){b.fireEvent("clearDoc")},0)}};UE.plugin.register("anchor",function(){return{bindEvents:{ready:function(){x.cssRule("anchor",".anchorclass{background: url('"+this.options.themePath+this.options.theme+"/images/anchor.gif') no-repeat scroll left center transparent;cursor: auto;display: inline-block;height: 16px;width: 15px;}",
                this.document)}},outputRule:function(k){x.each(k.getNodesByTagName("img"),function(b){var d;if(d=b.getAttr("anchorname"))b.tagName="a",b.setAttr({anchorname:"",name:d,"class":""})})},inputRule:function(k){x.each(k.getNodesByTagName("a"),function(b){b.getAttr("name")&&!b.getAttr("href")&&(b.tagName="img",b.setAttr({anchorname:b.getAttr("name"),"class":"anchorclass"}),b.setAttr("name"))})},commands:{anchor:{execCommand:function(k,b){k=this.selection.getRange();var d=k.getClosedNode();d&&d.getAttribute("anchorname")?
                    b?d.setAttribute("anchorname",b):(k.setStartBefore(d).setCursor(),m.remove(d)):b&&(d=this.document.createElement("img"),k.collapse(!0),m.setAttributes(d,{anchorname:b,"class":"anchorclass"}),k.insertNode(d).setStartAfter(d).setCursor(!1,!0))}}}}});UE.plugins.wordcount=function(){var k=this;k.setOpt("wordCount",!0);k.addListener("contentchange",function(){k.fireEvent("wordcount")});var b;k.addListener("ready",function(){var d=this;m.on(d.body,"keyup",function(a){(a.keyCode||a.which)in{16:1,18:1,20:1,
        37:1,38:1,39:1,40:1}||(clearTimeout(b),b=setTimeout(function(){d.fireEvent("wordcount")},200))})})};UE.plugins.pagebreak=function(){function k(c){if(m.isEmptyBlock(c)){for(var g=c.firstChild,e;g&&1==g.nodeType&&m.isEmptyBlock(g);)e=g,g=g.firstChild;!e&&(e=c);m.fillNode(d.document,e)}}function b(c){return c&&1==c.nodeType&&"HR"==c.tagName&&"pagebreak"==c.className}var d=this,a=["td"];d.setOpt("pageBreakTag","_ueditor_page_break_tag_");d.ready(function(){x.cssRule("pagebreak",".pagebreak{display:block;clear:both !important;cursor:default !important;width: 100% !important;margin:0;}",
        d.document)});d.addInputRule(function(c){c.traversal(function(g){if("text"==g.type&&g.data==d.options.pageBreakTag){var e=UE.uNode.createElement('<hr class="pagebreak" noshade="noshade" size="5" style="-webkit-user-select: none;">');g.parentNode.insertBefore(e,g);g.parentNode.removeChild(g)}})});d.addOutputRule(function(c){x.each(c.getNodesByTagName("hr"),function(g){if("pagebreak"==g.getAttr("class")){var e=UE.uNode.createText(d.options.pageBreakTag);g.parentNode.insertBefore(e,g);g.parentNode.removeChild(g)}})});
        d.commands.pagebreak={execCommand:function(){var c=d.selection.getRange(),g=d.document.createElement("hr");m.setAttributes(g,{"class":"pagebreak",noshade:"noshade",size:"5"});m.unSelectable(g);var e=m.findParentByTagName(c.startContainer,a,!0);if(e)switch(e.tagName){case "TD":e=e.parentNode,e.previousSibling?(e.parentNode.insertBefore(g,e),c=m.findParents(g)):(c=m.findParentByTagName(e,"table"),c.parentNode.insertBefore(g,c),c=m.findParents(g,!0)),e=c[1],g!==e&&m.breakParent(g,e),d.fireEvent("afteradjusttable",
                d.document)}else{if(!c.collapsed)for(c.deleteContents(),e=c.startContainer;!m.isBody(e)&&m.isBlockElm(e)&&m.isEmptyNode(e);)c.setStartBefore(e).collapse(!0),m.remove(e),e=c.startContainer;c.insertNode(g);for(e=g.parentNode;!m.isBody(e);)m.breakParent(g,e),(e=g.nextSibling)&&m.isEmptyBlock(e)&&m.remove(e),e=g.parentNode;e=g.nextSibling;var f=g.previousSibling;b(f)?m.remove(f):f&&k(f);e?(b(e)?m.remove(e):k(e),c.setEndAfter(g).collapse(!1)):(e=d.document.createElement("p"),g.parentNode.appendChild(e),
                m.fillNode(d.document,e),c.setStart(e,0).collapse(!0));c.select(!0)}}}};UE.plugin.register("wordimage",function(){var k=this,b=[];return{commands:{wordimage:{execCommand:function(){for(var d=m.getElementsByTagName(k.body,"img"),a=[],c=0,g;g=d[c++];)(g=g.getAttribute("word_img"))&&a.push(g);return a},queryCommandState:function(){b=m.getElementsByTagName(k.body,"img");for(var d=0,a;a=b[d++];)if(a.getAttribute("word_img"))return 1;return-1},notNeedUndo:!0}},inputRule:function(d){x.each(d.getNodesByTagName("img"),
            function(a){var c=a.attrs,g=128>parseInt(c.width)||43>parseInt(c.height),e=k.options,f=e.UEDITOR_HOME_URL+"themes/default/images/spacer.gif";c.src&&/^(?:(file:\/+))/.test(c.src)&&a.setAttr({width:c.width,height:c.height,alt:c.alt,word_img:c.src,src:f,style:"background:url("+(g?e.themePath+e.theme+"/images/word.gif":e.langPath+e.lang+"/images/localimage.png")+") no-repeat center center;border:1px solid #ddd"})})}}});UE.plugins.dragdrop=function(){var k=this;k.ready(function(){m.on(this.body,"dragend",
        function(){var b=k.selection.getRange(),d=b.getClosedNode()||k.selection.getStart();if(d&&"IMG"==d.tagName){for(var a=d.previousSibling,c;(c=d.nextSibling)&&1==c.nodeType&&"SPAN"==c.tagName&&!c.firstChild;)m.remove(c);(!a||1!=a.nodeType||m.isEmptyBlock(a))&&a||c&&(!c||m.isEmptyBlock(c))||(a&&"P"==a.tagName&&!m.isEmptyBlock(a)?(a.appendChild(d),m.moveChild(c,a),m.remove(c)):c&&"P"==c.tagName&&!m.isEmptyBlock(c)&&c.insertBefore(d,c.firstChild),a&&"P"==a.tagName&&m.isEmptyBlock(a)&&m.remove(a),c&&"P"==
        c.tagName&&m.isEmptyBlock(c)&&m.remove(c),b.selectNode(d).select(),k.fireEvent("saveScene"))}})});k.addListener("keyup",function(b,d){if(13==(d.keyCode||d.which)){b=k.selection.getRange();var a;(a=m.findParentByTagName(b.startContainer,"p",!0))&&"center"==m.getComputedStyle(a,"text-align")&&m.removeStyle(a,"text-align")}})};UE.plugins.undo=function(){function k(r,q){if(r.length!=q.length)return 0;for(var t=0,u=r.length;t<u;t++)if(r[t]!=q[t])return 0;return 1}var b,d=this,a=d.options.maxUndoCount||
        20,c=d.options.maxInputCount||20,g=new RegExp(m.fillChar+"|</hr>","gi"),e={ol:1,ul:1,table:1,tbody:1,tr:1,body:1},f=d.options.autoClearEmptyNode;d.undoManger=new function(){this.list=[];this.index=0;this.hasRedo=this.hasUndo=!1;this.undo=function(){if(this.hasUndo)if(this.list[this.index-1]||1!=this.list.length){for(;this.list[this.index].content==this.list[this.index-1].content;)if(this.index--,0==this.index)return this.restore(0);this.restore(--this.index)}else this.reset()};this.redo=function(){if(this.hasRedo){for(;this.list[this.index].content==
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     this.list[this.index+1].content;)if(this.index++,this.index==this.list.length-1)return this.restore(this.index);this.restore(++this.index)}};this.restore=function(){var r=this.editor,q=this.list[this.index],t=UE.htmlparser(q.content.replace(g,""));r.options.autoClearEmptyNode=!1;r.filterInputRule(t);r.options.autoClearEmptyNode=f;r.document.body.innerHTML=t.toHtml();r.fireEvent("afterscencerestore");B.ie&&x.each(m.getElementsByTagName(r.document,"td th caption p"),function(w){m.isEmptyNode(w)&&m.fillNode(r.document,
        w)});try{var u=(new ja.Range(r.document)).moveToAddress(q.address);u.select(e[u.startContainer.nodeName.toLowerCase()])}catch(w){}this.update();this.clearKey();r.fireEvent("reset",!0)};this.getScene=function(){var r=this.editor,q=r.selection.getRange().createAddress(!1,!0);r.fireEvent("beforegetscene");var t=UE.htmlparser(r.body.innerHTML);r.options.autoClearEmptyNode=!1;r.filterOutputRule(t);r.options.autoClearEmptyNode=f;t=t.toHtml();r.fireEvent("aftergetscene");return{address:q,content:t}};this.save=
        function(r,q){clearTimeout(b);q=this.getScene(q);var t=this.list[this.index];t&&t.content!=q.content&&d.trigger("contentchange");var u;if(u=t&&t.content==q.content)r?r=1:(r=t.address,t=q.address,r=r.collapsed!=t.collapsed?0:k(r.startAddress,t.startAddress)&&k(r.endAddress,t.endAddress)?1:0),u=r;u||(this.list=this.list.slice(0,this.index+1),this.list.push(q),this.list.length>a&&this.list.shift(),this.index=this.list.length-1,this.clearKey(),this.update())};this.update=function(){this.hasRedo=!!this.list[this.index+
    1];this.hasUndo=!!this.list[this.index-1]};this.reset=function(){this.list=[];this.index=0;this.hasRedo=this.hasUndo=!1;this.clearKey()};this.clearKey=function(){n=0}};d.undoManger.editor=d;d.addListener("saveScene",function(){var r=Array.prototype.splice.call(arguments,1);this.undoManger.save.apply(this.undoManger,r)});d.addListener("reset",function(r,q){q||this.undoManger.reset()});d.commands.redo=d.commands.undo={execCommand:function(r){this.undoManger[r]()},queryCommandState:function(r){return this.undoManger["has"+
        ("undo"==r.toLowerCase()?"Undo":"Redo")]?0:-1},notNeedUndo:1};var h={16:1,17:1,18:1,37:1,38:1,39:1,40:1},n=0,l=!1;d.addListener("ready",function(){m.on(this.body,"compositionstart",function(){l=!0});m.on(this.body,"compositionend",function(){l=!1})});d.addshortcutkey({Undo:"ctrl+90",Redo:"ctrl+89"});var p=!0;d.addListener("keydown",function(r,q){var t=this;if(!(h[q.keyCode||q.which]||q.ctrlKey||q.metaKey||q.shiftKey||q.altKey)){var u=function(w){w.undoManger.save(!1,!0);w.fireEvent("selectionchange")};
        l||(t.selection.getRange().collapsed?(0==t.undoManger.list.length&&t.undoManger.save(!0),clearTimeout(b),b=setTimeout(function(){if(l)var w=setInterval(function(){l||(u(t),clearInterval(w))},300);else u(t)},200),n++,n>=c&&u(t)):(t.undoManger.save(!1,!0),p=!1))}});d.addListener("keyup",function(r,q){h[q.keyCode||q.which]||q.ctrlKey||q.metaKey||q.shiftKey||q.altKey||l||p||(this.undoManger.save(!1,!0),p=!0)});d.stopCmdUndo=function(){d.__hasEnterExecCommand=!0};d.startCmdUndo=function(){d.__hasEnterExecCommand=
        !1}};UE.plugin.register("copy",function(){function k(){ZeroClipboard.config({debug:!1,swfPath:b.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.swf"});var d=b.zeroclipboard=new ZeroClipboard;d.on("copy",function(a){a=a.client;var c=b.selection.getRange(),g=document.createElement("div");g.appendChild(c.cloneContents());a.setText(g.innerText||g.textContent);a.setHtml(g.innerHTML);c.select()});d.on("mouseover mouseout",function(a){var c=a.target;"mouseover"==a.type?m.addClass(c,"edui-state-hover"):
        "mouseout"==a.type&&m.removeClasses(c,"edui-state-hover")});d.on("wrongflash noflash",function(){ZeroClipboard.destroy()})}var b=this;return{bindEvents:{ready:function(){B.ie||(window.ZeroClipboard?k():x.loadFile(document,{src:b.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.js",tag:"script",type:"text/javascript",defer:"defer"},function(){k()}))}},commands:{copy:{execCommand:function(d){b.document.execCommand("copy")||alert(b.getLang("copymsg"))}}}}});UE.plugins.paste=function(){function k(f){var h=
        this.document;if(!h.getElementById("baidu_pastebin")){var n=this.selection.getRange(),l=n.createBookmark(),p=h.createElement("div");p.id="baidu_pastebin";B.webkit&&p.appendChild(h.createTextNode(m.fillChar+m.fillChar));h.body.appendChild(p);l.start.style.display="";p.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:"+m.getXY(l.start).y+"px";n.selectNodeContents(p).select(!0);setTimeout(function(){if(B.webkit)for(var r=0,q=h.querySelectorAll("#baidu_pastebin"),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     t;t=q[r++];)if(m.isEmptyNode(t))m.remove(t);else{p=t;break}try{p.parentNode.removeChild(p)}catch(u){}n.moveToBookmark(l).select(!0);f(p)},0)}}function b(f){return f.replace(/<(\/?)([\w\-]+)([^>]*)>/gi,function(h,n,l,p){l=l.toLowerCase();if({img:1}[l])return h;p=p.replace(/([\w\-]*?)\s*=\s*(("([^"]*)")|('([^']*)')|([^\s>]+))/gi,function(r,q,t){return{src:1,href:1,name:1}[q.toLowerCase()]?q+"="+t+" ":""});return{span:1,div:1}[l]?"":"<"+n+l+" "+x.trim(p)+">"})}function d(f){if(f.firstChild){var h=m.getElementsByTagName(f,
        "span");var n=0;for(var l;l=h[n++];)"_baidu_cut_start"!=l.id&&"_baidu_cut_end"!=l.id||m.remove(l);if(B.webkit){l=f.querySelectorAll("div br");for(n=0;h=l[n++];)h=h.parentNode,"DIV"==h.tagName&&1==h.childNodes.length&&(h.innerHTML="<p><br/></p>",m.remove(h));h=f.querySelectorAll("#baidu_pastebin");for(n=0;l=h[n++];){var p=a.document.createElement("p");for(l.parentNode.insertBefore(p,l);l.firstChild;)p.appendChild(l.firstChild);m.remove(l)}l=f.querySelectorAll("meta");for(n=0;h=l[n++];)m.remove(h);
        l=f.querySelectorAll("br");for(n=0;h=l[n++];)/^apple-/i.test(h.className)&&m.remove(h)}if(B.gecko)for(l=f.querySelectorAll("[_moz_dirty]"),n=0;h=l[n++];)h.removeAttribute("_moz_dirty");if(!B.ie)for(l=f.querySelectorAll("span.Apple-style-span"),n=0;h=l[n++];)m.remove(h,!0);n=f.innerHTML;n=UE.filterWord(n);f=UE.htmlparser(n);a.options.filterRules&&UE.filterNode(f,a.options.filterRules);a.filterInputRule(f);B.webkit&&((n=f.lastChild())&&"element"==n.type&&"br"==n.tagName&&f.removeChild(n),x.each(a.body.querySelectorAll("div"),
        function(r){m.isEmptyBlock(r)&&m.remove(r,!0)}));n={html:f.toHtml()};a.fireEvent("beforepaste",n,f);n.html&&(f=UE.htmlparser(n.html,!0),1===a.queryCommandState("pasteplain")?a.execCommand("insertHtml",UE.filterNode(f,a.options.filterTxtRules).toHtml(),!0):(UE.filterNode(f,a.options.filterTxtRules),c=f.toHtml(),g=n.html,e=a.selection.getRange().createAddress(!0),a.execCommand("insertHtml",!0===a.getOpt("retainOnlyLabelPasted")?b(g):g,!0)),a.fireEvent("afterpaste",n))}}var a=this;a.setOpt({retainOnlyLabelPasted:!1});
        var c,g,e;a.addListener("pasteTransfer",function(f,h){if(e&&c&&g&&c!=g){f=a.selection.getRange();f.moveToAddress(e,!0);if(!f.collapsed){for(;!m.isBody(f.startContainer);){var n=f.startContainer;if(1==n.nodeType){n=n.childNodes[f.startOffset];if(!n){f.setStartBefore(f.startContainer);continue}(n=n.previousSibling)&&3==n.nodeType&&(new RegExp("^[\n\r\t "+m.fillChar+"]*$")).test(n.nodeValue)&&f.setStartBefore(n)}if(0==f.startOffset)f.setStartBefore(f.startContainer);else break}for(;!m.isBody(f.endContainer);){n=
            f.endContainer;if(1==n.nodeType){n=n.childNodes[f.endOffset];if(!n){f.setEndAfter(f.endContainer);continue}(n=n.nextSibling)&&3==n.nodeType&&(new RegExp("^[\n\r\t"+m.fillChar+"]*$")).test(n.nodeValue)&&f.setEndAfter(n)}if(f.endOffset==f.endContainer[3==f.endContainer.nodeType?"nodeValue":"childNodes"].length)f.setEndAfter(f.endContainer);else break}}f.deleteContents();f.select(!0);a.__hasEnterExecCommand=!0;f=g;2===h?f=b(f):h&&(f=c);a.execCommand("inserthtml",f,!0);a.__hasEnterExecCommand=!1;for(h=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     a.selection.getRange();!m.isBody(h.startContainer)&&!h.startOffset&&h.startContainer[3==h.startContainer.nodeType?"nodeValue":"childNodes"].length;)h.setStartBefore(h.startContainer);h=h.createAddress(!0);e.endAddress=h.startAddress}});a.addListener("ready",function(){m.on(a.body,"cut",function(){!a.selection.getRange().collapsed&&a.undoManger&&a.undoManger.save()});m.on(a.body,B.ie||B.opera?"keydown":"paste",function(f){(!B.ie&&!B.opera||(f.ctrlKey||f.metaKey)&&"86"==f.keyCode)&&k.call(a,function(h){d(h)})})});
        a.commands.paste={execCommand:function(f){B.ie?(k.call(a,function(h){d(h)}),a.document.execCommand("paste")):alert(a.getLang("pastemsg"))}}};UE.plugins.pasteplain=function(){this.setOpt({pasteplain:!1,filterTxtRules:function(){function b(a){a.tagName="p";a.setStyle()}function d(a){a.parentNode.removeChild(a,!0)}return{"-":"script style object iframe embed input select",p:{$:{}},br:{$:{}},div:function(a){for(var c,g=UE.uNode.createElement("p");c=a.firstChild();)"text"!=c.type&&UE.dom.dtd.$block[c.tagName]?
                g.firstChild()?(a.parentNode.insertBefore(g,a),g=UE.uNode.createElement("p")):a.parentNode.insertBefore(c,a):g.appendChild(c);g.firstChild()&&a.parentNode.insertBefore(g,a);a.parentNode.removeChild(a)},ol:d,ul:d,dl:d,dt:d,dd:d,li:d,caption:b,th:b,tr:b,h1:b,h2:b,h3:b,h4:b,h5:b,h6:b,td:function(a){a.innerText()&&a.parentNode.insertAfter(UE.uNode.createText(" &nbsp; &nbsp;"),a);a.parentNode.removeChild(a,a.innerText())}}}()});var k=this.options.pasteplain;this.commands.pasteplain={queryCommandState:function(){return k?
            1:0},execCommand:function(){k=!k|0},notNeedUndo:1}};UE.plugins.list=function(){function k(q){var t=[],u;for(u in q)t.push(u);return t}function b(q){var t=q.className;return m.hasClass(q,/custom_/)?t.match(/custom_(\w+)/)[1]:m.getStyle(q,"list-style-type")}function d(q,t){x.each(m.getElementsByTagName(q,"ol ul"),function(u){if(m.inDoc(u,q)){var w=u.parentNode;if(w.tagName==u.tagName){var v=b(u)||("OL"==u.tagName?"decimal":"disc"),y=b(w)||("OL"==w.tagName?"decimal":"disc");v==y&&(v=x.indexOf(l[u.tagName],
        v),v=v+1==l[u.tagName].length?0:v+1,c(u,l[u.tagName][v]))}var A=0;v=2;m.hasClass(u,/custom_/)?/[ou]l/i.test(w.tagName)&&m.hasClass(w,/custom_/)||(v=1):/[ou]l/i.test(w.tagName)&&m.hasClass(w,/custom_/)&&(v=3);(w=m.getStyle(u,"list-style-type"))&&(u.style.cssText="list-style-type:"+w);u.className=x.trim(u.className.replace(/list-paddingleft-\w+/,""))+" list-paddingleft-"+v;x.each(m.getElementsByTagName(u,"li"),function(E){E.style.cssText&&(E.style.cssText="");if(!E.firstChild)m.remove(E);else if(E.parentNode===
        u){A++;if(m.hasClass(u,/custom_/)){var I=1,H=b(u);if("OL"==u.tagName){if(H)switch(H){case "cn":case "cn1":case "cn2":10<A&&(0==A%10||10<A&&20>A)?I=2:20<A&&(I=3);break;case "num2":9<A&&(I=2)}E.className="list-"+n[H]+A+" list-"+H+"-paddingleft-"+I}else E.className="list-"+n[H]+" list-"+H+"-paddingleft"}else E.className=E.className.replace(/list-[\w\-]+/gi,"");I=E.getAttribute("class");null===I||I.replace(/\s/g,"")||m.removeAttributes(E,"class")}});!t&&a(u,u.tagName.toLowerCase(),b(u)||m.getStyle(u,
        "list-style-type"),!0)}})}function a(q,t,u,w){var v=q.nextSibling;v&&1==v.nodeType&&v.tagName.toLowerCase()==t&&(b(v)||m.getStyle(v,"list-style-type")||("ol"==t?"decimal":"disc"))==u&&(m.moveChild(v,q),0==v.childNodes.length&&m.remove(v));v&&m.isFillChar(v)&&m.remove(v);(v=q.previousSibling)&&1==v.nodeType&&v.tagName.toLowerCase()==t&&(b(v)||m.getStyle(v,"list-style-type")||("ol"==t?"decimal":"disc"))==u&&m.moveChild(q,v);v&&m.isFillChar(v)&&m.remove(v);!w&&m.isEmptyBlock(q)&&m.remove(q);b(q)&&d(q.ownerDocument,
        !0)}function c(q,t){n[t]&&(q.className="custom_"+t);try{m.setStyle(q,"list-style-type",t)}catch(u){}}function g(q){var t=q.previousSibling;t&&m.isEmptyBlock(t)&&m.remove(t);(t=q.nextSibling)&&m.isEmptyBlock(t)&&m.remove(t)}function e(q){for(;q&&!m.isBody(q);){if("TABLE"==q.nodeName)return null;if("LI"==q.nodeName)return q;q=q.parentNode}}var f=this,h={TD:1,PRE:1,BLOCKQUOTE:1},n={cn:"cn-1-",cn1:"cn-2-",cn2:"cn-3-",num:"num-1-",num1:"num-2-",num2:"num-3-",dash:"dash",dot:"dot"};f.setOpt({autoTransWordToList:!1,
        insertorderedlist:{num:"",num1:"",num2:"",cn:"",cn1:"",cn2:"",decimal:"","lower-alpha":"","lower-roman":"","upper-alpha":"","upper-roman":""},insertunorderedlist:{circle:"",disc:"",square:"",dash:"",dot:""},listDefaultPaddingLeft:"30",listiconpath:"http://bs.baidu.com/listicon/",maxListLevel:-1,disablePInList:!1});var l={OL:k(f.options.insertorderedlist),UL:k(f.options.insertunorderedlist)},p=f.options.listiconpath,r;for(r in n)f.options.insertorderedlist.hasOwnProperty(r)||f.options.insertunorderedlist.hasOwnProperty(r)||
    delete n[r];f.ready(function(){var q=[],t;for(t in n){if("dash"==t||"dot"==t)q.push("li.list-"+n[t]+"{background-image:url("+p+n[t]+".gif)}"),q.push("ul.custom_"+t+"{list-style:none;}ul.custom_"+t+" li{background-position:0 3px;background-repeat:no-repeat}");else{for(var u=0;99>u;u++)q.push("li.list-"+n[t]+u+"{background-image:url("+p+"list-"+n[t]+u+".gif)}");q.push("ol.custom_"+t+"{list-style:none;}ol.custom_"+t+" li{background-position:0 3px;background-repeat:no-repeat}")}switch(t){case "cn":q.push("li.list-"+
        t+"-paddingleft-1{padding-left:25px}");q.push("li.list-"+t+"-paddingleft-2{padding-left:40px}");q.push("li.list-"+t+"-paddingleft-3{padding-left:55px}");break;case "cn1":q.push("li.list-"+t+"-paddingleft-1{padding-left:30px}");q.push("li.list-"+t+"-paddingleft-2{padding-left:40px}");q.push("li.list-"+t+"-paddingleft-3{padding-left:55px}");break;case "cn2":q.push("li.list-"+t+"-paddingleft-1{padding-left:40px}");q.push("li.list-"+t+"-paddingleft-2{padding-left:55px}");q.push("li.list-"+t+"-paddingleft-3{padding-left:68px}");
        break;case "num":case "num1":q.push("li.list-"+t+"-paddingleft-1{padding-left:25px}");break;case "num2":q.push("li.list-"+t+"-paddingleft-1{padding-left:35px}");q.push("li.list-"+t+"-paddingleft-2{padding-left:40px}");break;case "dash":q.push("li.list-"+t+"-paddingleft{padding-left:35px}");break;case "dot":q.push("li.list-"+t+"-paddingleft{padding-left:20px}")}}q.push(".list-paddingleft-1{padding-left:0}");q.push(".list-paddingleft-2{padding-left:"+f.options.listDefaultPaddingLeft+"px}");q.push(".list-paddingleft-3{padding-left:"+
        2*f.options.listDefaultPaddingLeft+"px}");x.cssRule("list","ol,ul{margin:0;pading:0;"+(B.ie?"":"width:95%")+"}li{clear:both;}"+q.join("\n"),f.document)});f.ready(function(){m.on(f.body,"cut",function(){setTimeout(function(){var q=f.selection.getRange(),t;if(!q.collapsed&&(t=m.findParentByTagName(q.startContainer,"li",!0))&&!t.nextSibling&&m.isEmptyBlock(t)){t=t.parentNode;var u;(u=t.previousSibling)?(m.remove(t),q.setStartAtLast(u).collapse(!0)):(u=t.nextSibling)?(m.remove(t),q.setStartAtFirst(u).collapse(!0)):
        (u=f.document.createElement("p"),m.fillNode(f.document,u),t.parentNode.insertBefore(u,t),m.remove(t),q.setStart(u,0).collapse(!0));q.select(!0)}})})});f.addListener("beforepaste",function(q,t){var u=this.selection.getRange(),w=UE.htmlparser(t.html,!0);if(u=m.findParentByTagName(u.startContainer,"li",!0)){var v=u.parentNode;x.each(w.getNodesByTagName("OL"==v.tagName?"ul":"ol"),function(y){y.tagName=v.tagName;y.setAttr();if(y.parentNode===w)q=b(v)||("OL"==v.tagName?"decimal":"disc");else{var A=y.parentNode.getAttr("class");
        (q=A&&/custom_/.test(A)?A.match(/custom_(\w+)/)[1]:y.parentNode.getStyle("list-style-type"))||(q="OL"==v.tagName?"decimal":"disc")}A=x.indexOf(l[v.tagName],q);y.parentNode!==w&&(A=A+1==l[v.tagName].length?0:A+1);A=l[v.tagName][A];n[A]?y.setAttr("class","custom_"+A):y.setStyle("list-style-type",A)})}t.html=w.toHtml()});!0===f.getOpt("disablePInList")&&f.addOutputRule(function(q){x.each(q.getNodesByTagName("li"),function(t){var u=[],w=0;x.each(t.children,function(v){if("p"==v.tagName){for(var y;y=v.children.pop();)u.splice(w,
        0,y),y.parentNode=t,lastNode=y;y=u[u.length-1];y&&"element"==y.type&&"br"==y.tagName||(v=UE.uNode.createElement("br"),v.parentNode=t,u.push(v));w=u.length}});u.length&&(t.children=u)})});f.addInputRule(function(q){x.each(q.getNodesByTagName("li"),function(v){for(var y=UE.uNode.createElement("p"),A=0,E;E=v.children[A];)"text"==E.type||M.p[E.tagName]?y.appendChild(E):y.firstChild()?(v.insertBefore(y,E),y=UE.uNode.createElement("p"),A+=2):A++;(y.firstChild()&&!y.parentNode||!v.firstChild())&&v.appendChild(y);
        y.firstChild()||y.innerHTML(B.ie?"&nbsp;":"<br/>");v=v.firstChild();(y=v.lastChild())&&"text"==y.type&&/^\s*$/.test(y.data)&&v.removeChild(y)});if(f.options.autoTransWordToList){var t=function(v,y){if((y=y.firstChild())&&"element"==y.type&&"span"==y.tagName&&/Wingdings|Symbol/.test(y.getStyle("font-family"))){for(var A in w)if(w[A]==y.data)return A;return"disc"}for(A in u)if(u[A].test(v))return A},u={num1:/^\d+\)/,decimal:/^\d+\./,"lower-alpha":/^[a-z]+\)/,"upper-alpha":/^[A-Z]+\./,cn:/^[\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+[\u3001]/,
        cn2:/^\([\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+\)/},w={square:"n"};x.each(q.getNodesByTagName("p"),function(v){if("MsoListParagraph"==v.getAttr("class")){v.setStyle("margin","");v.setStyle("margin-left","");v.setAttr("class","");var y,A,E=v;if("li"!=v.parentNode.tagName&&(A=t(v.innerText(),v))){var I=UE.uNode.createElement(f.options.insertorderedlist.hasOwnProperty(A)?"ol":"ul");for(n[A]?I.setAttr("class","custom_"+A):I.setStyle("list-style-type",A);v&&"li"!=v.parentNode.tagName&&
    t(v.innerText(),v);){(y=v.nextSibling())||v.parentNode.insertBefore(I,v);var H=I,T=A;if("ol"==H.tagName)if(B.ie){var L=v.firstChild();"element"==L.type&&"span"==L.tagName&&u[T].test(L.innerText())&&v.removeChild(L)}else v.innerHTML(v.innerHTML().replace(u[T],""));else v.removeChild(v.firstChild());T=UE.uNode.createElement("li");T.appendChild(v);H.appendChild(T);v=y}!I.parentNode&&v&&v.parentNode&&v.parentNode.insertBefore(I,v)}(y=E.firstChild())&&"element"==y.type&&"span"==y.tagName&&/^\s*(&nbsp;)+\s*$/.test(y.innerText())&&
    y.parentNode.removeChild(y)}})}});f.addListener("contentchange",function(){d(f.document)});f.addListener("keydown",function(q,t){function u(){t.preventDefault?t.preventDefault():t.returnValue=!1;f.fireEvent("contentchange");f.undoManger&&f.undoManger.save()}function w(T,L){for(;T&&!m.isBody(T)&&!L(T);){if(1==T.nodeType&&/[ou]l/i.test(T.tagName))return T;T=T.parentNode}return null}q=t.keyCode||t.which;if(13==q&&!t.shiftKey){var v=f.selection.getRange(),y=m.findParent(v.startContainer,function(T){return m.isBlockElm(T)},
        !0),A=m.findParentByTagName(v.startContainer,"li",!0);y&&"PRE"!=y.tagName&&!A&&(A=y.innerHTML.replace(new RegExp(m.fillChar,"g"),""),/^\s*1\s*\.[^\d]/.test(A)&&(y.innerHTML=A.replace(/^\s*1\s*\./,""),v.setStartAtLast(y).collapse(!0).select(),f.__hasEnterExecCommand=!0,f.execCommand("insertorderedlist"),f.__hasEnterExecCommand=!1));v=f.selection.getRange();y=w(v.startContainer,function(T){return"TABLE"==T.tagName});A=v.collapsed?y:w(v.endContainer,function(T){return"TABLE"==T.tagName});if(y&&A&&y===
        A){if(!v.collapsed)if(y=m.findParentByTagName(v.startContainer,"li",!0),A=m.findParentByTagName(v.endContainer,"li",!0),y&&A&&y===A){if(v.deleteContents(),(A=m.findParentByTagName(v.startContainer,"li",!0))&&m.isEmptyBlock(A)){H=A.previousSibling;next=A.nextSibling;y=f.document.createElement("p");m.fillNode(f.document,y);I=A.parentNode;H&&next?(v.setStart(next,0).collapse(!0).select(!0),m.remove(A)):((H||next)&&H?A.parentNode.parentNode.insertBefore(y,I.nextSibling):I.parentNode.insertBefore(y,I),
        m.remove(A),I.firstChild||m.remove(I),v.setStart(y,0).setCursor());u();return}}else{y=v.cloneRange();var E=y.collapse(!1).createBookmark();v.deleteContents();y.moveToBookmark(E);A=m.findParentByTagName(y.startContainer,"li",!0);g(A);y.select();u();return}if(A=m.findParentByTagName(v.startContainer,"li",!0)){if(m.isEmptyBlock(A)){E=v.createBookmark();var I=A.parentNode;A!==I.lastChild?(m.breakParent(A,I),g(A)):(I.parentNode.insertBefore(A,I.nextSibling),m.isEmptyNode(I)&&m.remove(I));if(!M.$list[A.parentNode.tagName])if(m.isBlockElm(A.firstChild))m.remove(A,
        !0);else{y=f.document.createElement("p");for(A.parentNode.insertBefore(y,A);A.firstChild;)y.appendChild(A.firstChild);m.remove(A)}v.moveToBookmark(E).select()}else{y=A.firstChild;if(!y||!m.isBlockElm(y)){y=f.document.createElement("p");for(!A.firstChild&&m.fillNode(f.document,y);A.firstChild;)y.appendChild(A.firstChild);A.appendChild(y)}E=f.document.createElement("span");v.insertNode(E);m.breakParent(E,A);H=E.nextSibling;y=H.firstChild;y||(y=f.document.createElement("p"),m.fillNode(f.document,y),
        H.appendChild(y));m.isEmptyNode(y)&&(y.innerHTML="",m.fillNode(f.document,y));v.setStart(y,0).collapse(!0).shrinkBoundary().select();m.remove(E);var H=H.previousSibling;H&&m.isEmptyBlock(H)&&(H.innerHTML="<p></p>",m.fillNode(f.document,H.firstChild))}u()}}}if(8==q&&(v=f.selection.getRange(),v.collapsed&&m.isStartInblock(v)&&(y=v.cloneRange().trimBoundary(),(A=m.findParentByTagName(v.startContainer,"li",!0))&&m.isStartInblock(y))))if((y=m.findParentByTagName(v.startContainer,"p",!0))&&y!==A.firstChild)I=
        m.findParentByTagName(y,["ol","ul"]),m.breakParent(y,I),g(y),f.fireEvent("contentchange"),v.setStart(y,0).setCursor(!1,!0),f.fireEvent("saveScene"),m.preventDefault(t);else if(A&&(H=A.previousSibling)){if(46!=q||!A.childNodes.length){M.$list[H.tagName]&&(H=H.lastChild);f.undoManger&&f.undoManger.save();y=A.firstChild;if(m.isBlockElm(y))if(m.isEmptyNode(y))for(H.appendChild(y),v.setStart(y,0).setCursor(!1,!0);A.firstChild;)H.appendChild(A.firstChild);else E=f.document.createElement("span"),v.insertNode(E),
    m.isEmptyBlock(H)&&(H.innerHTML=""),m.moveChild(A,H),v.setStartBefore(E).collapse(!0).select(!0),m.remove(E);else if(m.isEmptyNode(A))y=f.document.createElement("p"),H.appendChild(y),v.setStart(y,0).setCursor();else for(v.setEnd(H,H.childNodes.length).collapse().select(!0);A.firstChild;)H.appendChild(A.firstChild);m.remove(A);f.fireEvent("contentchange");f.fireEvent("saveScene");m.preventDefault(t)}}else if(A&&!A.previousSibling){I=A.parentNode;E=v.createBookmark();if(m.isTagNode(I.parentNode,"ol ul"))I.parentNode.insertBefore(A,
        I);else{for(;A.firstChild;)I.parentNode.insertBefore(A.firstChild,I);m.remove(A)}m.isEmptyNode(I)&&m.remove(I);v.moveToBookmark(E).setCursor(!1,!0);f.fireEvent("contentchange");f.fireEvent("saveScene");m.preventDefault(t)}});f.addListener("keyup",function(q,t){if(8==(t.keyCode||t.which)){q=f.selection.getRange();var u;(u=m.findParentByTagName(q.startContainer,["ol","ul"],!0))&&a(u,u.tagName.toLowerCase(),b(u)||m.getComputedStyle(u,"list-style-type"),!0)}});f.addListener("tabkeydown",function(){function q(H){if(-1!=
        f.options.maxListLevel){H=H.parentNode;for(var T=0;/[ou]l/i.test(H.tagName);)T++,H=H.parentNode;if(T>=f.options.maxListLevel)return!0}}var t=f.selection.getRange(),u=m.findParentByTagName(t.startContainer,"li",!0);if(u)if(t.collapsed){if(q(u))return!0;var w=u.parentNode,v=f.document.createElement(w.tagName),y=x.indexOf(l[v.tagName],b(w)||m.getComputedStyle(w,"list-style-type"));y=y+1==l[v.tagName].length?0:y+1;y=l[v.tagName][y];c(v,y);if(m.isStartInblock(t)){f.fireEvent("saveScene");var A=t.createBookmark();
        w.insertBefore(v,u);v.appendChild(u);a(v,v.tagName.toLowerCase(),y);f.fireEvent("contentchange");t.moveToBookmark(A).select(!0);return!0}}else{f.fireEvent("saveScene");A=t.createBookmark();w=0;v=m.findParents(u);for(var E;E=v[w++];)if(m.isTagNode(E,"ol ul")){var I=E;break}E=u;if(A.end)for(;E&&!(m.getPosition(E,A.end)&m.POSITION_FOLLOWING);)if(q(E))E=m.getNextDomNode(E,!1,null,function(H){return H!==I});else{w=E.parentNode;v=f.document.createElement(w.tagName);y=x.indexOf(l[v.tagName],b(w)||m.getComputedStyle(w,
        "list-style-type"));y=l[v.tagName][y+1==l[v.tagName].length?0:y+1];c(v,y);for(w.insertBefore(v,E);E&&!(m.getPosition(E,A.end)&m.POSITION_FOLLOWING);){u=E.nextSibling;v.appendChild(E);if(!u||m.isTagNode(u,"ol ul")){if(u)for(;(u=u.firstChild)&&"LI"!=u.tagName;);else u=m.getNextDomNode(E,!1,null,function(H){return H!==I});break}E=u}a(v,v.tagName.toLowerCase(),y);E=u}f.fireEvent("contentchange");t.moveToBookmark(A).select();return!0}});f.commands.insertorderedlist=f.commands.insertunorderedlist={execCommand:function(q,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              t){t||(t="insertorderedlist"==q.toLowerCase()?"decimal":"disc");var u=this.selection.getRange(),w=function(ca){return 1==ca.nodeType?"br"!=ca.tagName.toLowerCase():!m.isWhitespace(ca)},v="insertorderedlist"==q.toLowerCase()?"ol":"ul",y=this.document.createDocumentFragment();u.adjustmentBoundary().shrinkBoundary();var A=u.createBookmark(!0),E=e(this.document.getElementById(A.start)),I=0,H=e(this.document.getElementById(A.end)),T=0,L,ba;if(E||H){E&&(L=E.parentNode);A.end||(H=E);H&&(ba=H.parentNode);
            if(L===ba){for(;E!==H;){var S=E;E=E.nextSibling;if(!m.isBlockElm(S.firstChild)){for(w=this.document.createElement("p");S.firstChild;)w.appendChild(S.firstChild);S.appendChild(w)}y.appendChild(S)}S=this.document.createElement("span");L.insertBefore(S,H);if(!m.isBlockElm(H.firstChild)){for(w=this.document.createElement("p");H.firstChild;)w.appendChild(H.firstChild);H.appendChild(w)}y.appendChild(H);m.breakParent(S,L);m.isEmptyNode(S.previousSibling)&&m.remove(S.previousSibling);m.isEmptyNode(S.nextSibling)&&
            m.remove(S.nextSibling);w=b(L)||m.getComputedStyle(L,"list-style-type")||("insertorderedlist"==q.toLowerCase()?"decimal":"disc");if(L.tagName.toLowerCase()==v&&w==t){H=0;for(H=this.document.createDocumentFragment();w=y.firstChild;)if(m.isTagNode(w,"ol ul"))H.appendChild(w);else for(;w.firstChild;)H.appendChild(w.firstChild),m.remove(w);S.parentNode.insertBefore(H,S)}else{var Y=this.document.createElement(v);c(Y,t);Y.appendChild(y);S.parentNode.insertBefore(Y,S)}m.remove(S);Y&&a(Y,v,t);u.moveToBookmark(A).select();
                return}if(E){for(;E;){S=E.nextSibling;if(m.isTagNode(E,"ol ul"))y.appendChild(E);else{Y=this.document.createDocumentFragment();for(q=0;E.firstChild;)m.isBlockElm(E.firstChild)&&(q=1),Y.appendChild(E.firstChild);q?y.appendChild(Y):(q=this.document.createElement("p"),q.appendChild(Y),y.appendChild(q));m.remove(E)}E=S}L.parentNode.insertBefore(y,L.nextSibling);m.isEmptyNode(L)?(u.setStartBefore(L),m.remove(L)):u.setStartAfter(L);I=1}if(H&&m.inDoc(ba,this.document)){for(E=ba.firstChild;E&&E!==H;){S=E.nextSibling;
                if(m.isTagNode(E,"ol ul"))y.appendChild(E);else{Y=this.document.createDocumentFragment();for(q=0;E.firstChild;)m.isBlockElm(E.firstChild)&&(q=1),Y.appendChild(E.firstChild);q?y.appendChild(Y):(q=this.document.createElement("p"),q.appendChild(Y),y.appendChild(q));m.remove(E)}E=S}S=m.createElement(this.document,"div",{tmpDiv:1});m.moveChild(H,S);y.appendChild(S);m.remove(H);ba.parentNode.insertBefore(y,ba);u.setEndBefore(ba);m.isEmptyNode(ba)&&m.remove(ba);T=1}}I||u.setStartBefore(this.document.getElementById(A.start));
            A.end&&!T&&u.setEndAfter(this.document.getElementById(A.end));u.enlarge(!0,function(ca){return h[ca.tagName]});y=this.document.createDocumentFragment();H=u.createBookmark();L=m.getNextDomNode(H.start,!1,w);Y=u.cloneRange();for(I=m.isBlockElm;L&&L!==H.end&&m.getPosition(L,H.end)&m.POSITION_PRECEDING;)if(3==L.nodeType||M.li[L.tagName])if(1==L.nodeType&&M.$list[L.tagName]){for(;L.firstChild;)y.appendChild(L.firstChild);E=m.getNextDomNode(L,!1,w);m.remove(L);L=E}else{E=L;for(Y.setStartBefore(L);L&&L!==
            H.end&&(!I(L)||m.isBookmarkNode(L));)E=L,L=m.getNextDomNode(L,!1,null,function(ca){return!h[ca.tagName]});L&&I(L)&&(S=m.getNextDomNode(E,!1,w))&&m.isBookmarkNode(S)&&(L=m.getNextDomNode(S,!1,w),E=S);Y.setEndAfter(E);L=m.getNextDomNode(E,!1,w);S=u.document.createElement("li");S.appendChild(Y.extractContents());if(m.isEmptyNode(S)){for(E=u.document.createElement("p");S.firstChild;)E.appendChild(S.firstChild);S.appendChild(E)}y.appendChild(S)}else L=m.getNextDomNode(L,!0,w);u.moveToBookmark(H).collapse(!0);
            Y=this.document.createElement(v);c(Y,t);Y.appendChild(y);u.insertNode(Y);a(Y,v,t);H=0;for(t=m.getElementsByTagName(Y,"div");w=t[H++];)w.getAttribute("tmpDiv")&&m.remove(w,!0);u.moveToBookmark(A).select()},queryCommandState:function(q){q="insertorderedlist"==q.toLowerCase()?"ol":"ul";for(var t=this.selection.getStartElementPath(),u=0,w;(w=t[u++])&&"TABLE"!=w.nodeName;)if(q==w.nodeName.toLowerCase())return 1;return 0},queryCommandValue:function(q){q="insertorderedlist"==q.toLowerCase()?"ol":"ul";for(var t=
            this.selection.getStartElementPath(),u,w=0,v;v=t[w++];){if("TABLE"==v.nodeName){u=null;break}if(q==v.nodeName.toLowerCase()){u=v;break}}return u?b(u)||m.getComputedStyle(u,"list-style-type"):null}}};(function(){var k={textarea:function(b,d){var a=d.ownerDocument.createElement("textarea");a.style.cssText="position:absolute;resize:none;width:100%;height:100%;border:0;padding:0;margin:0;overflow-y:auto;";B.ie&&8>B.version&&(a.style.width=d.offsetWidth+"px",a.style.height=d.offsetHeight+"px",d.onresize=
            function(){a.style.width=d.offsetWidth+"px";a.style.height=d.offsetHeight+"px"});d.appendChild(a);return{setContent:function(c){a.value=c},getContent:function(){return a.value},select:function(){if(B.ie){var c=a.createTextRange();c.collapse(!0);c.select()}else a.setSelectionRange(0,0),a.focus()},dispose:function(){d.removeChild(a);d=a=d.onresize=null}}},codemirror:function(b,d){var a=window.CodeMirror(d,{mode:"text/html",tabMode:"indent",lineNumbers:!0,lineWrapping:!0}),c=a.getWrapperElement();c.style.cssText=
            'position:absolute;left:0;top:0;width:100%;height:100%;font-family:consolas,"Courier new",monospace;font-size:13px;';a.getScrollerElement().style.cssText="position:absolute;left:0;top:0;width:100%;height:100%;";a.refresh();return{getCodeMirror:function(){return a},setContent:function(g){a.setValue(g)},getContent:function(){return a.getValue()},select:function(){a.focus()},dispose:function(){d.removeChild(c);a=c=null}}}};UE.plugins.source=function(){var b=this,d=this.options,a=!1,c,g;d.sourceEditor=
        B.ie?"textarea":d.sourceEditor||"codemirror";b.setOpt({sourceEditorFirst:!1});var e,f,h;b.commands.source={execCommand:function(){if(a=!a){h=b.selection.getRange().createAddress(!1,!0);b.undoManger&&b.undoManger.save(!0);B.gecko&&(b.body.contentEditable=!1);e=b.iframe.style.cssText;b.iframe.style.cssText+="position:absolute;left:-32768px;top:-32768px;";b.fireEvent("beforegetcontent");var l=UE.htmlparser(b.body.innerHTML);b.filterOutputRule(l);l.traversal(function(r){if("element"==r.type)switch(r.tagName){case "td":case "th":case "caption":r.children&&
        1==r.children.length&&"br"==r.firstChild().tagName&&r.removeChild(r.firstChild());break;case "pre":r.innerText(r.innerText().replace(/&nbsp;/g," "))}});b.fireEvent("aftergetcontent");l=l.toHtml(!0);c=k["codemirror"==d.sourceEditor&&window.CodeMirror?"codemirror":"textarea"](b,b.iframe.parentNode);c.setContent(l);g=b.setContent;b.setContent=function(r){r=UE.htmlparser(r);b.filterInputRule(r);r=r.toHtml();c.setContent(r)};setTimeout(function(){c.select();b.addListener("fullscreenchanged",function(){try{c.getCodeMirror().refresh()}catch(r){}})});
            f=b.getContent;b.getContent=function(){return c.getContent()||"<p>"+(B.ie?"":"<br/>")+"</p>"}}else if(b.iframe.style.cssText=e,l=c.getContent()||"<p>"+(B.ie?"":"<br/>")+"</p>",l=l.replace(/[\r\t\n ]*<\/?(\w+)\s*(?:[^>]*)>/g,function(r,q){return q&&!M.$inlineWithA[q.toLowerCase()]?r.replace(/(^[\n\r\t ]*)|([\n\r\t ]*$)/g,""):r.replace(/(^[\n\r\t]*)|([\n\r\t]*$)/g,"")}),b.setContent=g,b.setContent(l),c.dispose(),c=null,b.getContent=f,l=b.body.firstChild,l||(b.body.innerHTML="<p>"+(B.ie?"":"<br/>")+
            "</p>",l=b.body.firstChild),b.undoManger&&b.undoManger.save(!0),B.gecko){var p=document.createElement("input");p.style.cssText="position:absolute;left:0;top:-32768px";document.body.appendChild(p);b.body.contentEditable=!1;setTimeout(function(){m.setViewportOffset(p,{left:-32768,top:0});p.focus();setTimeout(function(){b.body.contentEditable=!0;b.selection.getRange().moveToAddress(h).select(!0);m.remove(p)})})}else try{b.selection.getRange().moveToAddress(h).select(!0)}catch(r){}this.fireEvent("sourcemodechanged",
            a)},queryCommandState:function(){return a|0},notNeedUndo:1};var n=b.queryCommandState;b.queryCommandState=function(l){l=l.toLowerCase();return a?l in{source:1,fullscreen:1}?1:-1:n.apply(this,arguments)};"codemirror"==d.sourceEditor&&b.addListener("ready",function(){x.loadFile(document,{src:d.codeMirrorJsUrl||d.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.js",tag:"script",type:"text/javascript",defer:"defer"},function(){d.sourceEditorFirst&&setTimeout(function(){b.execCommand("source")},0)});
        x.loadFile(document,{tag:"link",rel:"stylesheet",type:"text/css",href:d.codeMirrorCssUrl||d.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.css"})})}})();UE.plugins.enterkey=function(){var k,b=this,d=b.options.enterTag;b.addListener("keyup",function(a,c){if(13==(c.keyCode||c.which))if(a=b.selection.getRange(),c=a.startContainer,B.ie)b.fireEvent("saveScene",!0,!0);else{if(/h\d/i.test(k)){if(B.gecko){if(!m.findParentByTagName(c,"h1 h2 h3 h4 h5 h6 blockquote caption table".split(" "),!0)){b.document.execCommand("formatBlock",
        !1,"<p>");var g=1}}else if(1==c.nodeType){c=b.document.createTextNode("");var e;a.insertNode(c);if(e=m.findParentByTagName(c,"div",!0)){for(g=b.document.createElement("p");e.firstChild;)g.appendChild(e.firstChild);e.parentNode.insertBefore(g,e);m.remove(e);a.setStartBefore(c).setCursor();g=1}m.remove(c)}b.undoManger&&g&&b.undoManger.save()}B.opera&&a.select()}});b.addListener("keydown",function(a,c){if(13==(c.keyCode||c.which))if(b.fireEvent("beforeenterkeydown"))m.preventDefault(c);else{b.fireEvent("saveScene",
        !0,!0);k="";a=b.selection.getRange();if(!a.collapsed){var g=a.startContainer,e=a.endContainer;g=m.findParentByTagName(g,"td",!0);e=m.findParentByTagName(e,"td",!0);if(g&&e&&g!==e||!g&&e||g&&!e){c.preventDefault?c.preventDefault():c.returnValue=!1;return}}if("p"==d)B.ie||((g=m.findParentByTagName(a.startContainer,"ol ul p h1 h2 h3 h4 h5 h6 blockquote caption".split(" "),!0))||B.opera?(k=g.tagName,"p"==g.tagName.toLowerCase()&&B.gecko&&m.removeDirtyAttr(g)):(b.document.execCommand("formatBlock",!1,
        "<p>"),B.gecko&&(a=b.selection.getRange(),(g=m.findParentByTagName(a.startContainer,"p",!0))&&m.removeDirtyAttr(g))));else if(c.preventDefault?c.preventDefault():c.returnValue=!1,a.collapsed)c=a.document.createElement("br"),a.insertNode(c),c.parentNode.lastChild===c?(c.parentNode.insertBefore(c.cloneNode(!0),c),a.setStartBefore(c)):a.setStartAfter(c),a.setCursor();else if(a.deleteContents(),g=a.startContainer,1==g.nodeType&&(g=g.childNodes[a.startOffset])){for(;1==g.nodeType;){if(M.$empty[g.tagName])return a.setStartBefore(g).setCursor(),
    b.undoManger&&b.undoManger.save(),!1;if(!g.firstChild)return c=a.document.createElement("br"),g.appendChild(c),a.setStart(g,0).setCursor(),b.undoManger&&b.undoManger.save(),!1;g=g.firstChild}g===a.startContainer.childNodes[a.startOffset]?(c=a.document.createElement("br"),a.insertNode(c).setCursor()):a.setStart(g,0).setCursor()}else c=a.document.createElement("br"),a.insertNode(c).setStartAfter(c).setCursor()}})};UE.plugins.keystrokes=function(){var k=this,b=!0;k.addListener("keydown",function(d,a){d=
        a.keyCode||a.which;var c=k.selection.getRange();if(!(c.collapsed||a.ctrlKey||a.shiftKey||a.altKey||a.metaKey)&&(65<=d&&90>=d||48<=d&&57>=d||96<=d&&111>=d||{13:1,8:1,46:1}[d])){var g=c.startContainer;m.isFillChar(g)&&c.setStartBefore(g);g=c.endContainer;m.isFillChar(g)&&c.setEndAfter(g);c.txtToElmBoundary();c.endContainer&&1==c.endContainer.nodeType&&(g=c.endContainer.childNodes[c.endOffset])&&m.isBr(g)&&c.setEndAfter(g);if(0==c.startOffset&&(g=c.startContainer,m.isBoundaryNode(g,"firstChild")&&(g=
        c.endContainer,c.endOffset==(3==g.nodeType?g.nodeValue.length:g.childNodes.length)&&m.isBoundaryNode(g,"lastChild")))){k.fireEvent("saveScene");k.body.innerHTML="<p>"+(B.ie?"":"<br/>")+"</p>";c.setStart(k.body.firstChild,0).setCursor(!1,!0);k._selectionChange();return}}if(d==Ca.Backspace){c=k.selection.getRange();b=c.collapsed;if(k.fireEvent("delkeydown",a))return;if(c.collapsed&&c.inFillChar()){var e=c.startContainer;m.isFillChar(e)?(c.setStartBefore(e).shrinkBoundary(!0).collapse(!0),m.remove(e)):
        (e.nodeValue=e.nodeValue.replace(new RegExp("^"+m.fillChar),""),c.startOffset--,c.collapse(!0).select(!0))}if(e=c.getClosedNode()){k.fireEvent("saveScene");c.setStartBefore(e);m.remove(e);c.setCursor();k.fireEvent("saveScene");m.preventDefault(a);return}if(!B.ie){e=m.findParentByTagName(c.startContainer,"table",!0);var f=m.findParentByTagName(c.endContainer,"table",!0);if(e&&!f||!e&&f||e!==f){a.preventDefault();return}}}if(d==Ca.Tab){var h={ol:1,ul:1,table:1};if(k.fireEvent("tabkeydown",a)){m.preventDefault(a);
        return}c=k.selection.getRange();k.fireEvent("saveScene");g=0;var n="";e=k.options.tabSize||4;for(f=k.options.tabNode||"&nbsp;";g<e;g++)n+=f;g=k.document.createElement("span");g.innerHTML=n+m.fillChar;if(c.collapsed)c.insertNode(g.cloneNode(!0).firstChild).setCursor(!0);else if(n=function(p){return m.isBlockElm(p)&&!h[p.tagName.toLowerCase()]},e=m.findParent(c.startContainer,n,!0),f=m.findParent(c.endContainer,n,!0),e&&f&&e===f)c.deleteContents(),c.insertNode(g.cloneNode(!0).firstChild).setCursor(!0);
    else{e=c.createBookmark();c.enlarge(!0);f=c.createBookmark();for(var l=m.getNextDomNode(f.start,!1,n);l&&!(m.getPosition(l,f.end)&m.POSITION_FOLLOWING);)l.insertBefore(g.cloneNode(!0).firstChild,l.firstChild),l=m.getNextDomNode(l,!1,n);c.moveToBookmark(f).moveToBookmark(e).select()}m.preventDefault(a)}if(B.gecko&&46==d&&(c=k.selection.getRange(),c.collapsed&&(e=c.startContainer,m.isEmptyBlock(e)))){for(d=e.parentNode;1==m.getChildCount(d)&&!m.isBody(d);)e=d,d=d.parentNode;e===d.lastChild&&a.preventDefault()}});
        k.addListener("keyup",function(d,a){if((a.keyCode||a.which)==Ca.Backspace&&!this.fireEvent("delkeyup")){d=this.selection.getRange();if(d.collapsed){var c;if((c=m.findParentByTagName(d.startContainer,"h1 h2 h3 h4 h5 h6".split(" "),!0))&&m.isEmptyBlock(c)){if((a=c.previousSibling)&&"TABLE"!=a.nodeName){m.remove(c);d.setStartAtLast(a).setCursor(!1,!0);return}if((a=c.nextSibling)&&"TABLE"!=a.nodeName){m.remove(c);d.setStartAtFirst(a).setCursor(!1,!0);return}}m.isBody(d.startContainer)&&(c=m.createElement(this.document,
            "p",{innerHTML:B.ie?m.fillChar:"<br/>"}),d.insertNode(c).setStart(c,0).setCursor(!1,!0))}!b&&(3==d.startContainer.nodeType||1==d.startContainer.nodeType&&m.isEmptyBlock(d.startContainer))&&(B.ie?(c=d.document.createElement("span"),d.insertNode(c).setStartBefore(c).collapse(!0),d.select(),m.remove(c)):d.select())}})};UE.plugins.fiximgclick=function(){function k(){this.cover=this.resizer=this.editor=null;this.doc=document;this.prePos={x:0,y:0};this.startPos={x:0,y:0}}var b=!1;(function(){var d=[[0,
        0,-1,-1],[0,0,0,-1],[0,0,1,-1],[0,0,-1,0],[0,0,1,0],[0,0,-1,1],[0,0,0,1],[0,0,1,1]];k.prototype={init:function(a){var c=this;c.editor=a;c.startPos=this.prePos={x:0,y:0};c.dragId=-1;a=[];var g=c.cover=document.createElement("div"),e=c.resizer=document.createElement("div");g.id=c.editor.ui.id+"_imagescale_cover";g.style.cssText="position:absolute;display:none;z-index:"+c.editor.options.zIndex+";filter:alpha(opacity=0); opacity:0;background:#CCC;";m.on(g,"mousedown click",function(){c.hide()});for(i=
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                0;8>i;i++)a.push('<span class="edui-editor-imagescale-hand'+i+'"></span>');e.id=c.editor.ui.id+"_imagescale";e.className="edui-editor-imagescale";e.innerHTML=a.join("");e.style.cssText+=";display:none;border:1px solid #3b77ff;z-index:"+c.editor.options.zIndex+";";c.editor.ui.getDom().appendChild(g);c.editor.ui.getDom().appendChild(e);c.initStyle();c.initEvents()},initStyle:function(){x.cssRule("imagescale",".edui-editor-imagescale{display:none;position:absolute;border:1px solid #38B2CE;cursor:hand;-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;}.edui-editor-imagescale span{position:absolute;width:6px;height:6px;overflow:hidden;font-size:0px;display:block;background-color:#3C9DD0;}.edui-editor-imagescale .edui-editor-imagescale-hand0{cursor:nw-resize;top:0;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand1{cursor:n-resize;top:0;margin-top:-4px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand2{cursor:ne-resize;top:0;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand3{cursor:w-resize;top:50%;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand4{cursor:e-resize;top:50%;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand5{cursor:sw-resize;top:100%;margin-top:-3px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand6{cursor:s-resize;top:100%;margin-top:-3px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand7{cursor:se-resize;top:100%;margin-top:-3px;left:100%;margin-left:-3px;}")},
        initEvents:function(){this.startPos.x=this.startPos.y=0;this.isDraging=!1},_eventHandler:function(a){switch(a.type){case "mousedown":var c=a.target||a.srcElement;-1!=c.className.indexOf("edui-editor-imagescale-hand")&&-1==this.dragId&&(this.dragId=c.className.slice(-1),this.startPos.x=this.prePos.x=a.clientX,this.startPos.y=this.prePos.y=a.clientY,m.on(this.doc,"mousemove",this.proxy(this._eventHandler,this)));break;case "mousemove":-1!=this.dragId&&(this.updateContainerStyle(this.dragId,{x:a.clientX-
                this.prePos.x,y:a.clientY-this.prePos.y}),this.prePos.x=a.clientX,this.prePos.y=a.clientY,b=!0,this.updateTargetElement());break;case "mouseup":-1!=this.dragId&&(this.updateContainerStyle(this.dragId,{x:a.clientX-this.prePos.x,y:a.clientY-this.prePos.y}),this.updateTargetElement(),this.target.parentNode&&this.attachTo(this.target),this.dragId=-1),m.un(this.doc,"mousemove",this.proxy(this._eventHandler,this)),b&&(b=!1,this.editor.fireEvent("contentchange"))}},updateTargetElement:function(){m.setStyles(this.target,
            {width:this.resizer.style.width,height:this.resizer.style.height});this.target.width=parseInt(this.resizer.style.width);this.target.height=parseInt(this.resizer.style.height);this.attachTo(this.target)},updateContainerStyle:function(a,c){var g=this.resizer;if(0!=d[a][0]){var e=parseInt(g.style.left)+c.x;g.style.left=this._validScaledProp("left",e)+"px"}0!=d[a][1]&&(e=parseInt(g.style.top)+c.y,g.style.top=this._validScaledProp("top",e)+"px");0!=d[a][2]&&(e=g.clientWidth+d[a][2]*c.x,g.style.width=this._validScaledProp("width",
            e)+"px");0!=d[a][3]&&(e=g.clientHeight+d[a][3]*c.y,g.style.height=this._validScaledProp("height",e)+"px")},_validScaledProp:function(a,c){var g=this.resizer,e=document;c=isNaN(c)?0:c;switch(a){case "left":return 0>c?0:c+g.clientWidth>e.clientWidth?e.clientWidth-g.clientWidth:c;case "top":return 0>c?0:c+g.clientHeight>e.clientHeight?e.clientHeight-g.clientHeight:c;case "width":return 0>=c?1:c+g.offsetLeft>e.clientWidth?e.clientWidth-g.offsetLeft:c;case "height":return 0>=c?1:c+g.offsetTop>e.clientHeight?
            e.clientHeight-g.offsetTop:c}},hideCover:function(){this.cover.style.display="none"},showCover:function(){var a=m.getXY(this.editor.ui.getDom()),c=m.getXY(this.editor.iframe);m.setStyles(this.cover,{width:this.editor.iframe.offsetWidth+"px",height:this.editor.iframe.offsetHeight+"px",top:c.y-a.y+"px",left:c.x-a.x+"px",position:"absolute",display:""})},show:function(a){this.resizer.style.display="block";a&&this.attachTo(a);m.on(this.resizer,"mousedown",this.proxy(this._eventHandler,this));m.on(this.doc,
            "mouseup",this.proxy(this._eventHandler,this));this.showCover();this.editor.fireEvent("afterscaleshow",this);this.editor.fireEvent("saveScene")},hide:function(){this.hideCover();this.resizer.style.display="none";m.un(this.resizer,"mousedown",this.proxy(this._eventHandler,this));m.un(this.doc,"mouseup",this.proxy(this._eventHandler,this));this.editor.fireEvent("afterscalehide",this)},proxy:function(a,c){return function(g){return a.apply(c||this,arguments)}},attachTo:function(a){a=this.target=a;var c=
            this.resizer,g=m.getXY(a),e=m.getXY(this.editor.iframe),f=m.getXY(c.parentNode);m.setStyles(c,{width:a.width+"px",height:a.height+"px",left:e.x+g.x-this.editor.document.body.scrollLeft-f.x-parseInt(c.style.borderLeftWidth)+"px",top:e.y+g.y-this.editor.document.body.scrollTop-f.y-parseInt(c.style.borderTopWidth)+"px"})}}})();return function(){var d=this,a;d.setOpt("imageScaleEnabled",!0);!B.ie&&d.options.imageScaleEnabled&&d.addListener("click",function(c,g){if((c=d.selection.getRange().getClosedNode())&&
        "IMG"==c.tagName&&"false"!=d.body.contentEditable){if(!(-1!=c.className.indexOf("edui-faked-music")||c.getAttribute("anchorname")||m.hasClass(c,"loadingclass")||m.hasClass(c,"loaderrorclass"))){if(!a){a=new k;a.init(d);d.ui.getDom().appendChild(a.resizer);var e=function(n){a.hide();a.target&&d.selection.getRange().selectNode(a.target).select()},f=function(n){var l=n.target||n.srcElement;!l||void 0!==l.className&&-1!=l.className.indexOf("edui-editor-imagescale")||e(n)},h;d.addListener("afterscaleshow",
        function(n){d.addListener("beforekeydown",e);d.addListener("beforemousedown",f);m.on(document,"keydown",e);m.on(document,"mousedown",f);d.selection.getNative().removeAllRanges()});d.addListener("afterscalehide",function(n){d.removeListener("beforekeydown",e);d.removeListener("beforemousedown",f);m.un(document,"keydown",e);m.un(document,"mousedown",f);n=a.target;n.parentNode&&d.selection.getRange().selectNode(n).select()});m.on(a.resizer,"mousedown",function(n){d.selection.getNative().removeAllRanges();
        var l=n.target||n.srcElement;l&&-1==l.className.indexOf("edui-editor-imagescale-hand")&&(h=setTimeout(function(){a.hide();a.target&&d.selection.getRange().selectNode(l).select()},200))});m.on(a.resizer,"mouseup",function(n){(n=n.target||n.srcElement)&&-1==n.className.indexOf("edui-editor-imagescale-hand")&&clearTimeout(h)})}a.show(c)}}else a&&"none"!=a.resizer.style.display&&a.hide()});B.webkit&&d.addListener("click",function(c,g){"IMG"==g.target.tagName&&"false"!=d.body.contentEditable&&(new ja.Range(d.document)).selectNode(g.target).select()})}}();
    UE.plugin.register("autolink",function(){return B.ie?{}:{bindEvents:{reset:function(){},keydown:function(k,b){k=b.keyCode||b.which;if(32==k||13==k){k=this.selection.getNative();b=k.getRangeAt(0).cloneRange();for(var d,a=b.startContainer;1==a.nodeType&&0<b.startOffset;){a=b.startContainer.childNodes[b.startOffset-1];if(!a)break;b.setStart(a,1==a.nodeType?a.childNodes.length:a.nodeValue.length);b.collapse(!0);a=b.startContainer}do{if(0==b.startOffset){for(a=b.startContainer.previousSibling;a&&1==a.nodeType;)a=
                a.lastChild;if(!a||m.isFillChar(a))break;d=a.nodeValue.length}else a=b.startContainer,d=b.startOffset;b.setStart(a,d-1);d=b.toString().charCodeAt(0)}while(160!=d&&32!=d);if(b.toString().replace(new RegExp(m.fillChar,"g"),"").match(/(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i)){for(;b.toString().length&&!/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(b.toString());)try{b.setStart(b.startContainer,b.startOffset+1)}catch(g){for(a=b.startContainer;!(next=a.nextSibling);){if(m.isBody(a))return;
                a=a.parentNode}b.setStart(next,0)}if(!m.findParentByTagName(b.startContainer,"a",!0)){d=this.document.createElement("a");a=this.document.createTextNode(" ");this.undoManger&&this.undoManger.save();d.appendChild(b.extractContents());d.href=d.innerHTML=d.innerHTML.replace(/<[^>]+>/g,"");var c=d.getAttribute("href").replace(new RegExp(m.fillChar,"g"),"");c=/^(?:https?:\/\/)/ig.test(c)?c:"http://"+c;d.setAttribute("_src",x.html(c));d.href=x.html(c);b.insertNode(d);d.parentNode.insertBefore(a,d.nextSibling);
                b.setStart(a,0);b.collapse(!0);k.removeAllRanges();k.addRange(b);this.undoManger&&this.undoManger.save()}}}}}}},function(){function k(d){if(3==d.nodeType)return null;if("A"==d.nodeName)return d;for(d=d.lastChild;d;){if("A"==d.nodeName)return d;if(3==d.nodeType){if(m.isWhitespace(d)){d=d.previousSibling;continue}return null}d=d.lastChild}}var b={37:1,38:1,39:1,40:1,13:1,32:1};B.ie&&this.addListener("keyup",function(d,a){var c=a.keyCode;if(b[c])if(d=this.selection.getRange(),a=d.startContainer,13==
    c){for(;a&&!m.isBody(a)&&!m.isBlockElm(a);)a=a.parentNode;a&&!m.isBody(a)&&"P"==a.nodeName&&(d=a.previousSibling)&&1==d.nodeType&&(d=k(d))&&!d.getAttribute("_href")&&m.remove(d,!0)}else 32==c?3==a.nodeType&&/^\s$/.test(a.nodeValue)&&(a=a.previousSibling)&&"A"==a.nodeName&&!a.getAttribute("_href")&&m.remove(a,!0):(a=m.findParentByTagName(a,"a",!0))&&!a.getAttribute("_href")&&(c=d.createBookmark(),m.remove(a,!0),d.moveToBookmark(c).select(!0))})});UE.plugins.autoheight=function(){function k(){var h=
        this;clearTimeout(e);f||h.queryCommandState&&(!h.queryCommandState||1==h.queryCommandState("source"))||(e=setTimeout(function(){for(var n=h.body.lastChild;n&&1!=n.nodeType;)n=n.previousSibling;n&&1==n.nodeType&&(n.style.clear="both",g=Math.max(m.getXY(n).y+n.offsetHeight+25,Math.max(c.minFrameHeight,c.initialFrameHeight)),g!=a&&(g!==parseInt(h.iframe.parentNode.style.height)&&(h.iframe.parentNode.style.height=g+"px"),h.body.style.height=g+"px",a=g),m.removeStyle(n,"clear"))},50))}var b=this;b.autoHeightEnabled=
        !1!==b.options.autoHeightEnabled;if(b.autoHeightEnabled){var d,a=0,c=b.options,g,e,f;b.addListener("fullscreenchanged",function(h,n){f=n});b.addListener("destroy",function(){b.removeListener("contentchange afterinserthtml keyup mouseup",k)});b.enableAutoHeight=function(){var h=this;if(h.autoHeightEnabled){var n=h.document;h.autoHeightEnabled=!0;d=n.body.style.overflowY;n.body.style.overflowY="hidden";h.addListener("contentchange afterinserthtml keyup mouseup",k);setTimeout(function(){k.call(h)},B.gecko?
        100:0);h.fireEvent("autoheightchanged",h.autoHeightEnabled)}};b.disableAutoHeight=function(){b.body.style.overflowY=d||"";b.removeListener("contentchange",k);b.removeListener("keyup",k);b.removeListener("mouseup",k);b.autoHeightEnabled=!1;b.fireEvent("autoheightchanged",b.autoHeightEnabled)};b.on("setHeight",function(){b.disableAutoHeight()});b.addListener("ready",function(){b.enableAutoHeight();var h;m.on(B.ie?b.body:b.document,B.webkit?"dragover":"drop",function(){clearTimeout(h);h=setTimeout(function(){k.call(b)},
        100)});var n;window.onscroll=function(){null===n?n=this.scrollY:0==this.scrollY&&0!=n&&(b.window.scrollTo(0,0),n=null)}})}};UE.plugins.autofloat=function(){function k(){var w=document.body.style;w.backgroundImage='url("about:blank")';w.backgroundAttachment="fixed"}function b(){t=!0;l.parentNode&&l.parentNode.removeChild(l);p.style.cssText=n}function d(){var w=q(a.container),v=a.options.toolbarTopOffset||0;if(0>w.top&&w.bottom-p.offsetHeight>v){w=m.getXY(p);v=m.getComputedStyle(p,"position");var y=
        m.getComputedStyle(p,"left");p.style.width=p.offsetWidth+"px";p.style.zIndex=1*a.options.zIndex+1;p.parentNode.insertBefore(l,p);f||h&&B.ie?("absolute"!=p.style.position&&(p.style.position="absolute"),p.style.top=(document.body.scrollTop||document.documentElement.scrollTop)-r+g+"px"):(B.ie7Compat&&t&&(t=!1,p.style.left=m.getXY(p).x-document.documentElement.getBoundingClientRect().left+2+"px"),"fixed"!=p.style.position&&(p.style.position="fixed",p.style.top=g+"px",("absolute"==v||"relative"==v)&&parseFloat(y)&&
    (p.style.left=w.x+"px")))}else b()}var a=this,c=a.getLang();a.setOpt({topOffset:0});var g=a.options.topOffset;if(!1!==a.options.autoFloatEnabled){var e=UE.ui.uiUtils,f=B.ie&&6>=B.version,h=B.quirks,n,l=document.createElement("div"),p,r,q,t=!0,u=x.defer(function(){d()},B.ie?200:100,!0);a.addListener("destroy",function(){m.un(window,["scroll","resize"],d);a.removeListener("keydown",u)});a.addListener("ready",function(){if(UE.ui)var w=1;else alert(c.autofloatMsg),w=0;w&&a.ui&&(q=e.getClientRect,p=a.ui.getDom("toolbarbox"),
        r=q(p).top,n=p.style.cssText,l.style.height=p.offsetHeight+"px",f&&k(),m.on(window,["scroll","resize"],d),a.addListener("keydown",u),a.addListener("beforefullscreenchange",function(v,y){y&&b()}),a.addListener("fullscreenchanged",function(v,y){y||d()}),a.addListener("sourcemodechanged",function(v,y){setTimeout(function(){d()},0)}),a.addListener("clearDoc",function(){setTimeout(function(){d()},0)}))})}};UE.plugins.video=function(){function k(a,c,g,e,f,h,n){a=x.unhtmlForUrl(a);f=x.unhtml(f);h=x.unhtml(h);
        c=parseInt(c,10)||0;g=parseInt(g,10)||0;switch(n){case "image":var l="<img "+(e?'id="'+e+'"':"")+' width="'+c+'" height="'+g+'" _url="'+a+'" class="'+h.replace(/\bvideo-js\b/,"")+'" src="'+d.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" style="background:url('+d.options.UEDITOR_HOME_URL+"themes/default/images/videologo.gif) no-repeat center center; border:1px solid gray;"+(f?"float:"+f+";":"")+'" />';break;case "embed":l='<embed type="application/x-shockwave-flash" class="'+h+'" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+
            x.html(a)+'" width="'+c+'" height="'+g+'"'+(f?' style="float:'+f+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >';break;case "video":n=a.substr(a.lastIndexOf(".")+1),"ogv"==n&&(n="ogg"),l="<video"+(e?' id="'+e+'"':"")+' class="'+h+' video-js" '+(f?' style="float:'+f+'"':"")+' controls preload="none" width="'+c+'" height="'+g+'" src="'+a+'" data-setup="{}"><source src="'+a+'" type="video/'+n+'" /></video>'}return l}function b(a,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                c){x.each(a.getNodesByTagName(c?"img":"embed video"),function(g){var e=g.getAttr("class");if(e&&-1!=e.indexOf("edui-faked-video")){var f=k(c?g.getAttr("_url"):g.getAttr("src"),g.getAttr("width"),g.getAttr("height"),null,g.getStyle("float")||"",e,c?"embed":"image");g.parentNode.replaceChild(UE.uNode.createElement(f),g)}e&&-1!=e.indexOf("edui-upload-video")&&(f=k(c?g.getAttr("_url"):g.getAttr("src"),g.getAttr("width"),g.getAttr("height"),null,g.getStyle("float")||"",e,c?"video":"image"),g.parentNode.replaceChild(UE.uNode.createElement(f),
        g))})}var d=this;d.addOutputRule(function(a){b(a,!0)});d.addInputRule(function(a){b(a)});d.commands.insertvideo={execCommand:function(a,c,g){c=x.isArray(c)?c:[c];var e=[];a=0;for(var f,h=c.length;a<h;a++){f=c[a];var n="upload"==g?"edui-upload-video video-js vjs-default-skin":"edui-faked-video";e.push(k(f.url,f.width||420,f.height||280,"tmpVedio"+a,null,n,"image"))}d.execCommand("inserthtml",e.join(""),!0);g=this.selection.getRange();a=0;for(h=c.length;a<h;a++)e=this.document.getElementById("tmpVedio"+
            a),m.removeAttributes(e,"id"),g.selectNode(e).select(),d.execCommand("imagefloat",c[a].align)},queryCommandState:function(){var a=d.selection.getRange().getClosedNode();return!a||"edui-faked-video"!=a.className&&-1==a.className.indexOf("edui-upload-video")?0:1}}};(function(){var k=UE.UETable=function(b){this.table=b;this.indexTable=[];this.selectedTds=[];this.cellsRange={};this.update(b)};k.removeSelectedClass=function(b){x.each(b,function(d){m.removeClasses(d,"selectTdClass")})};k.addSelectedClass=
        function(b){x.each(b,function(d){m.addClass(d,"selectTdClass")})};k.isEmptyBlock=function(b){var d=new RegExp(m.fillChar,"g");if(0<b[B.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(d,"").length)return 0;for(var a in M.$isNotEmpty)if(M.$isNotEmpty.hasOwnProperty(a)&&b.getElementsByTagName(a).length)return 0;return 1};k.getWidth=function(b){return b?parseInt(m.getComputedStyle(b,"width"),10):0};k.getTableCellAlignState=function(b){!x.isArray(b)&&(b=[b]);var d={},a=["align","valign"],c=null,
        g=!0;x.each(b,function(e){x.each(a,function(f){c=e.getAttribute(f);if(!d[f]&&c)d[f]=c;else if(!d[f]||c!==d[f])return g=!1});return g});return g?d:null};k.getTableItemsByRange=function(b){var d=b.selection.getStart();d&&d.id&&0===d.id.indexOf("_baidu_bookmark_start_")&&d.nextSibling&&(d=d.nextSibling);var a=(b=d&&m.findParentByTagName(d,["td","th"],!0))&&b.parentNode;d=d&&m.findParentByTagName(d,"caption",!0);return{cell:b,tr:a,table:d?d.parentNode:a&&a.parentNode.parentNode,caption:d}};k.getUETableBySelected=
        function(b){return(b=k.getTableItemsByRange(b).table)&&b.ueTable&&b.ueTable.selectedTds.length?b.ueTable:null};k.getDefaultValue=function(b,d){var a={thin:"0px",medium:"1px",thick:"2px"};if(d){e=d.getElementsByTagName("td")[0];var c=m.getComputedStyle(d,"border-left-width");b=parseInt(a[c]||c,10);c=m.getComputedStyle(e,"padding-left");var g=parseInt(a[c]||c,10);c=m.getComputedStyle(e,"border-left-width");a=parseInt(a[c]||c,10)}else{d=b.document.createElement("table");d.insertRow(0).insertCell(0).innerHTML=
        "xxx";b.body.appendChild(d);var e=d.getElementsByTagName("td")[0];c=m.getComputedStyle(d,"border-left-width");b=parseInt(a[c]||c,10);c=m.getComputedStyle(e,"padding-left");g=parseInt(a[c]||c,10);c=m.getComputedStyle(e,"border-left-width");a=parseInt(a[c]||c,10);m.remove(d)}return{tableBorder:b,tdPadding:g,tdBorder:a}};k.getUETable=function(b){var d=b.tagName.toLowerCase();b="td"==d||"th"==d||"caption"==d?m.findParentByTagName(b,"table",!0):b;b.ueTable||(b.ueTable=new k(b));return b.ueTable};k.cloneCell=
        function(b,d,a){if(!b||x.isString(b))return this.table.ownerDocument.createElement(b||"td");var c=m.hasClass(b,"selectTdClass");c&&m.removeClasses(b,"selectTdClass");var g=b.cloneNode(!0);d&&(g.rowSpan=g.colSpan=1);!a&&m.removeAttributes(g,"width height");!a&&m.removeAttributes(g,"style");g.style.borderLeftStyle="";g.style.borderTopStyle="";g.style.borderLeftColor=b.style.borderRightColor;g.style.borderLeftWidth=b.style.borderRightWidth;g.style.borderTopColor=b.style.borderBottomColor;g.style.borderTopWidth=
            b.style.borderBottomWidth;c&&m.addClass(b,"selectTdClass");return g};k.prototype={getMaxRows:function(){for(var b=this.table.rows,d=1,a=0,c;c=b[a];a++){for(var g=1,e=0,f;f=c.cells[e++];)g=Math.max(f.rowSpan||1,g);d=Math.max(g+a,d)}return d},getMaxCols:function(){for(var b=this.table.rows,d=0,a={},c=0,g;g=b[c];c++){for(var e=0,f=0,h;h=g.cells[f++];)if(e+=h.colSpan||1,h.rowSpan&&1<h.rowSpan)for(var n=1;n<h.rowSpan;n++)a["row_"+(c+n)]?a["row_"+(c+n)]++:a["row_"+(c+n)]=h.colSpan||1;e+=a["row_"+c]||0;
            d=Math.max(e,d)}return d},getCellColIndex:function(b){},getHSideCell:function(b,d){try{var a=this.getCellInfo(b),c=this.selectedTds.length,g=this.cellsRange;if(!d&&(c?!g.beginColIndex:!a.colIndex)||d&&(c?g.endColIndex==this.colsNum-1:a.colIndex==this.colsNum-1))return null;var e=c?g.beginRowIndex:a.rowIndex;var f=d?c?g.endColIndex+1:a.colIndex+1:c?g.beginColIndex-1:1>a.colIndex?0:a.colIndex-1;return this.getCell(this.indexTable[e][f].rowIndex,this.indexTable[e][f].cellIndex)}catch(h){}},getTabNextCell:function(b,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                d){b=this.getCellInfo(b);d=d||b.rowIndex;b=b.colIndex+1+(b.colSpan-1);try{var a=this.getCell(this.indexTable[d][b].rowIndex,this.indexTable[d][b].cellIndex)}catch(c){try{d=1*d+1,b=0,a=this.getCell(this.indexTable[d][b].rowIndex,this.indexTable[d][b].cellIndex)}catch(g){}}return a},getVSideCell:function(b,d,a){try{var c=this.getCellInfo(b),g=this.selectedTds.length&&!a,e=this.cellsRange;if(!d&&0==c.rowIndex||d&&(g?e.endRowIndex==this.rowsNum-1:c.rowIndex+c.rowSpan>this.rowsNum-1))return null;var f=
            d?g?e.endRowIndex+1:c.rowIndex+c.rowSpan:g?e.beginRowIndex-1:c.rowIndex-1;var h=g?e.beginColIndex:c.colIndex;return this.getCell(this.indexTable[f][h].rowIndex,this.indexTable[f][h].cellIndex)}catch(n){}},getSameEndPosCells:function(b,d){try{var a="x"===d.toLowerCase(),c=m.getXY(b)[a?"x":"y"]+b["offset"+(a?"Width":"Height")],g=this.table.rows;d=null;for(var e=[],f=0;f<this.rowsNum;f++){d=g[f].cells;for(var h=0,n;n=d[h++];){var l=m.getXY(n)[a?"x":"y"]+n["offset"+(a?"Width":"Height")];if(l>c&&a)break;
            if(b==n||c==l)if(1==n[a?"colSpan":"rowSpan"]&&e.push(n),a)break}}return e}catch(p){}},setCellContent:function(b,d){b.innerHTML=d||(B.ie?m.fillChar:"<br />")},cloneCell:k.cloneCell,getSameStartPosXCells:function(b){try{var d=m.getXY(b).x+b.offsetWidth,a=this.table.rows;b=[];for(var c=0;c<this.rowsNum;c++){var g=a[c].cells;for(var e=0,f;f=g[e++];){var h=m.getXY(f).x;if(h>d)break;if(h==d&&1==f.colSpan){b.push(f);break}}}return b}catch(n){}},update:function(b){this.table=b||this.table;this.selectedTds=
            [];this.cellsRange={};this.indexTable=[];b=this.table.rows;for(var d=this.getMaxRows(),a=d-b.length,c=this.getMaxCols();a--;)this.table.insertRow(b.length);this.rowsNum=d;this.colsNum=c;a=0;for(var g=b.length;a<g;a++)this.indexTable[a]=Array(c);a=0;for(var e;e=b[a];a++){g=0;var f;for(e=e.cells;f=e[g];g++){f.rowSpan>d&&(f.rowSpan=d);var h=g,n=f.rowSpan||1;for(f=f.colSpan||1;this.indexTable[a][h];)h++;for(var l=0;l<n;l++)for(var p=0;p<f;p++)this.indexTable[a+l][h+p]={rowIndex:a,cellIndex:g,colIndex:h,
            rowSpan:n,colSpan:f}}}for(l=0;l<d;l++)for(p=0;p<c;p++)void 0===this.indexTable[l][p]&&(e=b[l],f=(f=e.cells[e.cells.length-1])?f.cloneNode(!0):this.table.ownerDocument.createElement("td"),this.setCellContent(f),1!==f.colSpan&&(f.colSpan=1),1!==f.rowSpan&&(f.rowSpan=1),e.appendChild(f),this.indexTable[l][p]={rowIndex:l,cellIndex:f.cellIndex,colIndex:p,rowSpan:1,colSpan:1});b=m.getElementsByTagName(this.table,"td");var r=[];x.each(b,function(q){m.hasClass(q,"selectTdClass")&&r.push(q)});r.length&&(d=
            r[r.length-1],b=this.getCellInfo(r[0]),d=this.getCellInfo(d),this.selectedTds=r,this.cellsRange={beginRowIndex:b.rowIndex,beginColIndex:b.colIndex,endRowIndex:d.rowIndex+d.rowSpan-1,endColIndex:d.colIndex+d.colSpan-1});if(!m.hasClass(this.table.rows[0],"firstRow"))for(m.addClass(this.table.rows[0],"firstRow"),a=1;a<this.table.rows.length;a++)m.removeClasses(this.table.rows[a],"firstRow")},getCellInfo:function(b){if(b){var d=b.cellIndex;b=b.parentNode.rowIndex;for(var a=this.indexTable[b],c=this.colsNum,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    g=d;g<c;g++){var e=a[g];if(e.rowIndex===b&&e.cellIndex===d)return e}}},getCell:function(b,d){return b<this.rowsNum&&this.table.rows[b].cells[d]||null},deleteCell:function(b,d){d="number"==typeof d?d:b.parentNode.rowIndex;this.table.rows[d].deleteCell(b.cellIndex)},getCellsRange:function(b,d){function a(f,h,n,l){var p=f,r=h,q=n,t=l,u;if(0<f)for(u=h;u<l;u++){var w=c.indexTable[f][u];var v=w.rowIndex;v<f&&(p=Math.min(v,p))}if(l<c.colsNum)for(v=f;v<n;v++)w=c.indexTable[v][l],u=w.colIndex+w.colSpan-1,
        u>l&&(t=Math.max(u,t));if(n<c.rowsNum)for(u=h;u<l;u++)w=c.indexTable[n][u],v=w.rowIndex+w.rowSpan-1,v>n&&(q=Math.max(v,q));if(0<h)for(v=f;v<n;v++)w=c.indexTable[v][h],u=w.colIndex,u<h&&(r=Math.min(w.colIndex,r));return p!=f||r!=h||q!=n||t!=l?a(p,r,q,t):{beginRowIndex:f,beginColIndex:h,endRowIndex:n,endColIndex:l}}try{var c=this,g=c.getCellInfo(b);if(b===d)return{beginRowIndex:g.rowIndex,beginColIndex:g.colIndex,endRowIndex:g.rowIndex+g.rowSpan-1,endColIndex:g.colIndex+g.colSpan-1};var e=c.getCellInfo(d);
            return a(Math.min(g.rowIndex,e.rowIndex),Math.min(g.colIndex,e.colIndex),Math.max(g.rowIndex+g.rowSpan-1,e.rowIndex+e.rowSpan-1),Math.max(g.colIndex+g.colSpan-1,e.colIndex+e.colSpan-1))}catch(f){}},getCells:function(b){this.clearSelected();for(var d=b.beginColIndex,a=b.endRowIndex,c=b.endColIndex,g,e,f={},h=[],n=b.beginRowIndex;n<=a;n++)for(var l=d;l<=c;l++){b=this.indexTable[n][l];g=b.rowIndex;e=b.colIndex;var p=g+"|"+e;if(!f[p]){f[p]=1;if(g<n||e<l||g+b.rowSpan-1>a||e+b.colSpan-1>c)return null;h.push(this.getCell(g,
            b.cellIndex))}}return h},clearSelected:function(){k.removeSelectedClass(this.selectedTds);this.selectedTds=[];this.cellsRange={}},setSelected:function(b){var d=this.getCells(b);k.addSelectedClass(d);this.selectedTds=d;this.cellsRange=b},isFullRow:function(){var b=this.cellsRange;return b.endColIndex-b.beginColIndex+1==this.colsNum},isFullCol:function(){var b=this.cellsRange,d=this.table.getElementsByTagName("th");b=b.endRowIndex-b.beginRowIndex+1;return d.length?b==this.rowsNum||b==this.rowsNum-1:
            b==this.rowsNum},getNextCell:function(b,d,a){try{var c=this.getCellInfo(b),g=this.selectedTds.length&&!a,e=this.cellsRange;if(!d&&0==c.rowIndex||d&&(g?e.endRowIndex==this.rowsNum-1:c.rowIndex+c.rowSpan>this.rowsNum-1))return null;var f=d?g?e.endRowIndex+1:c.rowIndex+c.rowSpan:g?e.beginRowIndex-1:c.rowIndex-1;var h=g?e.beginColIndex:c.colIndex;return this.getCell(this.indexTable[f][h].rowIndex,this.indexTable[f][h].cellIndex)}catch(n){}},getPreviewCell:function(b,d){try{var a=this.getCellInfo(b),c=
            this.selectedTds.length,g=this.cellsRange;if(!d&&(c?!g.beginColIndex:!a.colIndex)||d&&(c?g.endColIndex==this.colsNum-1:a.rowIndex>this.colsNum-1))return null;var e=d?c?g.beginRowIndex:1>a.rowIndex?0:a.rowIndex-1:c?g.beginRowIndex:a.rowIndex;var f=d?c?g.endColIndex+1:a.colIndex:c?g.beginColIndex-1:1>a.colIndex?0:a.colIndex-1;return this.getCell(this.indexTable[e][f].rowIndex,this.indexTable[e][f].cellIndex)}catch(h){}},moveContent:function(b,d){if(!k.isEmptyBlock(d))if(k.isEmptyBlock(b))b.innerHTML=
            d.innerHTML;else{var a=b.lastChild;for(3!=a.nodeType&&M.$block[a.tagName]||b.appendChild(b.ownerDocument.createElement("br"));a=d.firstChild;)b.appendChild(a)}},mergeRight:function(b){var d=this.getCellInfo(b),a=this.indexTable[d.rowIndex][d.colIndex+d.colSpan],c=this.getCell(a.rowIndex,a.cellIndex);b.colSpan=d.colSpan+a.colSpan;b.removeAttribute("width");this.moveContent(b,c);this.deleteCell(c,a.rowIndex);this.update()},mergeDown:function(b){var d=this.getCellInfo(b),a=this.indexTable[d.rowIndex+
        d.rowSpan][d.colIndex],c=this.getCell(a.rowIndex,a.cellIndex);b.rowSpan=d.rowSpan+a.rowSpan;b.removeAttribute("height");this.moveContent(b,c);this.deleteCell(c,a.rowIndex);this.update()},mergeRange:function(){var b=this.cellsRange,d=this.getCell(b.beginRowIndex,this.indexTable[b.beginRowIndex][b.beginColIndex].cellIndex);if("TH"==d.tagName&&b.endRowIndex!==b.beginRowIndex){var a=this.indexTable;b=this.getCellInfo(d);d=this.getCell(1,a[1][b.colIndex].cellIndex);b=this.getCellsRange(d,this.getCell(a[this.rowsNum-
        1][b.colIndex].rowIndex,a[this.rowsNum-1][b.colIndex].cellIndex))}var c=this.getCells(b);a=0;for(var g;g=c[a++];)g!==d&&(this.moveContent(d,g),this.deleteCell(g));d.rowSpan=b.endRowIndex-b.beginRowIndex+1;1<d.rowSpan&&d.removeAttribute("height");d.colSpan=b.endColIndex-b.beginColIndex+1;1<d.colSpan&&d.removeAttribute("width");d.rowSpan==this.rowsNum&&1!=d.colSpan&&(d.colSpan=1);if(d.colSpan==this.colsNum&&1!=d.rowSpan){c=d.parentNode.rowIndex;if(this.table.deleteRow)for(a=c+1,c+=1,b=d.rowSpan;a<b;a++)this.table.deleteRow(c);
        else for(a=0,b=d.rowSpan-1;a<b;a++)g=this.table.rows[c+1],g.parentNode.removeChild(g);d.rowSpan=1}this.update()},insertRow:function(b,d){function a(p,r,q){0==p?(p=(q.nextSibling||q.previousSibling).cells[p],"TH"==p.tagName&&(p=r.ownerDocument.createElement("th"),p.appendChild(r.firstChild),q.insertBefore(p,r),m.remove(r))):"TH"==r.tagName&&(p=r.ownerDocument.createElement("td"),p.appendChild(r.firstChild),q.insertBefore(p,r),m.remove(r))}var c=this.colsNum,g=this.table.insertRow(b),e="string"==typeof d&&
            "TH"==d.toUpperCase();if(0==b||b==this.rowsNum)for(var f=0;f<c;f++){var h=this.cloneCell(d,!0);this.setCellContent(h);h.getAttribute("vAlign")&&h.setAttribute("vAlign",h.getAttribute("vAlign"));g.appendChild(h);e||a(f,h,g)}else{var n=this.indexTable[b];for(f=0;f<c;f++){var l=n[f];l.rowIndex<b?(h=this.getCell(l.rowIndex,l.cellIndex),h.rowSpan=l.rowSpan+1):(h=this.cloneCell(d,!0),this.setCellContent(h),g.appendChild(h));e||a(f,h,g)}}this.update();return g},deleteRow:function(b){for(var d=this.table.rows[b],
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     a=this.indexTable[b],c=this.colsNum,g=0,e=0;e<c;){var f=a[e],h=this.getCell(f.rowIndex,f.cellIndex);if(1<h.rowSpan&&f.rowIndex==b){f=h.cloneNode(!0);f.rowSpan=h.rowSpan-1;f.innerHTML="";h.rowSpan=1;var n=b+1,l=this.table.rows[n];n=this.getPreviewMergedCellsNum(n,e)-g;n<e?(n=e-n-1,m.insertAfter(l.cells[n],f)):l.cells.length&&l.insertBefore(f,l.cells[0]);g+=1}e+=h.colSpan||1}b=[];g={};for(e=0;e<c;e++)h=a[e].rowIndex,f=a[e].cellIndex,l=h+"_"+f,g[l]||(g[l]=1,h=this.getCell(h,f),b.push(h));var p=[];x.each(b,
            function(r){1==r.rowSpan?r.parentNode.removeChild(r):p.push(r)});x.each(p,function(r){r.rowSpan--});d.parentNode.removeChild(d);this.update()},insertCol:function(b,d,a){function c(r,q,t){0==r?(r=q.nextSibling||q.previousSibling,"TH"==r.tagName&&(r=q.ownerDocument.createElement("th"),r.appendChild(q.firstChild),t.insertBefore(r,q),m.remove(q))):"TH"==q.tagName&&(r=q.ownerDocument.createElement("td"),r.appendChild(q.firstChild),t.insertBefore(r,q),m.remove(q))}var g=this.rowsNum,e=0,f=parseInt((this.table.offsetWidth-
            20*(this.colsNum+1)-(this.colsNum+1))/(this.colsNum+1),10),h="string"==typeof d&&"TH"==d.toUpperCase();if(0==b||b==this.colsNum)for(;e<g;e++){var n=this.table.rows[e];var l=n.cells[0==b?b:n.cells.length];var p=this.cloneCell(d,!0);this.setCellContent(p);p.setAttribute("vAlign",p.getAttribute("vAlign"));l&&p.setAttribute("width",l.getAttribute("width"));b?m.insertAfter(n.cells[n.cells.length-1],p):n.insertBefore(p,n.cells[0]);h||c(e,p,n)}else for(;e<g;e++)l=this.indexTable[e][b],l.colIndex<b?(p=this.getCell(l.rowIndex,
            l.cellIndex),p.colSpan=l.colSpan+1):(n=this.table.rows[e],l=n.cells[l.cellIndex],p=this.cloneCell(d,!0),this.setCellContent(p),p.setAttribute("vAlign",p.getAttribute("vAlign")),l&&p.setAttribute("width",l.getAttribute("width")),l?n.insertBefore(p,l):n.appendChild(p)),h||c(e,p,n);this.update();this.updateWidth(f,a||{tdPadding:10,tdBorder:1})},updateWidth:function(b,d){var a=this.table;d=k.getWidth(a)-2*d.tdPadding-d.tdBorder+b;d<a.ownerDocument.body.offsetWidth?a.setAttribute("width",d):(a=m.getElementsByTagName(this.table,
            "td th"),x.each(a,function(c){c.setAttribute("width",b)}))},deleteCol:function(b){for(var d=this.indexTable,a=this.table.rows,c=this.table.getAttribute("width"),g=0,e=this.rowsNum,f={},h=0;h<e;){var n=d[h][b],l=n.rowIndex+"_"+n.colIndex;f[l]||(f[l]=1,l=this.getCell(n.rowIndex,n.cellIndex),g||(g=l&&parseInt(l.offsetWidth/l.colSpan,10).toFixed(0)),1<l.colSpan?l.colSpan--:a[h].deleteCell(n.cellIndex),h+=n.rowSpan||1)}this.table.setAttribute("width",c-g);this.update()},splitToCells:function(b){var d=
            this;b=this.splitToRows(b);x.each(b,function(a){d.splitToCols(a)})},splitToRows:function(b){var d=this.getCellInfo(b),a=d.rowIndex,c=d.colIndex,g=[];b.rowSpan=1;g.push(b);for(var e=a,f=a+d.rowSpan;e<f;e++)if(e!=a){var h=this.table.rows[e].insertCell(c-this.getPreviewMergedCellsNum(e,c));h.colSpan=d.colSpan;this.setCellContent(h);h.setAttribute("vAlign",b.getAttribute("vAlign"));h.setAttribute("align",b.getAttribute("align"));b.style.cssText&&(h.style.cssText=b.style.cssText);g.push(h)}this.update();
            return g},getPreviewMergedCellsNum:function(b,d){for(var a=this.indexTable[b],c=0,g=0;g<d;){var e=a[g].colSpan;c+=e-(a[g].rowIndex==b?1:0);g+=e}return c},splitToCols:function(b){var d=(b.offsetWidth/b.colSpan-22).toFixed(0),a=this.getCellInfo(b),c=a.rowIndex,g=a.colIndex,e=[];b.colSpan=1;b.setAttribute("width",d);e.push(b);for(var f=g,h=g+a.colSpan;f<h;f++)if(f!=g){var n=this.table.rows[c],l=n.insertCell(this.indexTable[c][f].cellIndex+1);l.rowSpan=a.rowSpan;this.setCellContent(l);l.setAttribute("vAlign",
            b.getAttribute("vAlign"));l.setAttribute("align",b.getAttribute("align"));l.setAttribute("width",d);b.style.cssText&&(l.style.cssText=b.style.cssText);if("TH"==b.tagName){var p=b.ownerDocument.createElement("th");p.appendChild(l.firstChild);p.setAttribute("vAlign",b.getAttribute("vAlign"));p.rowSpan=l.rowSpan;n.insertBefore(p,l);m.remove(l)}e.push(l)}this.update();return e},isLastCell:function(b,d,a){d=d||this.rowsNum;a=a||this.colsNum;b=this.getCellInfo(b);return b.rowIndex+b.rowSpan==d&&b.colIndex+
            b.colSpan==a},getLastCell:function(b){b=b||this.table.getElementsByTagName("td");this.getCellInfo(b[0]);var d=this,a=b[0],c=a.parentNode,g=0,e=0;x.each(b,function(h){h.parentNode==c&&(e+=h.colSpan||1);g+=h.rowSpan*h.colSpan||1});var f=g/e;x.each(b,function(h){if(d.isLastCell(h,f,e))return a=h,!1});return a},selectRow:function(b){var d=this.indexTable[b];b=this.getCell(d[0].rowIndex,d[0].cellIndex);d=this.getCell(d[this.colsNum-1].rowIndex,d[this.colsNum-1].cellIndex);b=this.getCellsRange(b,d);this.setSelected(b)},
        selectTable:function(){var b=this.table.getElementsByTagName("td");b=this.getCellsRange(b[0],b[b.length-1]);this.setSelected(b)},setBackground:function(b,d){if("string"===typeof d)x.each(b,function(l){l.style.backgroundColor=d});else if("object"===typeof d){d=x.extend({repeat:!0,colorList:["#ddd","#fff"]},d);for(var a=this.getCellInfo(b[0]).rowIndex,c=0,g=d.colorList,e=function(l,p,r){return l[p]?l[p]:r?l[p%l.length]:""},f=0,h;h=b[f++];){var n=this.getCellInfo(h);h.style.backgroundColor=e(g,a+c==
        n.rowIndex?c:++c,d.repeat)}}},removeBackground:function(b){x.each(b,function(d){d.style.backgroundColor=""})}}})();(function(){function k(e,f){var h=m.getElementsByTagName(e,"td th");x.each(h,function(l){l.removeAttribute("width")});e.setAttribute("width",b(f,!0,a.getDefaultValue(f,e)));var n=[];setTimeout(function(){x.each(h,function(l){1==l.colSpan&&n.push(l.offsetWidth)});x.each(h,function(l,p){1==l.colSpan&&l.setAttribute("width",n[p]+"")})},0)}function b(e,f,h){var n=e.body;return n.offsetWidth-
        (f?2*parseInt(m.getComputedStyle(n,"margin-left"),10):0)-2*h.tableBorder-(e.options.offsetWidth||0)}function d(e){if(e=c(e).cell){var f=g(e);return f.selectedTds.length?f.selectedTds:[e]}return[]}var a=UE.UETable,c=function(e){return a.getTableItemsByRange(e)},g=function(e){return a.getUETable(e)};UE.commands.inserttable={queryCommandState:function(){return c(this).table?-1:0},execCommand:function(e,f){f||(f=x.extend({},{numCols:this.options.defaultCols,numRows:this.options.defaultRows,tdvalign:this.options.tdvalign}));
            e=this.selection.getRange().startContainer;e=m.findParent(e,function(n){return m.isBlockElm(n)},!0)||this.body;var h=a.getDefaultValue(this,void 0);e=Math.floor(e.offsetWidth/f.numCols-2*h.tdPadding-h.tdBorder);!f.tdvalign&&(f.tdvalign=this.options.tdvalign);this.execCommand("inserthtml",function(n,l){for(var p=[],r=n.numRows,q=n.numCols,t=0;t<r;t++){p.push("<tr"+(0==t?' class="firstRow"':"")+">");for(var u=0;u<q;u++)p.push('<td width="'+l+'"  vAlign="'+n.tdvalign+'" >'+(B.ie&&11>B.version?m.fillChar:
                "<br/>")+"</td>");p.push("</tr>")}return"<table><tbody>"+p.join("")+"</tbody></table>"}(f,e))}};UE.commands.insertparagraphbeforetable={queryCommandState:function(){return c(this).cell?0:-1},execCommand:function(){var e=c(this).table;if(e){var f=this.document.createElement("p");f.innerHTML=B.ie?"&nbsp;":"<br />";e.parentNode.insertBefore(f,e);this.selection.getRange().setStart(f,0).setCursor()}}};UE.commands.deletetable={queryCommandState:function(){var e=this.selection.getRange();return m.findParentByTagName(e.startContainer,
            "table",!0)?0:-1},execCommand:function(e,f){e=this.selection.getRange();if(f=f||m.findParentByTagName(e.startContainer,"table",!0)){var h=f.nextSibling;h||(h=m.createElement(this.document,"p",{innerHTML:B.ie?m.fillChar:"<br/>"}),f.parentNode.insertBefore(h,f));m.remove(f);e=this.selection.getRange();3==h.nodeType?e.setStartBefore(h):e.setStart(h,0);e.setCursor(!1,!0);this.fireEvent("tablehasdeleted")}}};UE.commands.cellalign={queryCommandState:function(){return d(this).length?0:-1},execCommand:function(e,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        f){e=d(this);if(e.length)for(var h=0,n;n=e[h++];)n.setAttribute("align",f)}};UE.commands.cellvalign={queryCommandState:function(){return d(this).length?0:-1},execCommand:function(e,f){e=d(this);if(e.length)for(var h=0,n;n=e[h++];)n.setAttribute("vAlign",f)}};UE.commands.insertcaption={queryCommandState:function(){var e=c(this).table;return e?0==e.getElementsByTagName("caption").length?1:-1:-1},execCommand:function(){var e=c(this).table;if(e){var f=this.document.createElement("caption");f.innerHTML=
            B.ie?m.fillChar:"<br/>";e.insertBefore(f,e.firstChild);this.selection.getRange().setStart(f,0).setCursor()}}};UE.commands.deletecaption={queryCommandState:function(){var e=this.selection.getRange();return(e=m.findParentByTagName(e.startContainer,"table"))?0==e.getElementsByTagName("caption").length?-1:1:-1},execCommand:function(){var e=this.selection.getRange();if(e=m.findParentByTagName(e.startContainer,"table"))m.remove(e.getElementsByTagName("caption")[0]),this.selection.getRange().setStart(e.rows[0].cells[0],
            0).setCursor()}};UE.commands.inserttitle={queryCommandState:function(){var e=c(this).table;return e?(e=e.rows[0],"th"!=e.cells[e.cells.length-1].tagName.toLowerCase()?0:-1):-1},execCommand:function(){var e=c(this).table;e&&g(e).insertRow(0,"th");e=e.getElementsByTagName("th")[0];this.selection.getRange().setStart(e,0).setCursor(!1,!0)}};UE.commands.deletetitle={queryCommandState:function(){var e=c(this).table;return e?(e=e.rows[0],"th"==e.cells[e.cells.length-1].tagName.toLowerCase()?0:-1):-1},execCommand:function(){var e=
            c(this).table;e&&m.remove(e.rows[0]);e=e.getElementsByTagName("td")[0];this.selection.getRange().setStart(e,0).setCursor(!1,!0)}};UE.commands.inserttitlecol={queryCommandState:function(){var e=c(this).table;return e?e.rows[e.rows.length-1].getElementsByTagName("th").length?-1:0:-1},execCommand:function(e){(e=c(this).table)&&g(e).insertCol(0,"th");k(e,this);e=e.getElementsByTagName("th")[0];this.selection.getRange().setStart(e,0).setCursor(!1,!0)}};UE.commands.deletetitlecol={queryCommandState:function(){var e=
            c(this).table;return e?e.rows[e.rows.length-1].getElementsByTagName("th").length?0:-1:-1},execCommand:function(){var e=c(this).table;if(e)for(var f=0;f<e.rows.length;f++)m.remove(e.rows[f].children[0]);k(e,this);e=e.getElementsByTagName("td")[0];this.selection.getRange().setStart(e,0).setCursor(!1,!0)}};UE.commands.mergeright={queryCommandState:function(e){var f=c(this);e=f.table;f=f.cell;if(!e||!f)return-1;var h=g(e);if(h.selectedTds.length)return-1;var n=h.getCellInfo(f),l=n.colIndex+n.colSpan;
            if(l>=h.colsNum)return-1;h=h.indexTable[n.rowIndex][l];return(e=e.rows[h.rowIndex].cells[h.cellIndex])&&f.tagName==e.tagName?h.rowIndex==n.rowIndex&&h.rowSpan==n.rowSpan?0:-1:-1},execCommand:function(e){e=this.selection.getRange();var f=e.createBookmark(!0),h=c(this).cell;g(h).mergeRight(h);e.moveToBookmark(f).select()}};UE.commands.mergedown={queryCommandState:function(e){var f=c(this);e=f.table;f=f.cell;if(!e||!f)return-1;var h=g(e);if(h.selectedTds.length)return-1;var n=h.getCellInfo(f),l=n.rowIndex+
            n.rowSpan;if(l>=h.rowsNum)return-1;h=h.indexTable[l][n.colIndex];return(e=e.rows[h.rowIndex].cells[h.cellIndex])&&f.tagName==e.tagName?h.colIndex==n.colIndex&&h.colSpan==n.colSpan?0:-1:-1},execCommand:function(){var e=this.selection.getRange(),f=e.createBookmark(!0),h=c(this).cell;g(h).mergeDown(h);e.moveToBookmark(f).select()}};UE.commands.mergecells={queryCommandState:function(){return a.getUETableBySelected(this)?0:-1},execCommand:function(){var e=a.getUETableBySelected(this);if(e&&e.selectedTds.length){var f=
            e.selectedTds[0];e.mergeRange();e=this.selection.getRange();m.isEmptyBlock(f)?e.setStart(f,0).collapse(!0):e.selectNodeContents(f);e.select()}}};UE.commands.insertrow={queryCommandState:function(){var e=c(this),f=e.cell;return f&&("TD"==f.tagName||"TH"==f.tagName&&e.tr!==e.table.rows[0])&&g(e.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var e=this.selection.getRange(),f=e.createBookmark(!0),h=c(this),n=h.cell;h=h.table;var l=g(h),p=l.getCellInfo(n);if(l.selectedTds.length){p=
            l.cellsRange;for(var r=0,q=p.endRowIndex-p.beginRowIndex+1;r<q;r++)l.insertRow(p.beginRowIndex,n)}else l.insertRow(p.rowIndex,n);e.moveToBookmark(f).select();"enabled"===h.getAttribute("interlaced")&&this.fireEvent("interlacetable",h)}};UE.commands.insertrownext={queryCommandState:function(){var e=c(this),f=e.cell;return f&&"TD"==f.tagName&&g(e.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var e=this.selection.getRange(),f=e.createBookmark(!0),h=c(this),n=h.cell;h=h.table;var l=
            g(h),p=l.getCellInfo(n);if(l.selectedTds.length){p=l.cellsRange;for(var r=0,q=p.endRowIndex-p.beginRowIndex+1;r<q;r++)l.insertRow(p.endRowIndex+1,n)}else l.insertRow(p.rowIndex+p.rowSpan,n);e.moveToBookmark(f).select();"enabled"===h.getAttribute("interlaced")&&this.fireEvent("interlacetable",h)}};UE.commands.deleterow={queryCommandState:function(){return c(this).cell?0:-1},execCommand:function(){var e=c(this).cell,f=g(e),h=f.cellsRange,n=f.getCellInfo(e),l=f.getVSideCell(e),p=f.getVSideCell(e,!0);
            e=this.selection.getRange();if(x.isEmptyObject(h))f.deleteRow(n.rowIndex);else for(var r=h.beginRowIndex;r<h.endRowIndex+1;r++)f.deleteRow(h.beginRowIndex);r=f.table;r.getElementsByTagName("td").length?1==n.rowSpan||n.rowSpan==h.endRowIndex-h.beginRowIndex+1?(p||l)&&e.selectNodeContents(p||l).setCursor(!1,!0):(f=f.getCell(n.rowIndex,f.indexTable[n.rowIndex][n.colIndex].cellIndex))&&e.selectNodeContents(f).setCursor(!1,!0):(f=r.nextSibling,m.remove(r),f&&e.setStart(f,0).setCursor(!1,!0));"enabled"===
            r.getAttribute("interlaced")&&this.fireEvent("interlacetable",r)}};UE.commands.insertcol={queryCommandState:function(e){e=c(this);var f=e.cell;return f&&("TD"==f.tagName||"TH"==f.tagName&&f!==e.tr.cells[0])&&g(e.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(e){var f=this.selection.getRange(),h=f.createBookmark(!0);if(-1!=this.queryCommandState(e)){e=c(this).cell;var n=g(e),l=n.getCellInfo(e);if(n.selectedTds.length){l=n.cellsRange;for(var p=0,r=l.endColIndex-l.beginColIndex+1;p<
        r;p++)n.insertCol(l.beginColIndex,e)}else n.insertCol(l.colIndex,e);f.moveToBookmark(h).select(!0)}}};UE.commands.insertcolnext={queryCommandState:function(){var e=c(this);return e.cell&&g(e.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(){var e=this.selection.getRange(),f=e.createBookmark(!0),h=c(this).cell,n=g(h),l=n.getCellInfo(h);if(n.selectedTds.length){l=n.cellsRange;for(var p=0,r=l.endColIndex-l.beginColIndex+1;p<r;p++)n.insertCol(l.endColIndex+1,h)}else n.insertCol(l.colIndex+
            l.colSpan,h);e.moveToBookmark(f).select()}};UE.commands.deletecol={queryCommandState:function(){return c(this).cell?0:-1},execCommand:function(){var e=c(this).cell,f=g(e),h=f.cellsRange,n=f.getCellInfo(e),l=f.getHSideCell(e),p=f.getHSideCell(e,!0);if(x.isEmptyObject(h))f.deleteCol(n.colIndex);else for(n=h.beginColIndex;n<h.endColIndex+1;n++)f.deleteCol(h.beginColIndex);f=f.table;h=this.selection.getRange();f.getElementsByTagName("td").length?m.inDoc(e,this.document)?h.setStart(e,0).setCursor(!1,!0):
            p&&m.inDoc(p,this.document)?h.selectNodeContents(p).setCursor(!1,!0):l&&m.inDoc(l,this.document)&&h.selectNodeContents(l).setCursor(!0,!0):(e=f.nextSibling,m.remove(f),e&&h.setStart(e,0).setCursor(!1,!0))}};UE.commands.splittocells={queryCommandState:function(){var e=c(this),f=e.cell;return!f||0<g(e.table).selectedTds.length?-1:f&&(1<f.colSpan||1<f.rowSpan)?0:-1},execCommand:function(){var e=this.selection.getRange(),f=e.createBookmark(!0),h=c(this).cell;g(h).splitToCells(h);e.moveToBookmark(f).select()}};
        UE.commands.splittorows={queryCommandState:function(){var e=c(this),f=e.cell;return!f||0<g(e.table).selectedTds.length?-1:f&&1<f.rowSpan?0:-1},execCommand:function(){var e=this.selection.getRange(),f=e.createBookmark(!0),h=c(this).cell;g(h).splitToRows(h);e.moveToBookmark(f).select()}};UE.commands.splittocols={queryCommandState:function(){var e=c(this),f=e.cell;return!f||0<g(e.table).selectedTds.length?-1:f&&1<f.colSpan?0:-1},execCommand:function(){var e=this.selection.getRange(),f=e.createBookmark(!0),
                h=c(this).cell;g(h).splitToCols(h);e.moveToBookmark(f).select()}};UE.commands.adaptbytext=UE.commands.adaptbywindow={queryCommandState:function(){return c(this).table?0:-1},execCommand:function(e){var f=c(this).table;f&&("adaptbywindow"==e?k(f,this):(e=m.getElementsByTagName(f,"td th"),x.each(e,function(h){h.removeAttribute("width")}),f.removeAttribute("width")))}};UE.commands.averagedistributecol={queryCommandState:function(){var e=a.getUETableBySelected(this);return e?e.isFullRow()||e.isFullCol()?
                0:-1:-1},execCommand:function(e){function f(){var p=l.table,r=0,q=0,t=a.getDefaultValue(n,p);if(l.isFullRow())r=p.offsetWidth,q=l.colsNum;else{p=l.cellsRange.endColIndex;for(var u,w=l.cellsRange.beginColIndex;w<=p;)u=l.selectedTds[w],r+=u.offsetWidth,w+=u.colSpan,q+=1}return Math.ceil(r/q)-2*t.tdBorder-2*t.tdPadding}function h(p){x.each(m.getElementsByTagName(l.table,"th"),function(q){q.setAttribute("width","")});var r=l.isFullRow()?m.getElementsByTagName(l.table,"td"):l.selectedTds;x.each(r,function(q){1==
            q.colSpan&&q.setAttribute("width",p)})}var n=this,l=a.getUETableBySelected(n);l&&l.selectedTds.length&&h(f())}};UE.commands.averagedistributerow={queryCommandState:function(){var e=a.getUETableBySelected(this);return!e||e.selectedTds&&/th/ig.test(e.selectedTds[0].tagName)?-1:e.isFullRow()||e.isFullCol()?0:-1},execCommand:function(e){function f(){var p=0;var r=l.table;var q=a.getDefaultValue(n,r),t=parseInt(m.getComputedStyle(r.getElementsByTagName("td")[0],"padding-top"));if(l.isFullCol()){p=m.getElementsByTagName(r,
                "caption");var u=m.getElementsByTagName(r,"th");if(0<p.length)var w=p[0].offsetHeight;if(0<u.length)var v=u[0].offsetHeight;p=r.offsetHeight-(w||0)-(v||0);r=0==u.length?l.rowsNum:l.rowsNum-1}else{v=l.cellsRange.beginRowIndex;u=l.cellsRange.endRowIndex;w=0;for(r=m.getElementsByTagName(r,"tr");v<=u;v++)p+=r[v].offsetHeight,w+=1;r=w}return B.ie&&9>B.version?Math.ceil(p/r):Math.ceil(p/r)-2*q.tdBorder-2*t}function h(p){var r=l.isFullCol()?m.getElementsByTagName(l.table,"td"):l.selectedTds;x.each(r,function(q){1==
            q.rowSpan&&q.setAttribute("height",p)})}var n=this,l=a.getUETableBySelected(n);l&&l.selectedTds.length&&h(f())}};UE.commands.cellalignment={queryCommandState:function(){return c(this).table?0:-1},execCommand:function(e,f){(e=a.getUETableBySelected(this))?x.each(e.selectedTds,function(h){m.setAttributes(h,f)}):(e=(e=this.selection.getStart())&&m.findParentByTagName(e,["td","th","caption"],!0),/caption/ig.test(e.tagName)?(e.style.textAlign=f.align,e.style.verticalAlign=f.vAlign):m.setAttributes(e,f),
                this.selection.getRange().setCursor(!0))},queryCommandValue:function(e){(e=c(this).cell)||(e=d(this)[0]);if(e){var f=UE.UETable.getUETable(e).selectedTds;!f.length&&(f=e);return UE.UETable.getTableCellAlignState(f)}return null}};UE.commands.tablealignment={queryCommandState:function(){return B.ie&&8>B.version?-1:c(this).table?0:-1},execCommand:function(e,f){(e=(e=this.selection.getStart())&&m.findParentByTagName(e,["table"],!0))&&e.setAttribute("align",f)}};UE.commands.edittable={queryCommandState:function(){return c(this).table?
                0:-1},execCommand:function(e,f){e=this.selection.getRange();if(e=m.findParentByTagName(e.startContainer,"table"))e=m.getElementsByTagName(e,"td").concat(m.getElementsByTagName(e,"th"),m.getElementsByTagName(e,"caption")),x.each(e,function(h){h.style.borderColor=f})}};UE.commands.edittd={queryCommandState:function(){return c(this).table?0:-1},execCommand:function(e,f){if(e=a.getUETableBySelected(this))x.each(e.selectedTds,function(h){h.style.backgroundColor=f});else if(e=(e=this.selection.getStart())&&
                m.findParentByTagName(e,["td","th","caption"],!0))e.style.backgroundColor=f}};UE.commands.settablebackground={queryCommandState:function(){return 1<d(this).length?0:-1},execCommand:function(e,f){e=d(this);g(e[0]).setBackground(e,f)}};UE.commands.cleartablebackground={queryCommandState:function(){var e=d(this);if(!e.length)return-1;for(var f=0,h;h=e[f++];)if(""!==h.style.backgroundColor)return 0;return-1},execCommand:function(){var e=d(this);g(e[0]).removeBackground(e)}};UE.commands.interlacetable=
            UE.commands.uninterlacetable={queryCommandState:function(e){var f=c(this).table;if(!f)return-1;f=f.getAttribute("interlaced");return"interlacetable"==e?"enabled"===f?-1:0:f&&"disabled"!==f?0:-1},execCommand:function(e,f){var h=c(this).table;"interlacetable"==e?(h.setAttribute("interlaced","enabled"),this.fireEvent("interlacetable",h,f)):(h.setAttribute("interlaced","disabled"),this.fireEvent("uninterlacetable",h))}};UE.commands.setbordervisible={queryCommandState:function(e){return c(this).table?
                0:-1},execCommand:function(){var e=c(this).table;x.each(m.getElementsByTagName(e,"td"),function(f){f.style.borderWidth="1px";f.style.borderStyle="solid"})}}})();UE.plugins.table=function(){function k(z,F){b(z,"width",!0);b(z,"height",!0)}function b(z,F,G){z.style[F]&&(G&&z.setAttribute(F,parseInt(z.style[F],10)),z.style[F]="")}function d(z){if("TD"==z.tagName||"TH"==z.tagName)return z;var F;return(F=m.findParentByTagName(z,"td",!0)||m.findParentByTagName(z,"th",!0))?F:null}function a(z){var F=new RegExp(m.fillChar,
        "g");if(0<z[B.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(F,"").length)return 0;for(var G in M.$isNotEmpty)if(z.getElementsByTagName(G).length)return 0;return 1}function c(z){return z.pageX||z.pageY?{x:z.pageX,y:z.pageY}:{x:z.clientX+J.document.body.scrollLeft-J.document.body.clientLeft,y:z.clientY+J.document.body.scrollTop-J.document.body.clientTop}}function g(z){if(!H())try{var F=d(z.target||z.srcElement);va&&(J.body.style.webkitUserSelect="none",10<Math.abs(xa.x-z.clientX)||10<Math.abs(xa.y-
        z.clientY))&&(w(),va=!1,la=0,y(z));if(oa&&ma){la=0;J.body.style.webkitUserSelect="none";J.selection.getNative()[B.ie9below?"empty":"removeAllRanges"]();var G=c(z);n(J,!0,oa,G,F);if("h"==oa){var O=na.style;F=ma;var Q=ia(F);if(Q){var aa=Q.getSameEndPosCells(F,"x")[0],D=Q.getSameStartPosXCells(F)[0],K=c(z).x,N=(aa?m.getXY(aa).x:m.getXY(Q.table).x)+20,P=D?m.getXY(D).x+D.offsetWidth-20:J.body.offsetWidth+5||parseInt(m.getComputedStyle(J.body,"width"),10);N+=5;P-=5;var R=K<N?N:K>P?P:K}else R=void 0;O.left=
        R+"px"}else if("v"==oa){var U=na.style;a:{try{var V=m.getXY(ma).y,da=c(z).y;var W=da<V?V:da;break a}catch(ra){}W=void 0}U.top=W+"px"}}else if(F){if(!0!==J.fireEvent("excludetable",F)){G=c(z);var X=l(F,G),ha=m.findParentByTagName(F,"table",!0);h(ha,F,z,!0)?!0!==J.fireEvent("excludetable",ha)&&(J.body.style.cursor="url("+J.options.cursorpath+"h.png),pointer"):h(ha,F,z)?!0!==J.fireEvent("excludetable",ha)&&(J.body.style.cursor="url("+J.options.cursorpath+"v.png),pointer"):(J.body.style.cursor="text",
    /\d/.test(X)&&(X=X.replace(/\d/,""),F=ia(F).getPreviewCell(F,"v"==X)),n(J,F?!!X:!1,F?X:"",G,F))}}else e(!1,ha,J)}catch(ra){}}function e(z,F,G){z?f(F,G):ya||setTimeout(function(){!ya&&ea&&ea.parentNode&&ea.parentNode.removeChild(ea)},2E3)}function f(z,F){function G(D,K){clearTimeout(aa);aa=setTimeout(function(){F.fireEvent("tableClicked",z,K)},300)}var O=m.getXY(z),Q=z.ownerDocument;if(ea&&ea.parentNode)return ea;ea=Q.createElement("div");ea.contentEditable=!1;ea.innerHTML="";ea.style.cssText="width:15px;height:15px;background-image:url("+
        F.options.UEDITOR_HOME_URL+"dialogs/table/dragicon.png);position: absolute;cursor:move;top:"+(O.y-15)+"px;left:"+O.x+"px;";m.unSelectable(ea);ea.onmouseover=function(D){ya=!0};ea.onmouseout=function(D){ya=!1};m.on(ea,"click",function(D,K){G(K,this)});m.on(ea,"dblclick",function(D,K){clearTimeout(aa);D=ia(z);K=z.rows[0].cells[0];var N=D.getLastCell();N=D.getCellsRange(K,N);F.selection.getRange().setStart(K,0).setCursor(!1,!0);D.setSelected(N)});m.on(ea,"dragstart",function(D,K){m.preventDefault(K)});
        var aa;Q.body.appendChild(ea)}function h(z,F,G,O){G=c(G);F=l(F,G);return O?(O=(O=z.getElementsByTagName("caption")[0])?O.offsetHeight:0,"v1"==F&&8>G.y-m.getXY(z).y-O):"h1"==F&&8>G.x-m.getXY(z).x}function n(z,F,G,O,Q){try{z.body.style.cursor="h"==G?"col-resize":"v"==G?"row-resize":"text",B.ie&&(!G||sa||Z.getUETableBySelected(z)?pa(z):(ca(z,z.document),Ha(G,Q))),Da=F}catch(aa){}}function l(z,F){var G=m.getXY(z);return G?5>G.x+z.offsetWidth-F.x?"h":5>F.x-G.x?"h1":5>G.y+z.offsetHeight-F.y?"v":5>F.y-G.y?
        "v1":"":""}function p(z,F){if(!H())if(xa={x:F.clientX,y:F.clientY},2==F.button){z=Z.getUETableBySelected(J);var G=!1;if(z){var O=Ia(J,F);x.each(z.selectedTds,function(Q){Q===O&&(G=!0)});G?(O=z.selectedTds[0],setTimeout(function(){J.selection.getRange().setStart(O,0).setCursor(!1,!0)},0)):(Z.removeSelectedClass(m.getElementsByTagName(J.body,"th td")),z.clearSelected())}}else q(F)}function r(z){la=0;z=z||J.window.event;var F=d(z.target||z.srcElement);if(F){var G;if(G=l(F,c(z)))if(pa(J),"h1"==G&&(G=
        "h",h(m.findParentByTagName(F,"table"),F,z)?J.execCommand("adaptbywindow"):(F=ia(F).getPreviewCell(F))&&J.selection.getRange().selectNodeContents(F).setCursor(!0,!0)),"h"==G){z=ia(F);var O=L(F,z.table,!0);O=u(O,"left");z.width=z.offsetWidth;var Q=[],aa=[];x.each(O,function(D){Q.push(D.offsetWidth)});x.each(O,function(D){D.removeAttribute("width")});window.setTimeout(function(){var D=!0;x.each(O,function(N,P){N=N.offsetWidth;if(N>Q[P])return D=!1;aa.push(N)});var K=D?aa:Q;x.each(O,function(N,P){N.width=
        K[P]-Y()})},0)}}}function q(z){Z.removeSelectedClass(m.getElementsByTagName(J.body,"td th"));x.each(J.document.getElementsByTagName("table"),function(G){G.ueTable=null});if(fa=Ia(J,z)){var F=m.findParentByTagName(fa,"table",!0);(ut=ia(F))&&ut.clearSelected();Da?t(z):(J.document.body.style.webkitUserSelect="",sa=!0,J.addListener("mouseover",E))}}function t(z){B.ie&&(z=v(z));w();va=!0;za=setTimeout(function(){y(z)},360)}function u(z,F){for(var G=[],O,Q=0,aa=z.length;Q<aa;Q++)(O=z[Q][F])&&G.push(O);
        return G}function w(){za&&clearTimeout(za);za=null}function v(z){var F="pageX pageY clientX clientY srcElement target".split(" "),G={};if(z)for(var O=0,Q,aa;Q=F[O];O++)(aa=z[Q])&&(G[Q]=aa);return G}function y(z){va=!1;if(fa=z.target||z.srcElement)z=l(fa,c(z)),/\d/.test(z)&&(z=z.replace(/\d/,""),fa=ia(fa).getPreviewCell(fa,"v"==z)),pa(J),ca(J,J.document),J.fireEvent("saveScene"),Ha(z,fa),sa=!0,oa=z,ma=fa}function A(z,F){if(!H()){w();va=!1;if(Da&&(la=++la%3,xa={x:F.clientX,y:F.clientY},setTimeout(function(){0<
    la&&la--},360),2===la)){la=0;r(F);return}if(2!=F.button){z=this.selection.getRange();var G=m.findParentByTagName(z.startContainer,"table",!0),O=m.findParentByTagName(z.endContainer,"table",!0);if(G||O)G===O?(G=m.findParentByTagName(z.startContainer,["td","th","caption"],!0),O=m.findParentByTagName(z.endContainer,["td","th","caption"],!0),G!==O&&this.selection.clearRange()):this.selection.clearRange();sa=!1;this.document.body.style.webkitUserSelect="";if(oa&&ma&&(this.selection.getNative()[B.ie9below?
        "empty":"removeAllRanges"](),la=0,na=this.document.getElementById("ue_tableDragLine"))){F=m.getXY(ma);z=m.getXY(na);switch(oa){case "h":I(ma,z.x-F.x);break;case "v":T(ma,z.y-F.y-ma.offsetHeight)}oa="";ma=null;pa(this);this.fireEvent("saveScene");return}if(fa)(G=(z=ia(fa))?z.selectedTds[0]:null)?(z=new ja.Range(this.document),m.isEmptyBlock(G)?z.setStart(G,0).setCursor(!1,!0):z.selectNodeContents(G).shrinkBoundary().setCursor(!1,!0)):(z=this.selection.getRange().shrinkBoundary(),z.collapsed||(G=m.findParentByTagName(z.startContainer,
        ["td","th"],!0),O=m.findParentByTagName(z.endContainer,["td","th"],!0),(G&&!O||!G&&O||G&&O&&G!==O)&&z.setCursor(!1,!0))),fa=null,this.removeListener("mouseover",E);else if((G=m.findParentByTagName(F.target||F.srcElement,"td",!0))||(G=m.findParentByTagName(F.target||F.srcElement,"th",!0)),G&&("TD"==G.tagName||"TH"==G.tagName)){if(!0===this.fireEvent("excludetable",G))return;z=new ja.Range(this.document);z.setStart(G,0).setCursor(!1,!0)}this._selectionChange(250,F)}}}function E(z,F){if(!H()){z=F.target||
        F.srcElement;qa=m.findParentByTagName(z,"td",!0)||m.findParentByTagName(z,"th",!0);if(fa&&qa&&("TD"==fa.tagName&&"TD"==qa.tagName||"TH"==fa.tagName&&"TH"==qa.tagName)&&m.findParentByTagName(fa,"table")==m.findParentByTagName(qa,"table"))if(z=ia(qa),fa!=qa){this.document.body.style.webkitUserSelect="none";this.selection.getNative()[B.ie9below?"empty":"removeAllRanges"]();var G=z.getCellsRange(fa,qa);z.setSelected(G)}else this.document.body.style.webkitUserSelect="",z.clearSelected();F.preventDefault?
        F.preventDefault():F.returnValue=!1}}function I(z,F){var G=ia(z);if(G){G=G.table;var O=L(z,G);G.style.width="";G.removeAttribute("width");F=ba(F,z,O);z.nextSibling?x.each(O,function(Q){Q.left.width=+Q.left.width+F;Q.right&&(Q.right.width=+Q.right.width-F)}):x.each(O,function(Q){Q.left.width-=-F})}}function H(){return"false"===J.body.contentEditable}function T(z,F){if(!(10>Math.abs(F))){var G=ia(z);if(G){z=G.getSameEndPosCells(z,"y");G=z[0]?z[0].offsetHeight:0;for(var O=0,Q;Q=z[O++];){var aa=F,D=G,
        K=parseInt(m.getComputedStyle(Q,"line-height"),10);aa=D+aa;Q.style.height&&(Q.style.height="");1==Q.rowSpan?Q.setAttribute("height",aa<K?K:aa):Q.removeAttribute&&Q.removeAttribute("height")}}}}function L(z,F,G){F||(F=m.findParentByTagName(z,"table"));if(!F)return null;m.getNodeIndex(z);F=F.rows;for(var O=0;z;)1===z.nodeType&&(O+=z.colSpan||1),z=z.previousSibling;z=null;var Q=[];x.each(F,function(aa){var D=0;x.each(aa.cells,function(K){D+=K.colSpan||1;if(D===O)return Q.push({left:K,right:K.nextSibling||
            null}),!1;if(D>O)return G&&Q.push({left:K}),!1})});return Q}function ba(z,F,G){z-=Y();if(0>z)return 0;z-=S(F);var O=0>z?"left":"right";z=Math.abs(z);x.each(G,function(Q){(Q=Q[O])&&(z=Math.min(z,S(Q)-5))});z=0>z?0:z;return"left"===O?-z:z}function S(z){var F=z.offsetWidth-Y();if(!z.nextSibling){tab=m.findParentByTagName(z,"table",!1);if(void 0===tab.offsetVal){var G=z.previousSibling;tab.offsetVal=G?z.offsetWidth-G.offsetWidth===Z.borderWidth?Z.borderWidth:0:0}F-=tab.offsetVal}F=0>F?0:F;try{z.width=
        F}catch(O){}return F}function Y(){if(void 0===Z.tabcellSpace){var z=J.document.createElement("table"),F=J.document.createElement("tbody"),G=J.document.createElement("tr"),O=J.document.createElement("td"),Q=null;O.style.cssText="border: 0;";O.width=1;G.appendChild(O);G.appendChild(Q=O.cloneNode(!1));F.appendChild(G);z.appendChild(F);z.style.cssText="visibility: hidden;";J.body.appendChild(z);Z.paddingSpace=O.offsetWidth-1;F=z.offsetWidth;O.style.cssText="";Q.style.cssText="";Z.borderWidth=(z.offsetWidth-
        F)/3;Z.tabcellSpace=Z.paddingSpace+Z.borderWidth;J.body.removeChild(z)}Y=function(){return Z.tabcellSpace};return Z.tabcellSpace}function ca(z,F){sa||(na=z.document.createElement("div"),m.setAttributes(na,{id:"ue_tableDragLine",unselectable:"on",contenteditable:!1,onresizestart:"return false",ondragstart:"return false",onselectstart:"return false",style:"background-color:blue;position:absolute;padding:0;margin:0;background-image:none;border:0px none;opacity:0;filter:alpha(opacity=0)"}),z.body.appendChild(na))}
        function pa(z){if(!sa)for(var F;F=z.document.getElementById("ue_tableDragLine");)m.remove(F)}function Ha(z,F){if(F){var G=m.findParentByTagName(F,"table"),O=G.getElementsByTagName("caption"),Q=G.offsetWidth,aa=G.offsetHeight-(0<O.length?O[0].offsetHeight:0);G=m.getXY(G);var D=m.getXY(F);switch(z){case "h":z="height:"+aa+"px;top:"+(G.y+(0<O.length?O[0].offsetHeight:0))+"px;left:"+(D.x+F.offsetWidth);na.style.cssText=z+"px;position: absolute;display:block;background-color:blue;width:1px;border:0; color:blue;opacity:.3;filter:alpha(opacity=30)";
            break;case "v":z="width:"+Q+"px;left:"+G.x+"px;top:"+(D.y+F.offsetHeight),na.style.cssText=z+"px;overflow:hidden;position: absolute;display:block;background-color:blue;height:1px;border:0;color:blue;opacity:.2;filter:alpha(opacity=20)"}}}function Ea(z,F){z=m.getElementsByTagName(z.body,"table");for(var G,O=0,Q;Q=z[O++];)G=m.getElementsByTagName(Q,"td"),G[0]&&(F?(G=G[0].style.borderColor.replace(/\s/g,""),/(#ffffff)|(rgb\(255,255,255\))/ig.test(G)&&m.addClass(Q,"noBorderTable")):m.removeClasses(Q,
            "noBorderTable"))}function La(z,F,G){var O=z.body;return O.offsetWidth-(F?2*parseInt(m.getComputedStyle(O,"margin-left"),10):0)-2*G.tableBorder-(z.options.offsetWidth||0)}function Ia(z,F){var G=m.findParentByTagName(F.target||F.srcElement,["td","th"],!0);if(!G)return null;var O=l(G,c(F));if(!G)return null;if("h1"===O&&G.previousSibling){O=m.getXY(G);var Q=G.offsetWidth;Math.abs(O.x+Q-F.clientX)>Q/3&&(G=G.previousSibling)}else"v1"===O&&G.parentNode.previousSibling&&(O=m.getXY(G),Q=G.offsetHeight,Math.abs(O.y+
            Q-F.clientY)>Q/3&&(G=G.parentNode.previousSibling.firstChild));return G&&!0!==z.fireEvent("excludetable",G)?G:null}var J=this,za=null,va=!1,la=0,xa=null,Z=UE.UETable,ia=function(z){return Z.getUETable(z)};J.ready(function(){var z=this,F=z.selection.getText;z.selection.getText=function(){var G=Z.getUETableBySelected(z);if(G){var O="";x.each(G.selectedTds,function(Q){O+=Q[B.ie?"innerText":"textContent"]});return O}return F.call(z.selection)}});var fa=null,qa=null,oa="",Da=!1,ea=null,ya=!1,na=null,ma=
            null,sa=!1;J.setOpt({maxColNum:20,maxRowNum:100,defaultCols:5,defaultRows:5,tdvalign:"top",cursorpath:J.options.UEDITOR_HOME_URL+"themes/default/images/cursor_",tableDragable:!1,classList:["ue-table-interlace-color-single","ue-table-interlace-color-double"]});J.getUETable=ia;var Ma={deletetable:1,inserttable:1,cellvalign:1,insertcaption:1,deletecaption:1,inserttitle:1,deletetitle:1,mergeright:1,mergedown:1,mergecells:1,insertrow:1,insertrownext:1,deleterow:1,insertcol:1,insertcolnext:1,deletecol:1,
            splittocells:1,splittorows:1,splittocols:1,adaptbytext:1,adaptbywindow:1,adaptbycustomer:1,insertparagraph:1,insertparagraphbeforetable:1,averagedistributecol:1,averagedistributerow:1};J.ready(function(){x.cssRule("table",".selectTdClass{background-color:#edf5fa !important}table.noBorderTable td,table.noBorderTable th,table.noBorderTable caption{border:1px dashed #ddd !important}table{margin-bottom:10px;border-collapse:collapse;display:table;}td,th{padding: 5px 10px;border: 1px solid #DDD;}caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center;}th{border-top:1px solid #BBB;background-color:#F7F7F7;}table tr.firstRow th{border-top-width:2px;}.ue-table-interlace-color-single{ background-color: #fcfcfc; } .ue-table-interlace-color-double{ background-color: #f7faff; }td p{margin:0;padding:0;}",
            J.document);var z,F,G;J.addListener("keydown",function(D,K){D=K.keyCode||K.which;if(8==D){var N=Z.getUETableBySelected(this);N&&N.selectedTds.length&&(N.isFullCol()?this.execCommand("deletecol"):N.isFullRow()?this.execCommand("deleterow"):this.fireEvent("delcells"),m.preventDefault(K));var P=m.findParentByTagName(this.selection.getStart(),"caption",!0),R=this.selection.getRange();R.collapsed&&P&&a(P)&&(this.fireEvent("saveScene"),N=P.parentNode,m.remove(P),N&&R.setStart(N.rows[0].cells[0],0).setCursor(!1,
            !0),this.fireEvent("saveScene"))}if(46==D&&(N=Z.getUETableBySelected(this))){this.fireEvent("saveScene");for(P=0;R=N.selectedTds[P++];)m.fillNode(this.document,R);this.fireEvent("saveScene");m.preventDefault(K)}if(13==D){D=this.selection.getRange();if(P=m.findParentByTagName(D.startContainer,"caption",!0)){N=m.findParentByTagName(P,"table");D.collapsed?P&&D.setStart(N.rows[0].cells[0],0).setCursor(!1,!0):(D.deleteContents(),this.fireEvent("saveScene"));m.preventDefault(K);return}D.collapsed&&(N=m.findParentByTagName(D.startContainer,
            "table"))&&(R=N.rows[0].cells[0],P=m.findParentByTagName(this.selection.getStart(),["td","th"],!0),N=N.previousSibling,R===P&&(!N||1==N.nodeType&&"TABLE"==N.tagName)&&m.isStartInblock(D)&&(D=m.findParent(this.selection.getStart(),function(U){return m.isBlockElm(U)},!0))&&(/t(h|d)/i.test(D.tagName)||D===P.firstChild)&&(this.execCommand("insertparagraphbeforetable"),m.preventDefault(K)))}if((K.ctrlKey||K.metaKey)&&"67"==K.keyCode&&(z=null,N=Z.getUETableBySelected(this)))for(K=N.selectedTds,F=N.isFullCol(),
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             G=N.isFullRow(),z=[[N.cloneCell(K[0],null,!0)]],P=1;R=K[P];P++)R.parentNode!==K[P-1].parentNode?z.push([N.cloneCell(R,null,!0)]):z[z.length-1].push(N.cloneCell(R,null,!0))});J.addListener("tablehasdeleted",function(){n(this,!1,"",null);ea&&m.remove(ea)});J.addListener("beforepaste",function(D,K){var N=this;D=N.selection.getRange();if(m.findParentByTagName(D.startContainer,"caption",!0))D=N.document.createElement("div"),D.innerHTML=K.html,K.html=D[B.ie9below?"innerText":"textContent"];else{var P=Z.getUETableBySelected(N);
            if(z){N.fireEvent("saveScene");D=N.selection.getRange();var R=m.findParentByTagName(D.startContainer,["td","th"],!0);if(R){P=ia(R);if(G){var U=P.getCellInfo(R).rowIndex;"TH"==R.tagName&&U++;D=0;for(var V;V=z[D++];){var da=P.insertRow(U++,"td");for(var W=0,X;X=V[W];W++)(R=da.cells[W])||(R=da.insertCell(W)),R.innerHTML=X.innerHTML,X.getAttribute("width")&&R.setAttribute("width",X.getAttribute("width")),X.getAttribute("vAlign")&&R.setAttribute("vAlign",X.getAttribute("vAlign")),X.getAttribute("align")&&
            R.setAttribute("align",X.getAttribute("align")),X.style.cssText&&(R.style.cssText=X.style.cssText);for(W=0;(X=da.cells[W])&&V[W];W++)X.innerHTML=V[W].innerHTML,V[W].getAttribute("width")&&X.setAttribute("width",V[W].getAttribute("width")),V[W].getAttribute("vAlign")&&X.setAttribute("vAlign",V[W].getAttribute("vAlign")),V[W].getAttribute("align")&&X.setAttribute("align",V[W].getAttribute("align")),V[W].style.cssText&&(X.style.cssText=V[W].style.cssText)}}else{if(F){U=P.getCellInfo(R);W=R=0;for(V=z[0];X=
                V[W++];)R+=X.colSpan||1;N.__hasEnterExecCommand=!0;for(D=0;D<R;D++)N.execCommand("insertcol");N.__hasEnterExecCommand=!1;R=P.table.rows[0].cells[U.cellIndex];"TH"==R.tagName&&(R=P.table.rows[1].cells[U.cellIndex])}for(D=0;V=z[D++];){var ha=R;for(W=0;X=V[W++];)R?(R.innerHTML=X.innerHTML,X.getAttribute("width")&&R.setAttribute("width",X.getAttribute("width")),X.getAttribute("vAlign")&&R.setAttribute("vAlign",X.getAttribute("vAlign")),X.getAttribute("align")&&R.setAttribute("align",X.getAttribute("align")),
            X.style.cssText&&(R.style.cssText=X.style.cssText),da=R,R=R.nextSibling):(U=X.cloneNode(!0),m.removeAttributes(U,["class","rowSpan","colSpan"]),da.parentNode.appendChild(U));R=P.getNextCell(ha,!0,!0);if(!z[D])break;R||(U=P.getCellInfo(ha),P.table.insertRow(P.table.rows.length),P.update(),R=P.getVSideCell(ha,!0))}}P.update()}else{P=N.document.createElement("table");for(D=0;V=z[D++];){da=P.insertRow(P.rows.length);for(W=0;X=V[W++];)U=Z.cloneCell(X,null,!0),m.removeAttributes(U,["class"]),da.appendChild(U);
                2==W&&1<U.rowSpan&&(U.rowSpan=1)}D=Z.getDefaultValue(N,void 0);D=N.body.offsetWidth-2*parseInt(m.getComputedStyle(N.body,"margin-left"),10)-2*D.tableBorder-(N.options.offsetWidth||0);N.execCommand("insertHTML","<table  "+(F&&G?'width="'+D+'"':"")+">"+P.innerHTML.replace(/>\s*</g,"><").replace(/\bth\b/gi,"td")+"</table>")}N.fireEvent("contentchange");N.fireEvent("saveScene");K.html="";return!0}D=N.document.createElement("div");D.innerHTML=K.html;V=D.getElementsByTagName("table");m.findParentByTagName(N.selection.getStart(),
                "table")?(x.each(V,function(ra){m.remove(ra)}),m.findParentByTagName(N.selection.getStart(),"caption",!0)&&(D.innerHTML=D[B.ie?"innerText":"textContent"])):x.each(V,function(ra){k(ra,!0);m.removeAttributes(ra,["style","border"]);x.each(m.getElementsByTagName(ra,"td"),function(Fa){a(Fa)&&m.fillNode(N.document,Fa);k(Fa,!0)})});K.html=D.innerHTML}});J.addListener("afterpaste",function(){x.each(m.getElementsByTagName(J.body,"table"),function(D){if(D.offsetWidth>J.body.offsetWidth){var K=Z.getDefaultValue(J,
            D);D.style.width=J.body.offsetWidth-2*parseInt(m.getComputedStyle(J.body,"margin-left"),10)-2*K.tableBorder-(J.options.offsetWidth||0)+"px"}})});J.addListener("blur",function(){z=null});var O;J.addListener("keydown",function(){clearTimeout(O);O=setTimeout(function(){var D=J.selection.getRange();if(D=m.findParentByTagName(D.startContainer,["th","td"],!0)){var K=D.parentNode.parentNode.parentNode;K.offsetWidth>K.getAttribute("width")&&(D.style.wordBreak="break-all")}},100)});J.addListener("selectionchange",
            function(){n(J,!1,"",null)});J.addListener("contentchange",function(){var D=this;pa(D);if(!Z.getUETableBySelected(D)){var K=D.selection.getRange().startContainer;K=m.findParentByTagName(K,["td","th"],!0);x.each(m.getElementsByTagName(D.document,"table"),function(N){!0!==D.fireEvent("excludetable",N)&&(N.ueTable=new Z(N),N.onmouseover=function(){D.fireEvent("tablemouseover",N)},N.onmousemove=function(){D.fireEvent("tablemousemove",N);D.options.tableDragable&&e(!0,this,D);x.defer(function(){D.fireEvent("contentchange",
            50)},!0)},N.onmouseout=function(){D.fireEvent("tablemouseout",N);n(D,!1,"",null);pa(D)},N.onclick=function(P){P=D.window.event||P;var R=d(P.target||P.srcElement);if(R){var U=ia(R),V=U.table,da=U.getCellInfo(R),W=D.selection.getRange();h(V,R,P,!0)?(V=U.getCell(U.indexTable[U.rowsNum-1][da.colIndex].rowIndex,U.indexTable[U.rowsNum-1][da.colIndex].cellIndex),P.shiftKey&&U.selectedTds.length?U.selectedTds[0]!==V?(P=U.getCellsRange(U.selectedTds[0],V),U.setSelected(P)):W&&W.selectNodeContents(V).select():
            R!==V?(P=U.getCellsRange(R,V),U.setSelected(P)):W&&W.selectNodeContents(V).select()):h(V,R,P)&&(V=U.getCell(U.indexTable[da.rowIndex][U.colsNum-1].rowIndex,U.indexTable[da.rowIndex][U.colsNum-1].cellIndex),P.shiftKey&&U.selectedTds.length?U.selectedTds[0]!==V?(P=U.getCellsRange(U.selectedTds[0],V),U.setSelected(P)):W&&W.selectNodeContents(V).select():R!==V?(P=U.getCellsRange(R,V),U.setSelected(P)):W&&W.selectNodeContents(V).select())}})});Ea(D,!0)}});m.on(J.document,"mousemove",g);m.on(J.document,
            "mouseout",function(D){"TABLE"==(D.target||D.srcElement).tagName&&n(J,!1,"",null)});J.addListener("interlacetable",function(D,K,N){if(K){D=K.rows;K=D.length;for(var P=0;P<K;P++){var R=N||this.options.classList;D[P].className=R[P]?R[P]:R[P%R.length]}}});J.addListener("uninterlacetable",function(D,K){if(K){D=K.rows;K=this.options.classList;for(var N=D.length,P=0;P<N;P++)m.removeClasses(D[P],K)}});J.addListener("mousedown",p);J.addListener("mouseup",A);m.on(J.body,"dragstart",function(D){A.call(J,"dragstart",
            D)});J.addOutputRule(function(D){x.each(D.getNodesByTagName("div"),function(K){"ue_tableDragLine"==K.getAttr("id")&&K.parentNode.removeChild(K)})});var Q=0;J.addListener("mousedown",function(){Q=0});J.addListener("tabkeydown",function(){var D=this.selection.getRange(),K=D.getCommonAncestor(!0,!0),N=m.findParentByTagName(K,"table");if(N){if(m.findParentByTagName(K,"caption",!0))(K=m.getElementsByTagName(N,"th td"))&&K.length&&D.setStart(K[0],0).setCursor(!1,!0);else{K=m.findParentByTagName(K,["td",
            "th"],!0);var P=ia(K);Q=1<K.rowSpan?Q:P.getCellInfo(K).rowIndex;(K=P.getTabNextCell(K,Q))?a(K)?D.setStart(K,0).setCursor(!1,!0):D.selectNodeContents(K).select():(J.fireEvent("saveScene"),J.__hasEnterExecCommand=!0,this.execCommand("insertrownext"),J.__hasEnterExecCommand=!1,D=this.selection.getRange(),D.setStart(N.rows[N.rows.length-1].cells[0],0).setCursor(),J.fireEvent("saveScene"))}return!0}});B.ie&&J.addListener("selectionchange",function(){n(this,!1,"",null)});J.addListener("keydown",function(D,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   K){D=K.keyCode||K.which;8!=D&&46!=D&&((K=!K.ctrlKey&&!K.metaKey&&!K.shiftKey&&!K.altKey)&&Z.removeSelectedClass(m.getElementsByTagName(this.body,"td")),(D=Z.getUETableBySelected(this))&&K&&D.clearSelected())});J.addListener("beforegetcontent",function(){Ea(this,!1);B.ie&&x.each(this.document.getElementsByTagName("caption"),function(D){m.isEmptyNode(D)&&(D.innerHTML="&nbsp;")})});J.addListener("aftergetcontent",function(){Ea(this,!0)});J.addListener("getAllHtml",function(){Z.removeSelectedClass(J.document.getElementsByTagName("td"))});
            J.addListener("fullscreenchanged",function(D,K){if(!K){var N=this.body.offsetWidth/document.body.offsetWidth;D=m.getElementsByTagName(this.body,"table");x.each(D,function(P){if(P.offsetWidth<J.body.offsetWidth)return!1;var R=m.getElementsByTagName(P,"td"),U=[];x.each(R,function(W){U.push(W.offsetWidth)});for(var V=0,da;da=R[V];V++)da.setAttribute("width",Math.floor(U[V]*N));P.setAttribute("width",Math.floor(La(J,!0,Z.getDefaultValue(J,void 0))))})}});var aa=J.execCommand;J.execCommand=function(D,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               K){D=D.toLowerCase();var N=Z.getUETableBySelected(this),P=new ja.Range(this.document),R=this.commands[D]||UE.commands[D];if(R){if(!N||Ma[D]||R.notNeedUndo||this.__hasEnterExecCommand)var U=aa.apply(this,arguments);else{this.__hasEnterExecCommand=!0;this.fireEvent("beforeexeccommand",D);N=N.selectedTds;for(var V=R=-2,da,W,X=0,ha;ha=N[X];X++)if(a(ha)?P.setStart(ha,0).setCursor(!1,!0):P.selectNode(ha).select(!0),W=this.queryCommandState(D),da=this.queryCommandValue(D),-1!=W){if(R!==W||V!==da)this._ignoreContentChange=
                !0,U=aa.apply(this,arguments),this._ignoreContentChange=!1;R=this.queryCommandState(D);V=this.queryCommandValue(D);m.isEmptyBlock(ha)&&m.fillNode(this.document,ha)}P.setStart(N[0],0).shrinkBoundary(!0).setCursor(!1,!0);this.fireEvent("contentchange");this.fireEvent("afterexeccommand",D);this.__hasEnterExecCommand=!1;this._selectionChange()}return U}}})};UE.UETable.prototype.sortTable=function(k,b){var d=this.table,a=d.rows,c=[],g="TH"===a[0].cells[0].tagName,e=0;if(this.selectedTds.length){for(var f=
        this.cellsRange,h=f.endRowIndex+1,n=f.beginRowIndex;n<h;n++)c[n]=a[n];c.splice(0,f.beginRowIndex);e=f.endRowIndex+1===this.rowsNum?0:f.endRowIndex+1}else for(n=0,h=a.length;n<h;n++)c[n]=a[n];var l={reversecurrent:function(p,r){return 1},orderbyasc:function(p,r){return(p.innerText||p.textContent).localeCompare(r.innerText||r.textContent)},reversebyasc:function(p,r){return r.innerHTML.localeCompare(p.innerHTML)},orderbynum:function(p,r){p=p[B.ie?"innerText":"textContent"].match(/\d+/);r=r[B.ie?"innerText":
            "textContent"].match(/\d+/);p&&(p=+p[0]);r&&(r=+r[0]);return(p||0)-(r||0)},reversebynum:function(p,r){p=p[B.ie?"innerText":"textContent"].match(/\d+/);r=r[B.ie?"innerText":"textContent"].match(/\d+/);p&&(p=+p[0]);r&&(r=+r[0]);return(r||0)-(p||0)}};d.setAttribute("data-sort-type",b&&"string"===typeof b&&l[b]?b:"");g&&c.splice(0,1);c=x.sort(c,function(p,r){return b&&"function"===typeof b?b.call(this,p.cells[k],r.cells[k]):b&&"number"===typeof b?1:b&&"string"===typeof b&&l[b]?l[b].call(this,p.cells[k],
        r.cells[k]):l.orderbyasc.call(this,p.cells[k],r.cells[k])});g=d.ownerDocument.createDocumentFragment();n=0;for(h=c.length;n<h;n++)g.appendChild(c[n]);d=d.getElementsByTagName("tbody")[0];e?d.insertBefore(g,a[e-f.endRowIndex+f.beginRowIndex-1]):d.appendChild(g)};UE.plugins.tablesort=function(){var k=this,b=UE.UETable;k.ready(function(){x.cssRule("tablesort","table.sortEnabled tr.firstRow th,table.sortEnabled tr.firstRow td{padding-right:20px;background-repeat: no-repeat;background-position: center right;   background-image:url("+
        k.options.themePath+k.options.theme+"/images/sortable.png);}",k.document);k.addListener("afterexeccommand",function(d,a){"mergeright"!=a&&"mergedown"!=a&&"mergecells"!=a||this.execCommand("disablesort")})});UE.commands.sorttable={queryCommandState:function(){var d=b.getTableItemsByRange(this);if(!d.cell)return-1;d=d.table.getElementsByTagName("td");for(var a=0,c;c=d[a++];)if(1!=c.rowSpan||1!=c.colSpan)return-1;return 0},execCommand:function(d,a){d=this.selection.getRange();var c=d.createBookmark(!0),
            g=b.getTableItemsByRange(this),e=g.cell;g=b.getUETable(g.table);e=g.getCellInfo(e);g.sortTable(e.cellIndex,a);d.moveToBookmark(c);try{d.select()}catch(f){}}};UE.commands.enablesort=UE.commands.disablesort={queryCommandState:function(d){var a=b.getTableItemsByRange(this).table;if(a&&"enablesort"==d)for(var c=m.getElementsByTagName(a,"th td"),g=0;g<c.length;g++)if(1<c[g].getAttribute("colspan")||1<c[g].getAttribute("rowspan"))return-1;return a?"enablesort"==d^"sortEnabled"!=a.getAttribute("data-sort")?
            -1:0:-1},execCommand:function(d){var a=b.getTableItemsByRange(this).table;a.setAttribute("data-sort","enablesort"==d?"sortEnabled":"sortDisabled");"enablesort"==d?m.addClass(a,"sortEnabled"):m.removeClasses(a,"sortEnabled")}}};UE.plugins.contextmenu=function(){var k=this;k.setOpt("enableContextMenu",!0);if(!1!==k.getOpt("enableContextMenu")){var b=k.getLang("contextMenu"),d,a=k.options.contextMenu||[{label:b.selectall,cmdName:"selectall"},{label:b.cleardoc,cmdName:"cleardoc",exec:function(){confirm(b.confirmclear)&&
        this.execCommand("cleardoc")}},"-",{label:b.unlink,cmdName:"unlink"},"-",{group:b.paragraph,icon:"justifyjustify",subMenu:[{label:b.justifyleft,cmdName:"justify",value:"left"},{label:b.justifyright,cmdName:"justify",value:"right"},{label:b.justifycenter,cmdName:"justify",value:"center"},{label:b.justifyjustify,cmdName:"justify",value:"justify"}]},"-",{group:b.table,icon:"table",subMenu:[{label:b.inserttable,cmdName:"inserttable"},{label:b.deletetable,cmdName:"deletetable"},"-",{label:b.deleterow,
            cmdName:"deleterow"},{label:b.deletecol,cmdName:"deletecol"},{label:b.insertcol,cmdName:"insertcol"},{label:b.insertcolnext,cmdName:"insertcolnext"},{label:b.insertrow,cmdName:"insertrow"},{label:b.insertrownext,cmdName:"insertrownext"},"-",{label:b.insertcaption,cmdName:"insertcaption"},{label:b.deletecaption,cmdName:"deletecaption"},{label:b.inserttitle,cmdName:"inserttitle"},{label:b.deletetitle,cmdName:"deletetitle"},{label:b.inserttitlecol,cmdName:"inserttitlecol"},{label:b.deletetitlecol,cmdName:"deletetitlecol"},
            "-",{label:b.mergecells,cmdName:"mergecells"},{label:b.mergeright,cmdName:"mergeright"},{label:b.mergedown,cmdName:"mergedown"},"-",{label:b.splittorows,cmdName:"splittorows"},{label:b.splittocols,cmdName:"splittocols"},{label:b.splittocells,cmdName:"splittocells"},"-",{label:b.averageDiseRow,cmdName:"averagedistributerow"},{label:b.averageDisCol,cmdName:"averagedistributecol"},"-",{label:b.edittd,cmdName:"edittd",exec:function(){UE.ui.edittd&&new UE.ui.edittd(this);this.getDialog("edittd").open()}},
            {label:b.edittable,cmdName:"edittable",exec:function(){UE.ui.edittable&&new UE.ui.edittable(this);this.getDialog("edittable").open()}},{label:b.setbordervisible,cmdName:"setbordervisible"}]},{group:b.tablesort,icon:"tablesort",subMenu:[{label:b.enablesort,cmdName:"enablesort"},{label:b.disablesort,cmdName:"disablesort"},"-",{label:b.reversecurrent,cmdName:"sorttable",value:"reversecurrent"},{label:b.orderbyasc,cmdName:"sorttable",value:"orderbyasc"},{label:b.reversebyasc,cmdName:"sorttable",value:"reversebyasc"},
            {label:b.orderbynum,cmdName:"sorttable",value:"orderbynum"},{label:b.reversebynum,cmdName:"sorttable",value:"reversebynum"}]},{group:b.borderbk,icon:"borderBack",subMenu:[{label:b.setcolor,cmdName:"interlacetable",exec:function(){this.execCommand("interlacetable")}},{label:b.unsetcolor,cmdName:"uninterlacetable",exec:function(){this.execCommand("uninterlacetable")}},{label:b.setbackground,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["#bbb",
                    "#ccc"]})}},{label:b.unsetbackground,cmdName:"cleartablebackground",exec:function(){this.execCommand("cleartablebackground")}},{label:b.redandblue,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["red","blue"]})}},{label:b.threecolorgradient,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["#aaa","#bbb","#ccc"]})}}]},{group:b.aligntd,icon:"aligntd",subMenu:[{cmdName:"cellalignment",value:{align:"left",
                vAlign:"top"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"right",
                vAlign:"bottom"}}]},{group:b.aligntable,icon:"aligntable",subMenu:[{cmdName:"tablealignment",className:"left",label:b.tableleft,value:"left"},{cmdName:"tablealignment",className:"center",label:b.tablecenter,value:"center"},{cmdName:"tablealignment",className:"right",label:b.tableright,value:"right"}]},"-",{label:b.insertparagraphbefore,cmdName:"insertparagraph",value:!0},{label:b.insertparagraphafter,cmdName:"insertparagraph"},{label:b.copy,cmdName:"copy"},{label:b.paste,cmdName:"paste"}];if(a.length){var c=
        UE.ui.uiUtils;k.addListener("contextmenu",function(g,e){g=c.getViewportOffsetByEvent(e);k.fireEvent("beforeselectionchange");d&&d.destroy();for(var f=0,h,n=[];h=a[f];f++){var l;(function(r){if("-"==r)(l=n[n.length-1])&&"-"!==l&&n.push("-");else if(r.hasOwnProperty("group")){for(var q=0,t,u=[];t=r.subMenu[q];q++)(function(w){"-"==w?(l=u[u.length-1])&&"-"!==l?u.push("-"):u.splice(u.length-1):(k.commands[w.cmdName]||UE.commands[w.cmdName]||w.query)&&-1<(w.query?w.query():k.queryCommandState(w.cmdName))&&
        u.push({label:w.label||k.getLang("contextMenu."+w.cmdName+(w.value||""))||"",className:"edui-for-"+w.cmdName+(w.className?" edui-for-"+w.cmdName+"-"+w.className:""),onclick:w.exec?function(){w.exec.call(k)}:function(){k.execCommand(w.cmdName,w.value)}})})(t);u.length&&n.push({label:function(){switch(r.icon){case "table":return k.getLang("contextMenu.table");case "justifyjustify":return k.getLang("contextMenu.paragraph");case "aligntd":return k.getLang("contextMenu.aligntd");case "aligntable":return k.getLang("contextMenu.aligntable");
            case "tablesort":return b.tablesort;case "borderBack":return b.borderbk;default:return""}}(),className:"edui-for-"+r.icon,subMenu:{items:u,editor:k}})}else(k.commands[r.cmdName]||UE.commands[r.cmdName]||r.query)&&-1<(r.query?r.query.call(k):k.queryCommandState(r.cmdName))&&n.push({label:r.label||k.getLang("contextMenu."+r.cmdName),className:"edui-for-"+(r.icon?r.icon:r.cmdName+(r.value||"")),onclick:r.exec?function(){r.exec.call(k)}:function(){k.execCommand(r.cmdName,r.value)}})})(h)}"-"==n[n.length-
    1]&&n.pop();d=new UE.ui.Menu({items:n,className:"edui-contextmenu",editor:k});d.render();d.showAt(g);k.fireEvent("aftershowcontextmenu",d);m.preventDefault(e);if(B.ie){try{var p=k.selection.getNative().createRange()}catch(r){return}p.item&&(new ja.Range(k.document)).selectNode(p.item(0)).select(!0,!0)}});k.addListener("aftershowcontextmenu",function(g,e){if(k.zeroclipboard){g=e.items;for(var f in g)"edui-for-copy"==g[f].className&&k.zeroclipboard.clip(g[f].getDom())}})}}};UE.plugins.shortcutmenu=
        function(){var k,b=this.options.shortcutMenu||[];b.length&&(this.addListener("contextmenu mouseup",function(d,a){var c=this,g={type:d,target:a.target||a.srcElement,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY};setTimeout(function(){if(!1===c.selection.getRange().collapsed||"contextmenu"==d)k||(k=new C.editor.ui.ShortCutMenu({editor:c,items:b,theme:c.options.theme,className:"edui-shortcutmenu"}),k.render(),c.fireEvent("afterrendershortcutmenu",k)),k.show(g,!!UE.plugins.contextmenu)});
            if("contextmenu"==d&&(m.preventDefault(a),B.ie9below)){try{var e=c.selection.getNative().createRange()}catch(f){return}e.item&&(new ja.Range(c.document)).selectNode(e.item(0)).select(!0,!0)}}),this.addListener("keydown",function(d){"keydown"==d&&k&&!k.isHidden&&k.hide()}))};UE.plugins.basestyle=function(){var k={bold:["strong","b"],italic:["em","i"],subscript:["sub"],superscript:["sup"]},b=function(c,g){return m.filterNodeList(c.selection.getStartElementPath(),g)},d=this;d.addshortcutkey({Bold:"ctrl+66",
        Italic:"ctrl+73",Underline:"ctrl+85"});d.addInputRule(function(c){x.each(c.getNodesByTagName("b i"),function(g){switch(g.tagName){case "b":g.tagName="strong";break;case "i":g.tagName="em"}})});for(var a in k)(function(c,g){d.commands[c]={execCommand:function(e){var f=d.selection.getRange(),h=b(this,g);if(f.collapsed){if(h)e=d.document.createTextNode(""),f.insertNode(e).removeInlineStyle(g),f.setStartBefore(e),m.remove(e);else{h=f.document.createElement(g[0]);if("superscript"==e||"subscript"==e)e=
            d.document.createTextNode(""),f.insertNode(e).removeInlineStyle(["sub","sup"]).setStartBefore(e).collapse(!0);f.insertNode(h).setStart(h,0)}f.collapse(!0)}else{if("superscript"==e||"subscript"==e)h&&h.tagName.toLowerCase()==e||f.removeInlineStyle(["sub","sup"]);h?f.removeInlineStyle(g):f.applyInlineStyle(g[0])}f.select()},queryCommandState:function(){return b(this,g)?1:0}}})(a,k[a])};UE.plugins.elementpath=function(){var k,b,d=this;d.setOpt("elementPathEnabled",!0);d.options.elementPathEnabled&&(d.commands.elementpath=
        {execCommand:function(a,c){a=b[c];var g=d.selection.getRange();k=1*c;g.selectNode(a).select()},queryCommandValue:function(){var a=[].concat(this.selection.getStartElementPath()).reverse(),c=[];b=a;for(var g=0,e;e=a[g];g++)if(3!=e.nodeType){var f=e.tagName.toLowerCase();"img"==f&&e.getAttribute("anchorname")&&(f="anchor");c[g]=f;if(k==g){k=-1;break}}return c}})};UE.plugins.formatmatch=function(){function k(g,e){if(B.webkit)var f="IMG"==e.target.tagName?e.target:null;b.undoManger&&b.undoManger.save();
        g=b.selection.getRange();f=f||g.getClosedNode();if(a&&f&&"IMG"==f.tagName)f.style.cssText+=";float:"+(a.style.cssFloat||a.style.styleFloat||"none")+";display:"+(a.style.display||"inline"),a=null;else if(!a){if(g.collapsed){var h=b.document.createTextNode("match");g.insertNode(h).select()}b.__hasEnterExecCommand=!0;f=b.options.removeFormatAttributes;b.options.removeFormatAttributes="";b.execCommand("removeformat");b.options.removeFormatAttributes=f;b.__hasEnterExecCommand=!1;g=b.selection.getRange();
            d.length&&(f=g,h&&f.selectNode(h),f.applyInlineStyle(d[d.length-1].tagName,null,d));h&&g.setStartBefore(h).collapse(!0);g.select();h&&m.remove(h)}b.undoManger&&b.undoManger.save();b.removeListener("mouseup",k);c=0}var b=this,d=[],a,c=0;b.addListener("reset",function(){d=[];c=0});b.commands.formatmatch={execCommand:function(g){if(c)c=0,d=[],b.removeListener("mouseup",k);else{g=b.selection.getRange();a=g.getClosedNode();if(!a||"IMG"!=a.tagName){g.collapse(!0).shrinkBoundary();d=m.findParents(g.startContainer,
            !0,function(f){return!m.isBlockElm(f)&&1==f.nodeType});g=0;for(var e;e=d[g];g++)if("A"==e.tagName){d.splice(g,1);break}}b.addListener("mouseup",k);c=1}},queryCommandState:function(){return c},notNeedUndo:1}};UE.plugin.register("searchreplace",function(){function k(c,g,e){var f=0;c=c.firstChild;for(var h;c;){if(3==c.nodeType){if(h=c.nodeValue.replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length,f+=h,f>=g)return{node:c,index:h-(f-g)}}else if(!M.$empty[c.tagName]&&(h=c[B.ie?"innerText":"textContent"].replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,
        "").length,f+=h,f>=g&&(h=k(c,h-(f-g),e))))return h;c=m.getNextDomNode(c)}}function b(c,g){var e=c.selection.getRange(),f=g.searchStr,h=c.document.createElement("span");h.innerHTML="$$ueditor_searchreplace_key$$";e.shrinkBoundary(!0);if(!e.collapsed&&(e.select(),c=c.selection.getText(),(new RegExp("^"+g.searchStr+"$",g.casesensitive?"":"i")).test(c))){if(void 0!=g.replaceStr)return g=g.replaceStr,g=d.document.createTextNode(g),e.deleteContents().insertNode(g),e.select(),!0;e.collapse(-1==g.dir)}e.insertNode(h);
        e.enlargeToBlockElm(!0);var n=e.startContainer;c=n[B.ie?"innerText":"textContent"].indexOf("$$ueditor_searchreplace_key$$");e.setStartBefore(h);m.remove(h);a:{h=n;n=g.all||1==g.dir?"getNextDomNode":"getPreDomNode";m.isBody(h)&&(h=h.firstChild);for(;h;){var l=3==h.nodeType?h.nodeValue:h[B.ie?"innerText":"textContent"];b:{var p=g,r=c;var q=p.searchStr;-1==p.dir&&(l=l.split("").reverse().join(""),q=q.split("").reverse().join(""),r=l.length-r);for(var t=new RegExp(q,"g"+(p.casesensitive?"":"i"));q=t.exec(l);)if(q.index>=
            r){l=-1==p.dir?l.length-q.index-p.searchStr.length:q.index;break b}l=-1}if(-1!=l){c={node:h,index:l};break a}for(h=m[n](h);h&&a[h.nodeName.toLowerCase()];)h=m[n](h,!0);h&&(c=-1==g.dir?(3==h.nodeType?h.nodeValue:h[B.ie?"innerText":"textContent"]).length:0)}c=void 0}if(c)return h=k(c.node,c.index,f),f=k(c.node,c.index+f.length,f),e.setStart(h.node,h.index).setEnd(f.node,f.index),void 0!==g.replaceStr&&(g=g.replaceStr,g=d.document.createTextNode(g),e.deleteContents().insertNode(g)),e.select(),!0;e.setCursor()}
        var d=this,a={table:1,tbody:1,tr:1,ol:1,ul:1};return{commands:{searchreplace:{execCommand:function(c,g){x.extend(g,{all:!1,casesensitive:!1,dir:1},!0);c=0;if(g.all){var e=d.selection.getRange(),f=d.body.firstChild;f&&1==f.nodeType?(e.setStart(f,0),e.shrinkBoundary(!0)):3==f.nodeType&&e.setStartBefore(f);e.collapse(!0).select(!0);for(void 0!==g.replaceStr&&d.fireEvent("saveScene");b(this,g);)c++}else void 0!==g.replaceStr&&d.fireEvent("saveScene"),b(this,g)&&c++;c&&d.fireEvent("saveScene");return c},
                    notNeedUndo:1}}}});UE.plugins.customstyle=function(){var k=this;k.setOpt({customstyle:[{tag:"h1",name:"tc",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:center;margin:0 0 20px 0;"},{tag:"h1",name:"tl",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:left;margin:0 0 10px 0;"},{tag:"span",name:"im",style:"font-size:16px;font-style:italic;font-weight:bold;line-height:18px;"},{tag:"span",name:"hi",style:"font-size:16px;font-style:italic;font-weight:bold;color:rgb(51, 153, 204);line-height:18px;"}]});
        k.commands.customstyle={execCommand:function(b,d){b=d.tag;var a=m.findParent(this.selection.getStart(),function(p){return p.getAttribute("label")},!0),c={};for(g in d)void 0!==d[g]&&(c[g]=d[g]);delete c.tag;if(a&&a.getAttribute("label")==d.label){var g=this.selection.getRange();var e=g.createBookmark();if(g.collapsed)if(M.$block[a.tagName]){var f=this.document.createElement("p");m.moveChild(a,f);a.parentNode.insertBefore(f,a);m.remove(a)}else m.remove(a,!0);else{a=m.getCommonAncestor(e.start,e.end);
                c=m.getElementsByTagName(a,b);(new RegExp(b,"i")).test(a.tagName)&&c.push(a);for(var h=0,n;n=c[h++];)if(n.getAttribute("label")==d.label){f=m.getPosition(n,e.start);var l=m.getPosition(n,e.end);(f&m.POSITION_FOLLOWING||f&m.POSITION_CONTAINS)&&(l&m.POSITION_PRECEDING||l&m.POSITION_CONTAINS)&&M.$block[b]&&(f=this.document.createElement("p"),m.moveChild(n,f),n.parentNode.insertBefore(f,n));m.remove(n,!0)}(a=m.findParent(a,function(p){return p.getAttribute("label")==d.label},!0))&&m.remove(a,!0)}g.moveToBookmark(e).select()}else M.$block[b]?
                (this.execCommand("paragraph",b,c,"customstyle"),g=this.selection.getRange(),g.collapsed||(g.collapse(),a=m.findParent(this.selection.getStart(),function(p){return p.getAttribute("label")==d.label},!0),b=this.document.createElement("p"),m.insertAfter(a,b),m.fillNode(this.document,b),g.setStart(b,0).setCursor())):(g=this.selection.getRange(),g.collapsed?(a=this.document.createElement(b),m.setAttributes(a,c),g.insertNode(a).setStart(a,0).setCursor()):(e=g.createBookmark(),g.applyInlineStyle(b,c).moveToBookmark(e).select()))},
            queryCommandValue:function(){var b=m.filterNodeList(this.selection.getStartElementPath(),function(d){return d.getAttribute("label")});return b?b.getAttribute("label"):""}};k.addListener("keyup",function(b,d){b=d.keyCode||d.which;if(32==b||13==b)if(b=k.selection.getRange(),b.collapsed&&(d=m.findParent(k.selection.getStart(),function(c){return c.getAttribute("label")},!0))&&M.$block[d.tagName]&&m.isEmptyNode(d)){var a=k.document.createElement("p");m.insertAfter(d,a);m.fillNode(k.document,a);m.remove(d);
            b.setStart(a,0).setCursor()}})};UE.plugins.catchremoteimage=function(){var k=this,b=UE.ajax;!1!==k.options.catchRemoteImageEnable&&(k.setOpt({catchRemoteImageEnable:!1}),k.addListener("afterpaste",function(){k.fireEvent("catchRemoteImage")}),k.addListener("catchRemoteImage",function(){function d(r,q){var t=x.serializeParam(k.queryCommandValue("serverparam"))||"";t=x.formatUrl(c+(-1==c.indexOf("?")?"?":"&")+t);q={method:"POST",dataType:x.isCrossDomainUrl(t)?"jsonp":"",timeout:6E4,onsuccess:q.success,
        onerror:q.error};q[e]=r;b.request(t,q)}for(var a=k.getOpt("catcherLocalDomain"),c=k.getActionUrl(k.getOpt("catcherActionName")),g=k.getOpt("catcherUrlPrefix"),e=k.getOpt("catcherFieldName"),f=[],h=m.getElementsByTagName(k.document,"img"),n=function(r,q){if(-1!=r.indexOf(location.host)||/(^\.)|(^\/)/.test(r))return!0;if(q)for(var t=0,u;u=q[t++];)if(-1!==r.indexOf(u))return!0;return!1},l=0,p;p=h[l++];)p.getAttribute("word_img")||(p=p.getAttribute("_src")||p.src||"",/^(https?|ftp):/i.test(p)&&!n(p,a)&&
    f.push(p));f.length&&d(f,{success:function(r){try{var q=void 0!==r.state?r:eval("("+r.responseText+")")}catch(y){return}var t,u,w=q.list;for(r=0;q=h[r++];){var v=q.getAttribute("_src")||q.src||"";for(t=0;u=w[t++];)if(v==u.source&&"SUCCESS"==u.state){t=g+u.url;m.setAttributes(q,{src:t,_src:t});break}}k.fireEvent("catchremotesuccess")},error:function(){k.fireEvent("catchremoteerror")}})}))};UE.plugin.register("snapscreen",function(){function k(a){var c=document.createElement("a"),g=x.serializeParam(b.queryCommandValue("serverparam"))||
        "";c.href=a;B.ie&&(c.href=c.href);a=c.search;g&&(a=a+(-1==a.indexOf("?")?"?":"&")+g,a=a.replace(/[&]+/ig,"&"));return{port:c.port,hostname:c.hostname,path:c.pathname+a||+c.hash}}var b=this,d;return{commands:{snapscreen:{execCommand:function(a){function c(h){try{if(h=eval("("+h+")"),"SUCCESS"==h.state){var n=b.options;b.execCommand("insertimage",{src:n.snapscreenUrlPrefix+h.url,_src:n.snapscreenUrlPrefix+h.url,alt:h.title||"",floatStyle:n.snapscreenImgAlign})}else alert(h.state)}catch(l){alert(e.callBackErrorMsg)}}
                    var g,e=b.getLang("snapScreen_plugin");if(!d){a=b.container;d=(b.container.ownerDocument||b.container.document).createElement("object");try{d.type="application/x-pluginbaidusnap"}catch(h){return}d.style.cssText="position:absolute;left:-9999px;width:0;height:0;";d.setAttribute("width","0");d.setAttribute("height","0");a.appendChild(d)}a=b.getActionUrl(b.getOpt("snapscreenActionName"));var f=k(a);setTimeout(function(){try{g=d.saveSnapshot(f.hostname,f.path,f.port)}catch(h){b.ui._dialogs.snapscreenDialog.open();
                        return}c(g)},50)},queryCommandState:function(){return-1!=navigator.userAgent.indexOf("Windows",0)?0:-1}}}}});UE.commands.insertparagraph={execCommand:function(k,b){k=this.selection.getRange();for(var d=k.startContainer,a;d&&!m.isBody(d);)a=d,d=d.parentNode;a&&(d=this.document.createElement("p"),b?a.parentNode.insertBefore(d,a):a.parentNode.insertBefore(d,a.nextSibling),m.fillNode(this.document,d),k.setStart(d,0).setCursor(!1,!0))}};UE.plugin.register("webapp",function(){function k(d,a){return a?'<iframe class="edui-faked-webapp" title="'+
        d.title+'" '+(d.align&&!d.cssfloat?'align="'+d.align+'"':"")+(d.cssfloat?'style="float:'+d.cssfloat+'"':"")+'width="'+d.width+'" height="'+d.height+'"  scrolling="no" frameborder="0" src="'+d.url+'" logo_url = "'+d.logo+'"></iframe>':'<img title="'+d.title+'" width="'+d.width+'" height="'+d.height+'" src="'+b.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" _logo_url="'+d.logo+'" style="background:url('+d.logo+') no-repeat center center; border:1px solid gray;" class="edui-faked-webapp" _url="'+
        d.url+'" '+(d.align&&!d.cssfloat?'align="'+d.align+'"':"")+(d.cssfloat?'style="float:'+d.cssfloat+'"':"")+"/>"}var b=this;return{outputRule:function(d){x.each(d.getNodesByTagName("img"),function(a){if("edui-faked-webapp"==a.getAttr("class")){var c=k({title:a.getAttr("title"),width:a.getAttr("width"),height:a.getAttr("height"),align:a.getAttr("align"),cssfloat:a.getStyle("float"),url:a.getAttr("_url"),logo:a.getAttr("_logo_url")},!0);c=UE.uNode.createElement(c);a.parentNode.replaceChild(c,a)}})},inputRule:function(d){x.each(d.getNodesByTagName("iframe"),
            function(a){if("edui-faked-webapp"==a.getAttr("class")){var c=UE.uNode.createElement(k({title:a.getAttr("title"),width:a.getAttr("width"),height:a.getAttr("height"),align:a.getAttr("align"),cssfloat:a.getStyle("float"),url:a.getAttr("src"),logo:a.getAttr("logo_url")}));a.parentNode.replaceChild(c,a)}})},commands:{webapp:{execCommand:function(d,a){d=k(x.extend(a,{align:"none"}),!1);this.execCommand("inserthtml",d)},queryCommandState:function(){var d=this.selection.getRange().getClosedNode();return d&&
                "edui-faked-webapp"==d.className?1:0}}}}});UE.plugins.template=function(){UE.commands.template={execCommand:function(k,b){b.html&&this.execCommand("inserthtml",b.html)}};this.addListener("click",function(k,b){b=b.target||b.srcElement;k=this.selection.getRange();(b=m.findParent(b,function(d){if(d.className&&m.hasClass(d,"ue_t"))return d},!0))&&k.selectNode(b).shrinkBoundary().select()});this.addListener("keydown",function(k,b){k=this.selection.getRange();k.collapsed||b.ctrlKey||b.metaKey||b.shiftKey||
    b.altKey||(b=m.findParent(k.startContainer,function(d){if(d.className&&m.hasClass(d,"ue_t"))return d},!0))&&m.removeClasses(b,["ue_t"])})};UE.plugin.register("music",function(){function k(d,a,c,g,e,f){return f?'<embed type="application/x-shockwave-flash" class="edui-faked-music" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+d+'" width="'+a+'" height="'+c+'" '+(g&&!e?'align="'+g+'"':"")+(e?'style="float:'+e+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >':
        "<img "+(g&&!e?'align="'+g+'"':"")+(e?'style="float:'+e+'"':"")+' width="'+a+'" height="'+c+'" _url="'+d+'" class="edui-faked-music" src="'+b.options.langPath+b.options.lang+'/images/music.png" />'}var b=this;return{outputRule:function(d){x.each(d.getNodesByTagName("img"),function(a){if("edui-faked-music"==a.getAttr("class")){var c=a.getStyle("float");var g=a.getAttr("align");c=k(a.getAttr("_url"),a.getAttr("width"),a.getAttr("height"),g,c,!0);c=UE.uNode.createElement(c);a.parentNode.replaceChild(c,
            a)}})},inputRule:function(d){x.each(d.getNodesByTagName("embed"),function(a){if("edui-faked-music"==a.getAttr("class")){var c=a.getStyle("float"),g=a.getAttr("align");html=k(a.getAttr("src"),a.getAttr("width"),a.getAttr("height"),g,c,!1);c=UE.uNode.createElement(html);a.parentNode.replaceChild(c,a)}})},commands:{music:{execCommand:function(d,a){d=k(a.url,a.width||400,a.height||95,"none",!1);this.execCommand("inserthtml",d)},queryCommandState:function(){var d=this.selection.getRange().getClosedNode();
                    return d&&"edui-faked-music"==d.className?1:0}}}}});UE.plugin.register("autoupload",function(){function k(b,d){var a=/image\/\w+/i.test(b.type)?"image":"file",c="loading_"+(+new Date).toString(36);var g=d.getOpt(a+"FieldName");var e=d.getOpt(a+"UrlPrefix");var f=d.getOpt(a+"MaxSize");var h=d.getOpt(a+"AllowFiles");var n=d.getActionUrl(d.getOpt(a+"ActionName"));var l=function(q){var t=d.document.getElementById(c);t&&m.remove(t);d.fireEvent("showmessage",{id:c,content:q,type:"error",timeout:4E3})};
        if("image"==a){var p='<img class="loadingclass" id="'+c+'" src="'+d.options.themePath+d.options.theme+'/images/spacer.gif" title="'+(d.getLang("autoupload.loading")||"")+'" >';var r=function(q){var t=e+q.url,u=d.document.getElementById(c);u&&(u.setAttribute("src",t),u.setAttribute("_src",t),u.setAttribute("title",q.title||""),u.setAttribute("alt",q.original||""),u.removeAttribute("id"),m.removeClasses(u,"loadingclass"))}}else p='<p><img class="loadingclass" id="'+c+'" src="'+d.options.themePath+d.options.theme+
            '/images/spacer.gif" title="'+(d.getLang("autoupload.loading")||"")+'" ></p>',r=function(q){q=e+q.url;var t=d.document.getElementById(c),u=d.selection.getRange(),w=u.createBookmark();u.selectNode(t).select();d.execCommand("insertfile",{url:q});u.moveToBookmark(w).select()};d.execCommand("inserthtml",p);d.getOpt(a+"ActionName")?b.size>f?l(d.getLang("autoupload.exceedSizeError")):(f=b.name?b.name.substr(b.name.lastIndexOf(".")):"")&&"image"!=a||h&&-1==(h.join("")+".").indexOf(f.toLowerCase()+".")?l(d.getLang("autoupload.exceedTypeError")):
            (h=new XMLHttpRequest,a=new FormData,f=x.serializeParam(d.queryCommandValue("serverparam"))||"",n=x.formatUrl(n+(-1==n.indexOf("?")?"?":"&")+f),a.append(g,b,b.name||"blob."+b.type.substr(6)),a.append("type","ajax"),h.open("post",n,!0),h.setRequestHeader("X-Requested-With","XMLHttpRequest"),h.addEventListener("load",function(q){try{var t=(new Function("return "+x.trim(q.target.response)))();"SUCCESS"==t.state&&t.url?r(t):l(t.state)}catch(u){l(d.getLang("autoupload.loadError"))}}),h.send(a)):l(d.getLang("autoupload.errorLoadConfig"))}
        return{outputRule:function(b){x.each(b.getNodesByTagName("img"),function(d){/\b(loaderrorclass)|(bloaderrorclass)\b/.test(d.getAttr("class"))&&d.parentNode.removeChild(d)});x.each(b.getNodesByTagName("p"),function(d){/\bloadpara\b/.test(d.getAttr("class"))&&d.parentNode.removeChild(d)})},bindEvents:{ready:function(b){var d=this;window.FormData&&window.FileReader&&(m.on(d.body,"paste drop",function(a){var c=!1,g;if(g="paste"==a.type?a.clipboardData&&a.clipboardData.items&&1==a.clipboardData.items.length&&
                /^image\//.test(a.clipboardData.items[0].type)?a.clipboardData.items:null:a.dataTransfer&&a.dataTransfer.files?a.dataTransfer.files:null){for(var e=g.length,f;e--;)f=g[e],f.getAsFile&&(f=f.getAsFile()),f&&0<f.size&&(k(f,d),c=!0);c&&a.preventDefault()}}),m.on(d.body,"dragover",function(a){"Files"==a.dataTransfer.types[0]&&a.preventDefault()}),x.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-left:1px;height: 22px;width: 22px;}\n.loaderrorclass{display:inline-block;cursor:default;background: url('"+
                    this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}",this.document))}}}});UE.plugin.register("autosave",function(){function k(c){if(!(20>new Date-d))if(c.hasContents()){d=new Date;c._saveFlag=null;var g=b.body.innerHTML;!1!==c.fireEvent("beforeautosave",{content:g})&&(b.setPreferences(a,g),c.fireEvent("afterautosave",{content:g}))}else a&&b.removePreferences(a)}var b=this,d=new Date,
        a=null;return{defaultOptions:{saveInterval:500},bindEvents:{ready:function(){var c=b.key?b.key+"-drafts-data":(b.container.parentNode.id||"ue-common")+"-drafts-data";a=(location.protocol+location.host+location.pathname).replace(/[.:\/]/g,"_")+c},contentchange:function(){a&&(b._saveFlag&&window.clearTimeout(b._saveFlag),0<b.options.saveInterval?b._saveFlag=window.setTimeout(function(){k(b)},b.options.saveInterval):k(b))}},commands:{clearlocaldata:{execCommand:function(c,g){a&&b.getPreferences(a)&&
                b.removePreferences(a)},notNeedUndo:!0,ignoreContentChange:!0},getlocaldata:{execCommand:function(c,g){return a?b.getPreferences(a)||"":""},notNeedUndo:!0,ignoreContentChange:!0},drafts:{execCommand:function(c,g){a&&(b.body.innerHTML=b.getPreferences(a)||"<p>"+m.fillHtml+"</p>",b.focus(!0))},queryCommandState:function(){return a?null===b.getPreferences(a)?-1:0:-1},notNeedUndo:!0,ignoreContentChange:!0}}}});UE.plugin.register("charts",function(){function k(d){if(2>d.rows.length||2>d.rows[0].cells.length)return!1;
        var a=d.rows[0].cells;var c=a.length;for(var g=0,e;e=a[g];g++)if("th"!==e.tagName.toLowerCase())return!1;for(g=1;a=d.rows[g];g++){if(a.cells.length!=c||"th"!==a.cells[0].tagName.toLowerCase())return!1;for(var f=1;e=a.cells[f];f++)if(e=x.trim(e.innerText||e.textContent||""),e=e.replace(new RegExp(UE.dom.domUtils.fillChar,"g"),"").replace(/^\s+|\s+$/g,""),!/^\d*\.?\d+$/.test(e))return!1}return!0}var b=this;return{bindEvents:{chartserror:function(){}},commands:{charts:{execCommand:function(d,a){d=m.findParentByTagName(this.selection.getRange().startContainer,
                    "table",!0);var c=[],g={};if(!d)return!1;if(!k(d))return b.fireEvent("chartserror"),!1;g.title=a.title||"";g.subTitle=a.subTitle||"";g.xTitle=a.xTitle||"";g.yTitle=a.yTitle||"";g.suffix=a.suffix||"";g.tip=a.tip||"";g.dataFormat=a.tableDataFormat||"";g.chartType=a.chartType||0;for(var e in g)g.hasOwnProperty(e)&&c.push(e+":"+g[e]);d.setAttribute("data-chart",c.join(";"));m.addClass(d,"edui-charts-table")},queryCommandState:function(d,a){return(d=m.findParentByTagName(this.selection.getRange().startContainer,
                    "table",!0))&&k(d)?0:-1}}},inputRule:function(d){x.each(d.getNodesByTagName("table"),function(a){void 0!==a.getAttr("data-chart")&&a.setAttr("style")})},outputRule:function(d){x.each(d.getNodesByTagName("table"),function(a){void 0!==a.getAttr("data-chart")&&a.setAttr("style","display: none;")})}}});UE.plugin.register("section",function(){function k(c){this.tag="";this.level=-1;this.parentSection=this.previousSection=this.nextSection=this.dom=null;this.startAddress=[];this.endAddress=[];this.children=
        []}function b(c){var g=new k;return x.extend(g,c)}function d(c,g){for(var e=0;e<c.length;e++){if(!g.childNodes)return null;g=g.childNodes[c[e]]}return g}var a=this;return{bindMultiEvents:{type:"aftersetcontent afterscencerestore",handler:function(){a.fireEvent("updateSections")}},bindEvents:{ready:function(){a.fireEvent("updateSections");m.on(a.body,"drop paste",function(){a.fireEvent("updateSections")})},afterexeccommand:function(c,g){"paragraph"==g&&a.fireEvent("updateSections")},keyup:function(c,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              g){1!=this.selection.getRange().collapsed?this.fireEvent("updateSections"):(c=g.keyCode||g.which,13!=c&&8!=c&&46!=c||this.fireEvent("updateSections"))}},commands:{getsections:{execCommand:function(c,g){function e(l,p){var r=null;l=l.childNodes;for(var q=0,t=l.length;q<t;q++){var u=l[q];a:{var w=u;for(var v=0;v<f.length;v++)if(f[v](w)){w=v;break a}w=-1}if(0<=w){r=h.selection.getRange().selectNode(u).createAddress(!0).startAddress;u=b({tag:u.tagName,title:u.innerText||u.textContent||"",level:w,dom:u,
                    startAddress:x.clone(r,[]),endAddress:x.clone(r,[]),children:[]});n.nextSection=u;for(r=u.previousSection=n;w<=r.level;)r=r.parentSection;u.parentSection=r;r.children.push(u);r=n=u}else 1===u.nodeType&&e(u,p),r&&r.endAddress[r.endAddress.length-1]++}}var f=g||"h1 h2 h3 h4 h5 h6".split(" ");for(c=0;c<f.length;c++)"string"==typeof f[c]?f[c]=function(l){return function(p){return p.tagName==l.toUpperCase()}}(f[c]):"function"!=typeof f[c]&&(f[c]=function(l){return null});var h=this,n=c=b({level:-1,title:"root"});
                    e(h.body,c);return c},notNeedUndo:!0},movesection:{execCommand:function(c,g,e,f){if(g&&e&&-1!=e.level){e=f?e.endAddress:e.startAddress;c=d(e,this.body);var h;if(!(h=!e||!c)){h=g.startAddress;for(var n=!1,l=!1,p=0;p<h.length&&!(p>=e.length);p++)if(e[p]>h[p]){n=!0;break}else if(e[p]<h[p])break;for(p=0;p<g.endAddress.length&&!(p>=e.length);p++)if(e[p]<h[p]){l=!0;break}else if(e[p]>h[p])break;h=n&&l}if(!h){e=d(g.startAddress,this.body);g=d(g.endAddress,this.body);if(f)for(f=g;f&&!(m.getPosition(e,f)&
                    m.POSITION_FOLLOWING);){h=f.previousSibling;m.insertAfter(c,f);if(f==e)break;f=h}else for(f=e;f&&!(m.getPosition(f,g)&m.POSITION_FOLLOWING);){h=f.nextSibling;c.parentNode.insertBefore(f,c);if(f==g)break;f=h}this.fireEvent("updateSections")}}}},deletesection:{execCommand:function(c,g,e){function f(n){for(var l=h.body,p=0;p<n.length;p++){if(!l.childNodes)return null;l=l.childNodes[n[p]]}return l}var h=this;if(g){c=f(g.startAddress);g=f(g.endAddress);if(e)m.remove(c);else for(;c&&m.inDoc(g,h.document)&&
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   !(m.getPosition(c,g)&m.POSITION_FOLLOWING);)e=c.nextSibling,m.remove(c),c=e;h.fireEvent("updateSections")}}},selectsection:{execCommand:function(c,g){if(!g&&!g.dom)return!1;c=this.selection.getRange();g={startAddress:x.clone(g.startAddress,[]),endAddress:x.clone(g.endAddress,[])};g.endAddress[g.endAddress.length-1]++;c.moveToAddress(g).select().scrollToView();return!0},notNeedUndo:!0},scrolltosection:{execCommand:function(c,g){if(!g&&!g.dom)return!1;c=this.selection.getRange();g={startAddress:g.startAddress,
                    endAddress:g.endAddress};g.endAddress[g.endAddress.length-1]++;c.moveToAddress(g).scrollToView();return!0},notNeedUndo:!0}}}});UE.plugin.register("simpleupload",function(){function k(){var c=a.offsetWidth||20,g=a.offsetHeight||20,e=document.createElement("iframe"),f="display:block;width:"+c+"px;height:"+g+"px;overflow:hidden;border:0;margin:0;padding:0;position:absolute;top:0;left:0;filter:alpha(opacity=0);-moz-opacity:0;-khtml-opacity: 0;opacity: 0;cursor:pointer;";m.on(e,"load",function(){var h=
        (+new Date).toString(36);var n=e.contentDocument||e.contentWindow.document;var l=n.body;var p=n.createElement("div");p.innerHTML='<form id="edui_form_'+h+'" target="edui_iframe_'+h+'" method="POST" enctype="multipart/form-data" action="'+b.getOpt("serverUrl")+'" style="'+f+'"><input id="edui_input_'+h+'" type="file" accept="image/*" name="'+b.options.imageFieldName+'" style="'+f+'"></form><iframe id="edui_iframe_'+h+'" name="edui_iframe_'+h+'" style="display:none;width:0;height:0;border:0;margin:0;padding:0;position:absolute;"></iframe>';
        p.className="edui-"+b.options.theme;p.id=b.ui.id+"_iframeupload";l.style.cssText=f;l.style.width=c+"px";l.style.height=g+"px";l.appendChild(p);l.parentNode&&(l.parentNode.style.width=c+"px",l.parentNode.style.height=c+"px");var r=n.getElementById("edui_form_"+h),q=n.getElementById("edui_input_"+h),t=n.getElementById("edui_iframe_"+h);m.on(q,"change",function(){function w(){try{var T=(t.contentDocument||t.contentWindow.document).body;var L=(new Function("return "+(T.innerText||T.textContent||"")))();
            var ba=b.options.imageUrlPrefix+L.url;if("SUCCESS"==L.state&&L.url){var S=b.document.getElementById(y);S.setAttribute("src",ba);S.setAttribute("_src",ba);S.setAttribute("title",L.title||"");S.setAttribute("alt",L.original||"");S.removeAttribute("id");m.removeClasses(S,"loadingclass")}else v&&v(L.state)}catch(Y){v&&v(b.getLang("simpleupload.loadError"))}r.reset();m.un(t,"load",w)}function v(T){if(y){var L=b.document.getElementById(y);L&&m.remove(L);b.fireEvent("showmessage",{id:y,content:T,type:"error",
            timeout:4E3})}}if(q.value){var y="loading_"+(+new Date).toString(36),A=x.serializeParam(b.queryCommandValue("serverparam"))||"",E=b.getActionUrl(b.getOpt("imageActionName")),I=b.getOpt("imageAllowFiles");b.focus();b.execCommand("inserthtml",'<img class="loadingclass" id="'+y+'" src="'+b.options.themePath+b.options.theme+'/images/spacer.gif" title="'+(b.getLang("simpleupload.loading")||"")+'" >');if(b.getOpt("imageActionName")){var H=q.value;H=H?H.substr(H.lastIndexOf(".")):"";!H||I&&-1==(I.join("")+
            ".").indexOf(H.toLowerCase()+".")?v(b.getLang("simpleupload.exceedTypeError")):(m.on(t,"load",w),r.action=x.formatUrl(E+(-1==E.indexOf("?")?"?":"&")+A),r.submit())}else errorHandler(b.getLang("autoupload.errorLoadConfig"))}});var u;b.addListener("selectionchange",function(){clearTimeout(u);u=setTimeout(function(){-1==b.queryCommandState("simpleupload")?q.disabled="disabled":q.disabled=!1},400)});d=!0});e.style.cssText=f;a.appendChild(e)}var b=this,d=!1,a;return{bindEvents:{ready:function(){x.cssRule("loading",
                ".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}\n.loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}",this.document)},
            simpleuploadbtnready:function(c,g){a=g;b.afterConfigReady(k)}},outputRule:function(c){x.each(c.getNodesByTagName("img"),function(g){/\b(loaderrorclass)|(bloaderrorclass)\b/.test(g.getAttr("class"))&&g.parentNode.removeChild(g)})},commands:{simpleupload:{queryCommandState:function(){return d?0:-1}}}}});UE.plugin.register("serverparam",function(){var k={};return{commands:{serverparam:{execCommand:function(b,d,a){void 0===d||null===d?k={}:x.isString(d)?void 0===a||null===a?delete k[d]:k[d]=a:x.isObject(d)?
                    x.extend(k,d,!0):x.isFunction(d)&&x.extend(k,d(),!0)},queryCommandValue:function(){return k||{}}}}}});UE.plugin.register("insertfile",function(){var k=this;return{commands:{insertfile:{execCommand:function(b,d){d=x.isArray(d)?d:[d];b="";var a=k.getOpt("UEDITOR_HOME_URL");var c=a+("/"==a.substr(a.length-1)?"":"/")+"dialogs/attachment/fileTypeImages/";for(a=0;a<d.length;a++){var g=d[a];var e=g.url;e=e.substr(e.lastIndexOf(".")+1).toLowerCase();var f={rar:"icon_rar.gif",zip:"icon_rar.gif",tar:"icon_rar.gif",
                    gz:"icon_rar.gif",bz2:"icon_rar.gif",doc:"icon_doc.gif",docx:"icon_doc.gif",pdf:"icon_pdf.gif",mp3:"icon_mp3.gif",xls:"icon_xls.gif",chm:"icon_chm.gif",ppt:"icon_ppt.gif",pptx:"icon_ppt.gif",avi:"icon_mv.gif",rmvb:"icon_mv.gif",wmv:"icon_mv.gif",flv:"icon_mv.gif",swf:"icon_mv.gif",rm:"icon_mv.gif",exe:"icon_exe.gif",psd:"icon_psd.gif",txt:"icon_txt.gif",jpg:"icon_jpg.gif",png:"icon_jpg.gif",jpeg:"icon_jpg.gif",gif:"icon_jpg.gif",ico:"icon_jpg.gif",bmp:"icon_jpg.gif"};e=c+(f[e]?f[e]:f.txt);f=g.title||
                    g.url.substr(g.url.lastIndexOf("/")+1);b+='<p style="line-height: 16px;"><img style="vertical-align: middle; margin-right: 2px;" src="'+e+'" _src="'+e+'" /><a style="font-size:12px; color:#0066cc;" href="'+g.url+'" title="'+f+'">'+f+"</a></p>"}k.execCommand("insertHtml",b)}}}}});UE.plugins.xssFilter=function(){function k(c){var g=c.tagName,e=c.attrs;if(!d.hasOwnProperty(g))return c.parentNode.removeChild(c),!1;UE.utils.each(e,function(f,h){-1===d[g].indexOf(h)&&c.setAttr(h)})}var b=UEDITOR_CONFIG,
        d=b.whitList;d&&b.xssFilterRules&&(this.options.filterRules=function(){var c={};UE.utils.each(d,function(g,e){c[e]=function(f){return k(f)}});return c}());var a=[];UE.utils.each(d,function(c,g){a.push(g)});d&&b.inputXssFilter&&this.addInputRule(function(c){c.traversal(function(g){if("element"!==g.type)return!1;k(g)})});d&&b.outputXssFilter&&this.addOutputRule(function(c){c.traversal(function(g){if("element"!==g.type)return!1;k(g)})})};C=C||{};C.editor=C.editor||{};UE.ui=C.editor.ui={};(function(){function k(){var e=
        document.getElementById("edui_fixedlayer");g.setViewportOffset(e,{left:0,top:0})}var b=C.editor.browser,d=C.editor.dom.domUtils,a=window.$EDITORUI={},c=0,g=C.editor.ui.uiUtils={uid:function(e){return e?e.ID$EDITORUI||(e.ID$EDITORUI=++c):++c},hook:function(e,f){if(e&&e._callbacks)var h=e;else h=function(){var n;e&&(n=e.apply(this,arguments));for(var l=h._callbacks,p=l.length;p--;){var r=l[p].apply(this,arguments);void 0===n&&(n=r)}return n},h._callbacks=[];h._callbacks.push(f);return h},createElementByHtml:function(e){var f=
            document.createElement("div");f.innerHTML=e;f=f.firstChild;f.parentNode.removeChild(f);return f},getViewportElement:function(){return b.ie&&b.quirks?document.body:document.documentElement},getClientRect:function(e){try{var f=e.getBoundingClientRect()}catch(l){f={left:0,top:0,height:0,width:0}}for(var h={left:Math.round(f.left),top:Math.round(f.top),height:Math.round(f.bottom-f.top),width:Math.round(f.right-f.left)},n;(n=e.ownerDocument)!==document&&(e=d.getWindow(n).frameElement);)f=e.getBoundingClientRect(),
            h.left+=f.left,h.top+=f.top;h.bottom=h.top+h.height;h.right=h.left+h.width;return h},getViewportRect:function(){var e=g.getViewportElement(),f=(window.innerWidth||e.clientWidth)|0;e=(window.innerHeight||e.clientHeight)|0;return{left:0,top:0,height:e,width:f,bottom:e,right:f}},setViewportOffset:function(e,f){var h=g.getFixedLayer();e.parentNode===h?(e.style.left=f.left+"px",e.style.top=f.top+"px"):d.setViewportOffset(e,f)},getEventOffset:function(e){var f=g.getClientRect(e.target||e.srcElement);e=
            g.getViewportOffsetByEvent(e);return{left:e.left-f.left,top:e.top-f.top}},getViewportOffsetByEvent:function(e){var f=e.target||e.srcElement,h=d.getWindow(f).frameElement;e={left:e.clientX,top:e.clientY};h&&f.ownerDocument!==document&&(f=g.getClientRect(h),e.left+=f.left,e.top+=f.top);return e},setGlobal:function(e,f){a[e]=f;return'$EDITORUI["'+e+'"]'},unsetGlobal:function(e){delete a[e]},copyAttributes:function(e,f){for(var h=f.attributes,n=h.length;n--;){var l=h[n];"style"==l.nodeName||"class"==
        l.nodeName||b.ie&&!l.specified||e.setAttribute(l.nodeName,l.nodeValue)}f.className&&d.addClass(e,f.className);f.style.cssText&&(e.style.cssText+=";"+f.style.cssText)},removeStyle:function(e,f){if(e.style.removeProperty)e.style.removeProperty(f);else if(e.style.removeAttribute)e.style.removeAttribute(f);else throw"";},contains:function(e,f){return e&&f&&(e===f?!1:e.contains?e.contains(f):e.compareDocumentPosition(f)&16)},startDrag:function(e,f,h){function n(u){f.ondragmove(u.clientX-l,u.clientY-p,
            u);u.stopPropagation?u.stopPropagation():u.cancelBubble=!0}h=h||document;var l=e.clientX,p=e.clientY;if(h.addEventListener){var r=function(u){h.removeEventListener("mousemove",n,!0);h.removeEventListener("mouseup",r,!0);window.removeEventListener("mouseup",r,!0);f.ondragstop()};h.addEventListener("mousemove",n,!0);h.addEventListener("mouseup",r,!0);window.addEventListener("mouseup",r,!0);e.preventDefault()}else{var q=function(){t.releaseCapture();t.detachEvent("onmousemove",n);t.detachEvent("onmouseup",
            q);t.detachEvent("onlosecaptrue",q);f.ondragstop()},t=e.srcElement;t.setCapture();t.attachEvent("onmousemove",n);t.attachEvent("onmouseup",q);t.attachEvent("onlosecaptrue",q);e.returnValue=!1}f.ondragstart()},getFixedLayer:function(){var e=document.getElementById("edui_fixedlayer");null==e&&(e=document.createElement("div"),e.id="edui_fixedlayer",document.body.appendChild(e),b.ie&&8>=b.version?(e.style.position="absolute",d.on(window,"scroll",k),d.on(window,"resize",C.editor.utils.defer(k,0,!0)),setTimeout(k)):
            e.style.position="fixed",e.style.left="0",e.style.top="0",e.style.width="0",e.style.height="0");return e},makeUnselectable:function(e){if(b.opera||b.ie&&9>b.version){if(e.unselectable="on",e.hasChildNodes())for(var f=0;f<e.childNodes.length;f++)1==e.childNodes[f].nodeType&&g.makeUnselectable(e.childNodes[f])}else void 0!==e.style.MozUserSelect?e.style.MozUserSelect="none":void 0!==e.style.WebkitUserSelect?e.style.WebkitUserSelect="none":void 0!==e.style.KhtmlUserSelect&&(e.style.KhtmlUserSelect="none")}}})();
    (function(){var k=C.editor.utils,b=C.editor.ui.uiUtils,d=C.editor.EventBase,a=C.editor.ui.UIBase=function(){};a.prototype={className:"",uiName:"",initOptions:function(c){for(var g in c)this[g]=c[g];this.id=this.id||"edui"+b.uid()},initUIBase:function(){this._globalKey=k.unhtml(b.setGlobal(this.id,this))},render:function(c){var g=this.renderHtml();g=b.createElementByHtml(g);for(var e=m.getElementsByTagName(g,"*"),f="edui-"+(this.theme||this.editor.options.theme),h=document.getElementById("edui_fixedlayer"),
                                                                                                                                                                                                                                                                                                                                                                                                    n=0,l;l=e[n++];)m.addClass(l,f);m.addClass(g,f);h&&(h.className="",m.addClass(h,f));e=this.getDom();null!=e?(e.parentNode.replaceChild(g,e),b.copyAttributes(g,e)):("string"==typeof c&&(c=document.getElementById(c)),c=c||b.getFixedLayer(),m.addClass(c,f),c.appendChild(g));this.postRender()},getDom:function(c){return c?document.getElementById(this.id+"_"+c):document.getElementById(this.id)},postRender:function(){this.fireEvent("postrender")},getHtmlTpl:function(){return""},formatHtml:function(c){var g=
            "edui-"+this.uiName;return c.replace(/##/g,this.id).replace(/%%-/g,this.uiName?g+"-":"").replace(/%%/g,(this.uiName?g:"")+" "+this.className).replace(/\$\$/g,this._globalKey)},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},dispose:function(){var c=this.getDom();c&&C.editor.dom.domUtils.remove(c);b.unsetGlobal(this.id)}};k.inherits(a,d)})();(function(){var k=C.editor.utils,b=C.editor.ui.UIBase,d=C.editor.ui.Separator=function(a){this.initOptions(a);this.initSeparator()};d.prototype=
        {uiName:"separator",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"></div>'}};k.inherits(d,b)})();(function(){var k=C.editor.utils,b=C.editor.dom.domUtils,d=C.editor.ui.UIBase,a=C.editor.ui.uiUtils,c=C.editor.ui.Mask=function(g){this.initOptions(g);this.initUIBase()};c.prototype={getHtmlTpl:function(){return'<div id="##" class="edui-mask %%" onclick="return $$._onClick(event, this);" onmousedown="return $$._onMouseDown(event, this);"></div>'},
        postRender:function(){var g=this;b.on(window,"resize",function(){setTimeout(function(){g.isHidden()||g._fill()})})},show:function(g){this._fill();this.getDom().style.display="";this.getDom().style.zIndex=g},hide:function(){this.getDom().style.display="none";this.getDom().style.zIndex=""},isHidden:function(){return"none"==this.getDom().style.display},_onMouseDown:function(){return!1},_onClick:function(g,e){this.fireEvent("click",g,e)},_fill:function(){var g=this.getDom(),e=a.getViewportRect();g.style.width=
            e.width+"px";g.style.height=e.height+"px"}};k.inherits(c,d)})();(function(){function k(h,n){for(var l=0;l<e.length;l++){var p=e[l];if(!p.isHidden()&&!1!==p.queryAutoHide(n)){if(h&&/scroll/ig.test(h.type)&&"edui-wordpastepop"==p.className)return;p.hide()}}e.length&&p.editor.fireEvent("afterhidepop")}var b=C.editor.utils,d=C.editor.ui.uiUtils,a=C.editor.dom.domUtils,c=C.editor.ui.UIBase,g=C.editor.ui.Popup=function(h){this.initOptions(h);this.initPopup()},e=[];g.postHide=k;var f=["edui-anchor-topleft",
        "edui-anchor-topright","edui-anchor-bottomleft","edui-anchor-bottomright"];g.prototype={SHADOW_RADIUS:5,content:null,_hidden:!1,autoRender:!0,canSideLeft:!0,canSideUp:!0,initPopup:function(){this.initUIBase();e.push(this)},getHtmlTpl:function(){return'<div id="##" class="edui-popup %%" onmousedown="return false;"> <div id="##_body" class="edui-popup-body"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-popup-content">'+
            this.getContentHtmlTpl()+"  </div> </div></div>"},getContentHtmlTpl:function(){return this.content?"string"==typeof this.content?this.content:this.content.renderHtml():""},_UIBase_postRender:c.prototype.postRender,postRender:function(){this.content instanceof c&&this.content.postRender();if(this.captureWheel&&!this.captured){this.captured=!0;var h=(document.documentElement.clientHeight||document.body.clientHeight)-80,n=this.getDom().offsetHeight,l=d.getClientRect(this.combox.getDom()).top,p=this.getDom("content"),
            r=this.getDom("body").getElementsByTagName("iframe"),q=this;for(r.length&&(r=r[0]);l+n>h;)n-=30;p.style.height=n+"px";r&&(r.style.height=n+"px");if(window.XMLHttpRequest)a.on(p,"onmousewheel"in document.body?"mousewheel":"DOMMouseScroll",function(t){t.preventDefault?t.preventDefault():t.returnValue=!1;p.scrollTop=t.wheelDelta?p.scrollTop-t.wheelDelta/120*60:p.scrollTop-t.detail/-3*60});else a.on(this.getDom(),"mousewheel",function(t){t.returnValue=!1;q.getDom("content").scrollTop-=t.wheelDelta/120*
            60})}this.fireEvent("postRenderAfter");this.hide(!0);this._UIBase_postRender()},_doAutoRender:function(){!this.getDom()&&this.autoRender&&this.render()},mesureSize:function(){var h=this.getDom("content");return d.getClientRect(h)},fitSize:function(){if(this.captureWheel&&this.sized)return this.__size;this.sized=!0;var h=this.getDom("body");h.style.width="";h.style.height="";var n=this.mesureSize();if(this.captureWheel){h.style.width=-(-20-n.width)+"px";var l=parseInt(this.getDom("content").style.height,
            10);!window.isNaN(l)&&(n.height=l)}else h.style.width=n.width+"px";h.style.height=n.height+"px";this.__size=n;this.captureWheel&&(this.getDom("content").style.overflow="auto");return n},showAnchor:function(h,n){this.showAnchorRect(d.getClientRect(h),n)},showAnchorRect:function(h,n,l){this._doAutoRender();var p=d.getViewportRect();this.getDom().style.visibility="hidden";this._show();l=this.fitSize();if(n){n=this.canSideLeft&&h.right+l.width>p.right&&h.left>l.width;p=this.canSideUp&&h.top+l.height>
            p.bottom&&h.bottom>l.height;var r=n?h.left-l.width:h.right;h=p?h.bottom-l.height:h.top}else n=this.canSideLeft&&h.right+l.width>p.right&&h.left>l.width,p=this.canSideUp&&h.top+l.height>p.bottom&&h.bottom>l.height,r=n?h.right-l.width:h.left,h=p?h.top-l.height:h.bottom;l=this.getDom();d.setViewportOffset(l,{left:r,top:h});a.removeClasses(l,f);l.className+=" "+f[2*(p?1:0)+(n?1:0)];this.editor&&(l.style.zIndex=1*this.editor.container.style.zIndex+10,C.editor.ui.uiUtils.getFixedLayer().style.zIndex=l.style.zIndex-
            1);this.getDom().style.visibility="visible"},showAt:function(h){var n=h.left;h=h.top;this.showAnchorRect({left:n,top:h,right:n,bottom:h,height:0,width:0},!1,!0)},_show:function(){this._hidden&&(this.getDom().style.display="",this._hidden=!1,this.fireEvent("show"))},isHidden:function(){return this._hidden},show:function(){this._doAutoRender();this._show()},hide:function(h){!this._hidden&&this.getDom()&&(this.getDom().style.display="none",this._hidden=!0,h||this.fireEvent("hide"))},queryAutoHide:function(h){return!h||
            !d.contains(this.getDom(),h)}};b.inherits(g,c);a.on(document,"mousedown",function(h){k(h,h.target||h.srcElement)});a.on(window,"scroll",function(h,n){k(h,n)})})();(function(){var k=C.editor.utils,b=C.editor.ui.UIBase,d=C.editor.ui.ColorPicker=function(c){this.initOptions(c);this.noColorText=this.noColorText||this.editor.getLang("clearColor");this.initUIBase()};d.prototype={getHtmlTpl:function(){for(var c=this.editor,g='<div id="##" class="edui-colorpicker %%"><div class="edui-colorpicker-topbar edui-clearfix"><div unselectable="on" id="##_preview" class="edui-colorpicker-preview"></div><div unselectable="on" class="edui-colorpicker-nocolor" onclick="$$._onPickNoColor(event, this);">'+
            this.noColorText+'</div></div><table  class="edui-box" style="border-collapse: collapse;" onmouseover="$$._onTableOver(event, this);" onmouseout="$$._onTableOut(event, this);" onclick="return $$._onTableClick(event, this);" cellspacing="0" cellpadding="0"><tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;padding-top: 2px"><td colspan="10">'+c.getLang("themeColor")+'</td> </tr><tr class="edui-colorpicker-tablefirstrow" >',e=0;e<a.length;e++)e&&0===e%10&&(g+="</tr>"+
            (60==e?'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;"><td colspan="10">'+c.getLang("standardColor")+"</td></tr>":"")+"<tr"+(60==e?' class="edui-colorpicker-tablefirstrow"':"")+">"),g+=70>e?'<td style="padding: 0 2px;"><a hidefocus title="'+a[e]+'" onclick="return false;" href="javascript:" unselectable="on" class="edui-box edui-colorpicker-colorcell" data-color="#'+a[e]+'" style="background-color:#'+a[e]+";border:solid #ccc;"+(10>e||60<=e?"border-width:1px;":
            10<=e&&20>e?"border-width:1px 1px 0 1px;":"border-width:0 1px 0 1px;")+'"></a></td>':"";return g+"</tr></table></div>"},_onTableClick:function(c){(c=(c.target||c.srcElement).getAttribute("data-color"))&&this.fireEvent("pickcolor",c)},_onTableOver:function(c){if(c=(c.target||c.srcElement).getAttribute("data-color"))this.getDom("preview").style.backgroundColor=c},_onTableOut:function(){this.getDom("preview").style.backgroundColor=""},_onPickNoColor:function(){this.fireEvent("picknocolor")}};k.inherits(d,
        b);var a="ffffff 000000 eeece1 1f497d 4f81bd c0504d 9bbb59 8064a2 4bacc6 f79646 f2f2f2 7f7f7f ddd9c3 c6d9f0 dbe5f1 f2dcdb ebf1dd e5e0ec dbeef3 fdeada d8d8d8 595959 c4bd97 8db3e2 b8cce4 e5b9b7 d7e3bc ccc1d9 b7dde8 fbd5b5 bfbfbf 3f3f3f 938953 548dd4 95b3d7 d99694 c3d69b b2a2c7 92cddc fac08f a5a5a5 262626 494429 17365d 366092 953734 76923c 5f497a 31859b e36c09 7f7f7f 0c0c0c 1d1b10 0f243e 244061 632423 4f6128 3f3151 205867 974806 c00000 ff0000 ffc000 ffff00 92d050 00b050 00b0f0 0070c0 002060 7030a0 ".split(" ")})();
    (function(){var k=C.editor.utils,b=C.editor.ui.uiUtils,d=C.editor.ui.UIBase,a=C.editor.ui.TablePicker=function(c){this.initOptions(c);this.initTablePicker()};a.prototype={defaultNumRows:10,defaultNumCols:10,maxNumRows:20,maxNumCols:20,numRows:10,numCols:10,lengthOfCellSide:22,initTablePicker:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-tablepicker %%"><div class="edui-tablepicker-body"><div class="edui-infoarea"><span id="##_label" class="edui-label"></span></div><div class="edui-pickarea" onmousemove="$$._onMouseMove(event, this);" onmouseover="$$._onMouseOver(event, this);" onmouseout="$$._onMouseOut(event, this);" onclick="$$._onClick(event, this);"><div id="##_overlay" class="edui-overlay"></div></div></div></div>'},
        _UIBase_render:d.prototype.render,render:function(c){this._UIBase_render(c);this.getDom("label").innerHTML="0"+this.editor.getLang("t_row")+" x 0"+this.editor.getLang("t_col")},_track:function(c,g){var e=this.getDom("overlay").style,f=this.lengthOfCellSide;e.width=c*f+"px";e.height=g*f+"px";this.getDom("label").innerHTML=c+this.editor.getLang("t_col")+" x "+g+this.editor.getLang("t_row");this.numCols=c;this.numRows=g},_onMouseOver:function(c,g){c=c.relatedTarget||c.fromElement;b.contains(g,c)||g===
        c||(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="")},_onMouseOut:function(c,g){c=c.relatedTarget||c.toElement;b.contains(g,c)||g===c||(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="hidden")},_onMouseMove:function(c,g){this.getDom("overlay");c=b.getEventOffset(c);g=this.lengthOfCellSide;this._track(Math.ceil(c.left/
            g),Math.ceil(c.top/g))},_onClick:function(){this.fireEvent("picktable",this.numCols,this.numRows)}};k.inherits(a,d)})();(function(){var k=C.editor.dom.domUtils,b=C.editor.ui.uiUtils,d='onmousedown="$$.Stateful_onMouseDown(event, this);" onmouseup="$$.Stateful_onMouseUp(event, this);"'+(C.editor.browser.ie?' onmouseenter="$$.Stateful_onMouseEnter(event, this);" onmouseleave="$$.Stateful_onMouseLeave(event, this);"':' onmouseover="$$.Stateful_onMouseOver(event, this);" onmouseout="$$.Stateful_onMouseOut(event, this);"');
        C.editor.ui.Stateful={alwalysHoverable:!1,target:null,Stateful_init:function(){this._Stateful_dGetHtmlTpl=this.getHtmlTpl;this.getHtmlTpl=this.Stateful_getHtmlTpl},Stateful_getHtmlTpl:function(){return this._Stateful_dGetHtmlTpl().replace(/stateful/g,function(){return d})},Stateful_onMouseEnter:function(a,c){this.target=c;if(!this.isDisabled()||this.alwalysHoverable)this.addState("hover"),this.fireEvent("over")},Stateful_onMouseLeave:function(a,c){if(!this.isDisabled()||this.alwalysHoverable)this.removeState("hover"),
                this.removeState("active"),this.fireEvent("out")},Stateful_onMouseOver:function(a,c){var g=a.relatedTarget;b.contains(c,g)||c===g||this.Stateful_onMouseEnter(a,c)},Stateful_onMouseOut:function(a,c){var g=a.relatedTarget;b.contains(c,g)||c===g||this.Stateful_onMouseLeave(a,c)},Stateful_onMouseDown:function(a,c){this.isDisabled()||this.addState("active")},Stateful_onMouseUp:function(a,c){this.isDisabled()||this.removeState("active")},Stateful_postRender:function(){this.disabled&&!this.hasState("disabled")&&
            this.addState("disabled")},hasState:function(a){return k.hasClass(this.getStateDom(),"edui-state-"+a)},addState:function(a){this.hasState(a)||(this.getStateDom().className+=" edui-state-"+a)},removeState:function(a){this.hasState(a)&&k.removeClasses(this.getStateDom(),["edui-state-"+a])},getStateDom:function(){return this.getDom("state")},isChecked:function(){return this.hasState("checked")},setChecked:function(a){!this.isDisabled()&&a?this.addState("checked"):this.removeState("checked")},isDisabled:function(){return this.hasState("disabled")},
            setDisabled:function(a){a?(this.removeState("hover"),this.removeState("checked"),this.removeState("active"),this.addState("disabled")):this.removeState("disabled")}}})();(function(){var k=C.editor.utils,b=C.editor.ui.UIBase,d=C.editor.ui.Stateful,a=C.editor.ui.Button=function(c){if(c.name){var g=c.name,e=c.cssRules;c.className||(c.className="edui-for-"+g);c.cssRules=".edui-default  .edui-for-"+g+" .edui-icon {"+e+"}"}this.initOptions(c);this.initButton()};a.prototype={uiName:"button",label:"",title:"",
        showIcon:!0,showText:!0,cssRules:"",initButton:function(){this.initUIBase();this.Stateful_init();this.cssRules&&k.cssRule("edui-customize-"+this.name+"-style",this.cssRules)},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div id="##_state" stateful><div class="%%-wrap"><div id="##_body" unselectable="on" '+(this.title?'title="'+this.title+'"':"")+' class="%%-body" onmousedown="return $$._onMouseDown(event, this);" onclick="return $$._onClick(event, this);">'+(this.showIcon?'<div class="edui-box edui-icon"></div>':
            "")+(this.showText?'<div class="edui-box edui-label">'+this.label+"</div>":"")+"</div></div></div></div>"},postRender:function(){this.Stateful_postRender();this.setDisabled(this.disabled)},_onMouseDown:function(c){c=(c=c.target||c.srcElement)&&c.tagName&&c.tagName.toLowerCase();if("input"==c||"object"==c||"object"==c)return!1},_onClick:function(){this.isDisabled()||this.fireEvent("click")},setTitle:function(c){this.getDom("label").innerHTML=c}};k.inherits(a,b);k.extend(a.prototype,d)})();(function(){var k=
        C.editor.utils,b=C.editor.ui.uiUtils,d=C.editor.ui.UIBase,a=C.editor.ui.Stateful,c=C.editor.ui.SplitButton=function(g){this.initOptions(g);this.initSplitButton()};c.prototype={popup:null,uiName:"splitbutton",title:"",initSplitButton:function(){this.initUIBase();this.Stateful_init();if(null!=this.popup){var g=this.popup;this.popup=null;this.setPopup(g)}},_UIBase_postRender:d.prototype.postRender,postRender:function(){this.Stateful_postRender();this._UIBase_postRender()},setPopup:function(g){this.popup!==
        g&&(null!=this.popup&&this.popup.dispose(),g.addListener("show",k.bind(this._onPopupShow,this)),g.addListener("hide",k.bind(this._onPopupHide,this)),g.addListener("postrender",k.bind(function(){g.getDom("body").appendChild(b.createElementByHtml('<div id="'+this.popup.id+'_bordereraser" class="edui-bordereraser edui-background" style="width:'+(b.getClientRect(this.getDom()).width+20)+'px"></div>'));g.getDom().className+=" "+this.className},this)),this.popup=g)},_onPopupShow:function(){this.addState("opened")},
        _onPopupHide:function(){this.removeState("opened")},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div '+(this.title?'title="'+this.title+'"':"")+' id="##_state" stateful><div class="%%-body"><div id="##_button_body" class="edui-box edui-button-body" onclick="$$._onButtonClick(event, this);"><div class="edui-box edui-icon"></div></div><div class="edui-box edui-splitborder"></div><div class="edui-box edui-arrow" onclick="$$._onArrowClick();"></div></div></div></div>'},showPopup:function(){var g=
            b.getClientRect(this.getDom());g.top-=this.popup.SHADOW_RADIUS;g.height+=this.popup.SHADOW_RADIUS;this.popup.showAnchorRect(g)},_onArrowClick:function(g,e){this.isDisabled()||this.showPopup()},_onButtonClick:function(){this.isDisabled()||this.fireEvent("buttonclick")}};k.inherits(c,d);k.extend(c.prototype,a,!0)})();(function(){var k=C.editor.utils,b=C.editor.ui.uiUtils,d=C.editor.ui.ColorPicker,a=C.editor.ui.Popup,c=C.editor.ui.SplitButton,g=C.editor.ui.ColorButton=function(e){this.initOptions(e);
        this.initColorButton()};g.prototype={initColorButton:function(){var e=this;this.popup=new a({content:new d({noColorText:e.editor.getLang("clearColor"),editor:e.editor,onpickcolor:function(f,h){e._onPickColor(h)},onpicknocolor:function(f,h){e._onPickNoColor(h)}}),editor:e.editor});this.initSplitButton()},_SplitButton_postRender:c.prototype.postRender,postRender:function(){this._SplitButton_postRender();this.getDom("button_body").appendChild(b.createElementByHtml('<div id="'+this.id+'_colorlump" class="edui-colorlump"></div>'));
            this.getDom().className+=" edui-colorbutton"},setColor:function(e){this.color=this.getDom("colorlump").style.backgroundColor=e},_onPickColor:function(e){!1!==this.fireEvent("pickcolor",e)&&(this.setColor(e),this.popup.hide())},_onPickNoColor:function(e){!1!==this.fireEvent("picknocolor")&&this.popup.hide()}};k.inherits(g,c)})();(function(){var k=C.editor.utils,b=C.editor.ui.Popup,d=C.editor.ui.TablePicker,a=C.editor.ui.SplitButton,c=C.editor.ui.TableButton=function(g){this.initOptions(g);this.initTableButton()};
        c.prototype={initTableButton:function(){var g=this;this.popup=new b({content:new d({editor:g.editor,onpicktable:function(e,f,h){g._onPickTable(f,h)}}),editor:g.editor});this.initSplitButton()},_onPickTable:function(g,e){!1!==this.fireEvent("picktable",g,e)&&this.popup.hide()}};k.inherits(c,a)})();(function(){var k=C.editor.utils,b=C.editor.ui.UIBase,d=C.editor.ui.AutoTypeSetPicker=function(a){this.initOptions(a);this.initAutoTypeSetPicker()};d.prototype={initAutoTypeSetPicker:function(){this.initUIBase()},
        getHtmlTpl:function(){var a=this.editor,c=a.options.autotypeset,g=a.getLang("autoTypeSet"),e="textAlignValue"+a.uid,f="imageBlockLineValue"+a.uid,h="symbolConverValue"+a.uid;return'<div id="##" class="edui-autotypesetpicker %%"><div class="edui-autotypesetpicker-body"><table ><tr><td nowrap><input type="checkbox" name="mergeEmptyline" '+(c.mergeEmptyline?"checked":"")+">"+g.mergeLine+'</td><td colspan="2"><input type="checkbox" name="removeEmptyline" '+(c.removeEmptyline?"checked":"")+">"+g.delLine+
            '</td></tr><tr><td nowrap><input type="checkbox" name="removeClass" '+(c.removeClass?"checked":"")+">"+g.removeFormat+'</td><td colspan="2"><input type="checkbox" name="indent" '+(c.indent?"checked":"")+">"+g.indent+'</td></tr><tr><td nowrap><input type="checkbox" name="textAlign" '+(c.textAlign?"checked":"")+">"+g.alignment+'</td><td colspan="2" id="'+e+'"><input type="radio" name="'+e+'" value="left" '+(c.textAlign&&"left"==c.textAlign?"checked":"")+">"+a.getLang("justifyleft")+'<input type="radio" name="'+
            e+'" value="center" '+(c.textAlign&&"center"==c.textAlign?"checked":"")+">"+a.getLang("justifycenter")+'<input type="radio" name="'+e+'" value="right" '+(c.textAlign&&"right"==c.textAlign?"checked":"")+">"+a.getLang("justifyright")+'</td></tr><tr><td nowrap><input type="checkbox" name="imageBlockLine" '+(c.imageBlockLine?"checked":"")+">"+g.imageFloat+'</td><td nowrap id="'+f+'"><input type="radio" name="'+f+'" value="none" '+(c.imageBlockLine&&"none"==c.imageBlockLine?"checked":"")+">"+a.getLang("default")+
            '<input type="radio" name="'+f+'" value="left" '+(c.imageBlockLine&&"left"==c.imageBlockLine?"checked":"")+">"+a.getLang("justifyleft")+'<input type="radio" name="'+f+'" value="center" '+(c.imageBlockLine&&"center"==c.imageBlockLine?"checked":"")+">"+a.getLang("justifycenter")+'<input type="radio" name="'+f+'" value="right" '+(c.imageBlockLine&&"right"==c.imageBlockLine?"checked":"")+">"+a.getLang("justifyright")+'</td></tr><tr><td nowrap><input type="checkbox" name="clearFontSize" '+(c.clearFontSize?
                "checked":"")+">"+g.removeFontsize+'</td><td colspan="2"><input type="checkbox" name="clearFontFamily" '+(c.clearFontFamily?"checked":"")+">"+g.removeFontFamily+'</td></tr><tr><td nowrap colspan="3"><input type="checkbox" name="removeEmptyNode" '+(c.removeEmptyNode?"checked":"")+">"+g.removeHtml+'</td></tr><tr><td nowrap colspan="3"><input type="checkbox" name="pasteFilter" '+(c.pasteFilter?"checked":"")+">"+g.pasteFilter+'</td></tr><tr><td nowrap><input type="checkbox" name="symbolConver" '+(c.bdc2sb||
            c.tobdc?"checked":"")+">"+g.symbol+'</td><td id="'+h+'"><input type="radio" name="bdc" value="bdc2sb" '+(c.bdc2sb?"checked":"")+">"+g.bdc2sb+'<input type="radio" name="bdc" value="tobdc" '+(c.tobdc?"checked":"")+">"+g.tobdc+'</td><td nowrap align="right"><button >'+g.run+"</button></td></tr></table></div></div>"},_UIBase_render:b.prototype.render};k.inherits(d,b)})();(function(){function k(e){for(var f={},h=e.getDom(),n=e.editor.uid,l,p=m.getElementsByTagName(h,"input"),r=p.length-1,q;q=p[r--];)if(l=
        q.getAttribute("type"),"checkbox"==l)if(l=q.getAttribute("name"),f[l]&&delete f[l],q.checked)if(q=document.getElementById(l+"Value"+n))if(/input/ig.test(q.tagName))f[l]=q.value;else{q=q.getElementsByTagName("input");for(var t=q.length-1,u;u=q[t--];)if(u.checked){f[l]=u.value;break}}else f[l]=!0;else f[l]=!1;else f[q.getAttribute("value")]=q.checked;h=m.getElementsByTagName(h,"select");for(r=0;n=h[r++];)p=n.getAttribute("name"),f[p]=f[p]?n.value:"";b.extend(e.editor.options.autotypeset,f);e.editor.setPreferences("autotypeset",
        f)}var b=C.editor.utils,d=C.editor.ui.Popup,a=C.editor.ui.AutoTypeSetPicker,c=C.editor.ui.SplitButton,g=C.editor.ui.AutoTypeSetButton=function(e){this.initOptions(e);this.initAutoTypeSetButton()};g.prototype={initAutoTypeSetButton:function(){var e=this;this.popup=new d({content:new a({editor:e.editor}),editor:e.editor,hide:function(){!this._hidden&&this.getDom()&&(k(this),this.getDom().style.display="none",this._hidden=!0,this.fireEvent("hide"))}});var f=0;this.popup.addListener("postRenderAfter",
            function(){var h=this;if(!f){var n=this.getDom();n.getElementsByTagName("button")[0].onclick=function(){k(h);e.editor.execCommand("autotypeset");h.hide()};m.on(n,"click",function(l){l=l.target||l.srcElement;var p=e.editor.uid;if(l&&"INPUT"==l.tagName){if("imageBlockLine"==l.name||"textAlign"==l.name||"symbolConver"==l.name)for(var r=l.checked,q=document.getElementById(l.name+"Value"+p).getElementsByTagName("input"),t={imageBlockLine:"none",textAlign:"left",symbolConver:"tobdc"},u=0;u<q.length;u++)r?
                q[u].value==t[l.name]&&(q[u].checked="checked"):q[u].checked=!1;(l.name=="imageBlockLineValue"+p||l.name=="textAlignValue"+p||"bdc"==l.name)&&(l=l.parentNode.previousSibling.getElementsByTagName("input"))&&(l[0].checked=!0);k(h)}});f=1}});this.initSplitButton()}};b.inherits(g,c)})();(function(){var k=C.editor.utils,b=C.editor.ui.Popup,d=C.editor.ui.Stateful,a=C.editor.ui.UIBase,c=C.editor.ui.CellAlignPicker=function(g){this.initOptions(g);this.initSelected();this.initCellAlignPicker()};c.prototype=
        {initSelected:function(){var g={top:0,middle:1,bottom:2},e={left:0,center:1,right:2};this.selected&&(this.selectedIndex=3*g[this.selected.valign]+e[this.selected.align])},initCellAlignPicker:function(){this.initUIBase();this.Stateful_init()},getHtmlTpl:function(){for(var g=["left","center","right"],e,f,h=[],n=0;9>n;n++)e=this.selectedIndex===n?' class="edui-cellalign-selected" ':"",f=n%3,0===f&&h.push("<tr>"),h.push('<td index="'+n+'" '+e+' stateful><div class="edui-icon edui-'+g[f]+'"></div></td>'),
            2===f&&h.push("</tr>");return'<div id="##" class="edui-cellalignpicker %%"><div class="edui-cellalignpicker-body"><table onclick="$$._onClick(event);">'+h.join("")+"</table></div></div>"},getStateDom:function(){return this.target},_onClick:function(g){var e=g.target||g.srcElement;/icon/.test(e.className)&&(this.items[e.parentNode.getAttribute("index")].onclick(),b.postHide(g))},_UIBase_render:a.prototype.render};k.inherits(c,a);k.extend(c.prototype,d,!0)})();(function(){var k=C.editor.utils,b=C.editor.ui.Stateful,
        d=C.editor.ui.uiUtils,a=C.editor.ui.UIBase,c=C.editor.ui.PastePicker=function(g){this.initOptions(g);this.initPastePicker()};c.prototype={initPastePicker:function(){this.initUIBase();this.Stateful_init()},getHtmlTpl:function(){return'<div class="edui-pasteicon" onclick="$$._onClick(this)"></div><div class="edui-pastecontainer"><div class="edui-title">'+this.editor.getLang("pasteOpt")+'</div><div class="edui-button"><div title="'+this.editor.getLang("pasteSourceFormat")+'" onclick="$$.format(false)" stateful><div class="edui-richtxticon"></div></div><div title="'+
            this.editor.getLang("tagFormat")+'" onclick="$$.format(2)" stateful><div class="edui-tagicon"></div></div><div title="'+this.editor.getLang("pasteTextFormat")+'" onclick="$$.format(true)" stateful><div class="edui-plaintxticon"></div></div></div></div></div>'},getStateDom:function(){return this.target},format:function(g){this.editor.ui._isTransfer=!0;this.editor.fireEvent("pasteTransfer",g)},_onClick:function(g){var e=m.getNextDomNode(g),f=d.getViewportRect().height,h=d.getClientRect(e);e.style.top=
            h.top+h.height>f?-h.height-g.offsetHeight+"px":"";/hidden/ig.test(m.getComputedStyle(e,"visibility"))?(e.style.visibility="visible",m.addClass(g,"edui-state-opened")):(e.style.visibility="hidden",m.removeClasses(g,"edui-state-opened"))},_UIBase_render:a.prototype.render};k.inherits(c,a);k.extend(c.prototype,b,!0)})();(function(){var k=C.editor.utils,b=C.editor.ui.uiUtils,d=C.editor.ui.UIBase,a=C.editor.ui.Toolbar=function(c){this.initOptions(c);this.initToolbar()};a.prototype={items:null,initToolbar:function(){this.items=
            this.items||[];this.initUIBase()},add:function(c,g){void 0===g?this.items.push(c):this.items.splice(g,0,c)},getHtmlTpl:function(){for(var c=[],g=0;g<this.items.length;g++)c[g]=this.items[g].renderHtml();return'<div id="##" class="edui-toolbar %%" onselectstart="return false;" onmousedown="return $$._onMouseDown(event, this);">'+c.join("")+"</div>"},postRender:function(){for(var c=this.getDom(),g=0;g<this.items.length;g++)this.items[g].postRender();b.makeUnselectable(c)},_onMouseDown:function(c){c=
            (c=c.target||c.srcElement)&&c.tagName&&c.tagName.toLowerCase();if("input"==c||"object"==c||"object"==c)return!1}};k.inherits(a,d)})();(function(){var k=C.editor.utils,b=C.editor.dom.domUtils,d=C.editor.ui.uiUtils,a=C.editor.ui.UIBase,c=C.editor.ui.Popup,g=C.editor.ui.Stateful,e=C.editor.ui.CellAlignPicker,f=C.editor.ui.Menu=function(l){this.initOptions(l);this.initMenu()},h={renderHtml:function(){return'<div class="edui-menuitem edui-menuseparator"><div class="edui-menuseparator-inner"></div></div>'},
        postRender:function(){},queryAutoHide:function(){return!0}};f.prototype={items:null,uiName:"menu",initMenu:function(){this.items=this.items||[];this.initPopup();this.initItems()},initItems:function(){for(var l=0;l<this.items.length;l++){var p=this.items[l];"-"==p?this.items[l]=this.getSeparator():p instanceof n||(p.editor=this.editor,p.theme=this.editor.options.theme,this.items[l]=this.createItem(p))}},getSeparator:function(){return h},createItem:function(l){l.menu=this;return new n(l)},_Popup_getContentHtmlTpl:c.prototype.getContentHtmlTpl,
        getContentHtmlTpl:function(){if(0==this.items.length)return this._Popup_getContentHtmlTpl();for(var l=[],p=0;p<this.items.length;p++)l[p]=this.items[p].renderHtml();return'<div class="%%-body">'+l.join("")+"</div>"},_Popup_postRender:c.prototype.postRender,postRender:function(){for(var l=this,p=0;p<this.items.length;p++){var r=this.items[p];r.ownerMenu=this;r.postRender()}b.on(this.getDom(),"mouseover",function(q){q=q||event;q=q.relatedTarget||q.fromElement;var t=l.getDom();d.contains(t,q)||t===q||
        l.fireEvent("over")});this._Popup_postRender()},queryAutoHide:function(l){if(l){if(d.contains(this.getDom(),l))return!1;for(var p=0;p<this.items.length;p++)if(!1===this.items[p].queryAutoHide(l))return!1}},clearItems:function(){for(var l=0;l<this.items.length;l++){var p=this.items[l];clearTimeout(p._showingTimer);clearTimeout(p._closingTimer);p.subMenu&&p.subMenu.destroy()}this.items=[]},destroy:function(){this.getDom()&&b.remove(this.getDom());this.clearItems()},dispose:function(){this.destroy()}};
        k.inherits(f,c);var n=C.editor.ui.MenuItem=function(l){this.initOptions(l);this.initUIBase();this.Stateful_init();if(this.subMenu&&!(this.subMenu instanceof f))if(l.className&&-1!=l.className.indexOf("aligntd")){var p=this;this.subMenu.selected=this.editor.queryCommandValue("cellalignment");this.subMenu=new c({content:new e(this.subMenu),parentMenu:p,editor:p.editor,destroy:function(){this.getDom()&&b.remove(this.getDom())}});this.subMenu.addListener("postRenderAfter",function(){b.on(this.getDom(),
            "mouseover",function(){p.addState("opened")})})}else this.subMenu=new f(this.subMenu)};n.prototype={label:"",subMenu:null,ownerMenu:null,uiName:"menuitem",alwalysHoverable:!0,getHtmlTpl:function(){return'<div id="##" class="%%" stateful onclick="$$._onClick(event, this);"><div class="%%-body">'+this.renderLabelHtml()+"</div></div>"},postRender:function(){var l=this;this.addListener("over",function(){l.ownerMenu.fireEvent("submenuover",l);l.subMenu&&l.delayShowSubMenu()});this.subMenu&&(this.getDom().className+=
                " edui-hassubmenu",this.subMenu.render(),this.addListener("out",function(){l.delayHideSubMenu()}),this.subMenu.addListener("over",function(){clearTimeout(l._closingTimer);l._closingTimer=null;l.addState("opened")}),this.ownerMenu.addListener("hide",function(){l.hideSubMenu()}),this.ownerMenu.addListener("submenuover",function(p,r){r!==l&&l.delayHideSubMenu()}),this.subMenu._bakQueryAutoHide=this.subMenu.queryAutoHide,this.subMenu.queryAutoHide=function(p){return p&&d.contains(l.getDom(),p)?!1:this._bakQueryAutoHide(p)});
                this.getDom().style.tabIndex="-1";d.makeUnselectable(this.getDom());this.Stateful_postRender()},delayShowSubMenu:function(){var l=this;l.isDisabled()||(l.addState("opened"),clearTimeout(l._showingTimer),clearTimeout(l._closingTimer),l._closingTimer=null,l._showingTimer=setTimeout(function(){l.showSubMenu()},250))},delayHideSubMenu:function(){var l=this;l.isDisabled()||(l.removeState("opened"),clearTimeout(l._showingTimer),l._closingTimer||(l._closingTimer=setTimeout(function(){l.hasState("opened")||
            l.hideSubMenu();l._closingTimer=null},400)))},renderLabelHtml:function(){return'<div class="edui-arrow"></div><div class="edui-box edui-icon"></div><div class="edui-box edui-label %%-label">'+(this.label||"")+"</div>"},getStateDom:function(){return this.getDom()},queryAutoHide:function(l){if(this.subMenu&&this.hasState("opened"))return this.subMenu.queryAutoHide(l)},_onClick:function(l,p){this.hasState("disabled")||!1!==this.fireEvent("click",l,p)&&(this.subMenu?this.showSubMenu():c.postHide(l))},
            showSubMenu:function(){var l=d.getClientRect(this.getDom());l.right-=5;l.left+=2;l.width-=7;l.top-=4;l.bottom+=4;l.height+=8;this.subMenu.showAnchorRect(l,!0,!0)},hideSubMenu:function(){this.subMenu.hide()}};k.inherits(n,a);k.extend(n.prototype,g,!0)})();(function(){var k=C.editor.utils,b=C.editor.ui.uiUtils,d=C.editor.ui.Menu,a=C.editor.ui.SplitButton,c=C.editor.ui.Combox=function(g){this.initOptions(g);this.initCombox()};c.prototype={uiName:"combox",onbuttonclick:function(){this.showPopup()},initCombox:function(){var g=
            this;this.items=this.items||[];for(var e=0;e<this.items.length;e++){var f=this.items[e];f.uiName="listitem";f.index=e;f.onclick=function(){g.selectByIndex(this.index)}}this.popup=new d({items:this.items,uiName:"list",editor:this.editor,captureWheel:!0,combox:this});this.initSplitButton()},_SplitButton_postRender:a.prototype.postRender,postRender:function(){this._SplitButton_postRender();this.setLabel(this.label||"");this.setValue(this.initValue||"")},showPopup:function(){var g=b.getClientRect(this.getDom());
            g.top+=1;--g.bottom;g.height-=2;this.popup.showAnchorRect(g)},getValue:function(){return this.value},setValue:function(g){var e=this.indexByValue(g);-1!=e?(this.selectedIndex=e,this.setLabel(this.items[e].label),this.value=this.items[e].value):(this.selectedIndex=-1,this.setLabel(this.getLabelForUnknowValue(g)),this.value=g)},setLabel:function(g){this.label=this.getDom("button_body").innerHTML=g},getLabelForUnknowValue:function(g){return g},indexByValue:function(g){for(var e=0;e<this.items.length;e++)if(g==
            this.items[e].value)return e;return-1},getItem:function(g){return this.items[g]},selectByIndex:function(g){g<this.items.length&&!1!==this.fireEvent("select",g)&&(this.selectedIndex=g,this.value=this.items[g].value,this.setLabel(this.items[g].label))}};k.inherits(c,a)})();(function(){var k=C.editor.utils,b=C.editor.dom.domUtils,d=C.editor.ui.uiUtils,a=C.editor.ui.Mask,c=C.editor.ui.UIBase,g=C.editor.ui.Button,e=C.editor.ui.Dialog=function(l){if(l.name){var p=l.name,r=l.cssRules;l.className||(l.className=
        "edui-for-"+p);r&&(l.cssRules=".edui-default .edui-for-"+p+" .edui-dialog-content  {"+r+"}")}this.initOptions(k.extend({autoReset:!0,draggable:!0,onok:function(){},oncancel:function(){},onclose:function(q,t){return t?this.onok():this.oncancel()},holdScroll:!1},l));this.initDialog()},f,h,n;e.prototype={draggable:!1,uiName:"dialog",initDialog:function(){var l=this,p=this.editor.options.theme;this.cssRules&&k.cssRule("edui-customize-"+this.name+"-style",this.cssRules);this.initUIBase();this.modalMask=
            f||(f=new a({className:"edui-dialog-modalmask",theme:p,onclick:function(){n&&n.close(!1)}}));this.dragMask=h||(h=new a({className:"edui-dialog-dragmask",theme:p}));this.closeButton=new g({className:"edui-dialog-closebutton",title:l.closeDialog,theme:p,onclick:function(){l.close(!1)}});this.fullscreen&&this.initResizeEvent();if(this.buttons)for(p=0;p<this.buttons.length;p++)this.buttons[p]instanceof g||(this.buttons[p]=new g(k.extend(this.buttons[p],{editor:this.editor},!0)))},initResizeEvent:function(){var l=
            this;b.on(window,"resize",function(){l._hidden||void 0===l._hidden||(l.__resizeTimer&&window.clearTimeout(l.__resizeTimer),l.__resizeTimer=window.setTimeout(function(){l.__resizeTimer=null;var p=l.getDom(),r=l.getDom("content"),q=UE.ui.uiUtils.getClientRect(p),t=UE.ui.uiUtils.getClientRect(r),u=d.getViewportRect();r.style.width=u.width-q.width+t.width+"px";r.style.height=u.height-q.height+t.height+"px";p.style.width=u.width+"px";p.style.height=u.height+"px";l.fireEvent("resize")},100))})},fitSize:function(){var l=
            this.getDom("body"),p=this.mesureSize();l.style.width=p.width+"px";l.style.height=p.height+"px";return p},safeSetOffset:function(l){var p=this.getDom(),r=d.getViewportRect(),q=d.getClientRect(p),t=l.left;t+q.width>r.right&&(t=r.right-q.width);l=l.top;l+q.height>r.bottom&&(l=r.bottom-q.height);p.style.left=Math.max(t,0)+"px";p.style.top=Math.max(l,0)+"px"},showAtCenter:function(){var l=d.getViewportRect();if(this.fullscreen){var p=this.getDom(),r=this.getDom("content");p.style.display="block";var q=
            UE.ui.uiUtils.getClientRect(p),t=UE.ui.uiUtils.getClientRect(r);r.style.width=l.width-q.width+t.width+"px";r.style.height=l.height-q.height+t.height+"px";p.style.width=l.width+"px";p.style.height=l.height+"px";p.style.left=0;this._originalContext={html:{overflowX:document.documentElement.style.overflowX,overflowY:document.documentElement.style.overflowY},body:{overflowX:document.body.style.overflowX,overflowY:document.body.style.overflowY}};document.documentElement.style.overflowX="hidden";document.documentElement.style.overflowY=
            "hidden";document.body.style.overflowX="hidden";document.body.style.overflowY="hidden"}else this.getDom().style.display="",r=this.fitSize(),q=this.getDom("titlebar").offsetHeight|0,p=l.width/2-r.width/2,l=l.height/2-(r.height-q)/2-q,r=this.getDom(),this.safeSetOffset({left:Math.max(p|0,0),top:Math.max(l|0,0)}),b.hasClass(r,"edui-state-centered")||(r.className+=" edui-state-centered");this._show()},getContentHtml:function(){var l="";"string"==typeof this.content?l=this.content:this.iframeUrl&&(l='<span id="'+
            this.id+'_contmask" class="dialogcontmask"></span><iframe id="'+this.id+'_iframe" class="%%-iframe" height="100%" width="100%" frameborder="0" src="'+this.iframeUrl+'"></iframe>');return l},getHtmlTpl:function(){var l="";if(this.buttons){l=[];for(var p=0;p<this.buttons.length;p++)l[p]=this.buttons[p].renderHtml();l='<div class="%%-foot"><div id="##_buttons" class="%%-buttons">'+l.join("")+"</div></div>"}return'<div id="##" class="%%"><div '+(this.fullscreen?'class="%%-wrap edui-dialog-fullscreen-flag"':
            'class="%%"')+'><div id="##_body" class="%%-body"><div class="%%-shadow"></div><div id="##_titlebar" class="%%-titlebar"><div class="%%-draghandle" onmousedown="$$._onTitlebarMouseDown(event, this);"><span class="%%-caption">'+(this.title||"")+"</span></div>"+this.closeButton.renderHtml()+'</div><div id="##_content" class="%%-content">'+(this.autoReset?"":this.getContentHtml())+"</div>"+l+"</div></div></div>"},postRender:function(){this.modalMask.getDom()||(this.modalMask.render(),this.modalMask.hide());
            this.dragMask.getDom()||(this.dragMask.render(),this.dragMask.hide());var l=this;this.addListener("show",function(){l.modalMask.show(this.getDom().style.zIndex-2)});this.addListener("hide",function(){l.modalMask.hide()});if(this.buttons)for(var p=0;p<this.buttons.length;p++)this.buttons[p].postRender();b.on(window,"resize",function(){setTimeout(function(){l.isHidden()||l.safeSetOffset(d.getClientRect(l.getDom()))})});this._hide()},mesureSize:function(){var l=this.getDom("body"),p=d.getClientRect(this.getDom("content")).width;
            l.style.width=p;return d.getClientRect(l)},_onTitlebarMouseDown:function(l,p){if(this.draggable){var r;d.getViewportRect();var q=this;d.startDrag(l,{ondragstart:function(){r=d.getClientRect(q.getDom());q.getDom("contmask").style.visibility="visible";q.dragMask.show(q.getDom().style.zIndex-1)},ondragmove:function(t,u){q.safeSetOffset({left:r.left+t,top:r.top+u})},ondragstop:function(){q.getDom("contmask").style.visibility="hidden";b.removeClasses(q.getDom(),["edui-state-centered"]);q.dragMask.hide()}})}},
        reset:function(){this.getDom("content").innerHTML=this.getContentHtml();this.fireEvent("dialogafterreset")},_show:function(){this._hidden&&(this.getDom().style.display="",this.editor.container.style.zIndex&&(this.getDom().style.zIndex=1*this.editor.container.style.zIndex+10),this._hidden=!1,this.fireEvent("show"),C.editor.ui.uiUtils.getFixedLayer().style.zIndex=this.getDom().style.zIndex-4)},isHidden:function(){return this._hidden},_hide:function(){if(!this._hidden){var l=this.getDom();l.style.display=
            "none";l.style.zIndex="";l.style.width="";l.style.height="";this._hidden=!0;this.fireEvent("hide")}},open:function(){if(this.autoReset)try{this.reset()}catch(l){this.render(),this.open()}this.showAtCenter();if(this.iframeUrl)try{this.getDom("iframe").focus()}catch(l){}n=this},_onCloseButtonClick:function(l,p){this.close(!1)},close:function(l){if(!1!==this.fireEvent("close",l)){this.fullscreen&&(document.documentElement.style.overflowX=this._originalContext.html.overflowX,document.documentElement.style.overflowY=
            this._originalContext.html.overflowY,document.body.style.overflowX=this._originalContext.body.overflowX,document.body.style.overflowY=this._originalContext.body.overflowY,delete this._originalContext);this._hide();l=this.getDom("content");var p=this.getDom("iframe");l&&p&&((p=p.contentDocument||p.contentWindow.document)&&(p.body.innerHTML=""),b.remove(l))}}};k.inherits(e,c)})();(function(){var k=C.editor.utils,b=C.editor.ui.Menu,d=C.editor.ui.SplitButton,a=C.editor.ui.MenuButton=function(c){this.initOptions(c);
        this.initMenuButton()};a.prototype={initMenuButton:function(){var c=this;this.uiName="menubutton";this.popup=new b({items:c.items,className:c.className,editor:c.editor});this.popup.addListener("show",function(){for(var g=0;g<this.items.length;g++)this.items[g].removeState("checked"),this.items[g].value==c._value&&(this.items[g].addState("checked"),this.value=c._value)});this.initSplitButton()},setValue:function(c){this._value=c}};k.inherits(a,d)})();(function(){var k=C.editor.utils,b=C.editor.ui.Popup,
        d=C.editor.ui.SplitButton,a=C.editor.ui.MultiMenuPop=function(c){this.initOptions(c);this.initMultiMenu()};a.prototype={initMultiMenu:function(){var c=this;this.popup=new b({content:"",editor:c.editor,iframe_rendered:!1,onshow:function(){this.iframe_rendered||(this.iframe_rendered=!0,this.getDom("content").innerHTML='<iframe id="'+c.id+'_iframe" src="'+c.iframeUrl+'" frameborder="0"></iframe>',c.editor.container.style.zIndex&&(this.getDom().style.zIndex=1*c.editor.container.style.zIndex+1))}});this.onbuttonclick=
            function(){this.showPopup()};this.initSplitButton()}};k.inherits(a,d)})();(function(){function k(l){if(!g.findParent(l.target||l.srcElement,function(r){return g.hasClass(r,"edui-shortcutmenu")||g.hasClass(r,"edui-popup")},!0)){l=0;for(var p;p=e[l++];)p.hide()}}var b=C.editor.ui,d=b.UIBase,a=b.uiUtils,c=C.editor.utils,g=C.editor.dom.domUtils,e=[],f,h=!1,n=b.ShortCutMenu=function(l){this.initOptions(l);this.initShortCutMenu()};n.postHide=k;n.prototype={isHidden:!0,SPACE:5,initShortCutMenu:function(){this.items=
            this.items||[];this.initUIBase();this.initItems();this.initEvent();e.push(this)},initEvent:function(){var l=this,p=l.editor.document;g.on(p,"mousemove",function(r){if(!1===l.isHidden&&!l.getSubMenuMark()&&"contextmenu"!=l.eventType){var q=!0,t=l.getDom(),u=t.offsetWidth/2+l.SPACE,w=t.offsetHeight/2,v=Math.abs(r.screenX-l.left),y=Math.abs(r.screenY-l.top);clearTimeout(f);f=setTimeout(function(){0<y&&y<w?l.setOpacity(t,"1"):y>w&&y<w+70?(l.setOpacity(t,"0.5"),q=!1):y>w+70&&y<w+140&&l.hide();q&&0<v&&
        v<u?l.setOpacity(t,"1"):v>u&&v<u+70?l.setOpacity(t,"0.5"):v>u+70&&v<u+140&&l.hide()})}});if(B.chrome)g.on(p,"mouseout",function(r){r=r.relatedTarget||r.toElement;null!=r&&"HTML"!=r.tagName||l.hide()});l.editor.addListener("afterhidepop",function(){l.isHidden||(h=!0)})},initItems:function(){if(c.isArray(this.items))for(var l=0,p=this.items.length;l<p;l++){var r=this.items[l].toLowerCase();b[r]&&(this.items[l]=new b[r](this.editor),this.items[l].className+=" edui-shortcutsubmenu ")}},setOpacity:function(l,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   p){B.ie&&9>B.version?l.style.filter="alpha(opacity = "+100*parseFloat(p)+");":l.style.opacity=p},getSubMenuMark:function(){h=!1;var l=a.getFixedLayer();l=g.getElementsByTagName(l,"div",function(q){return g.hasClass(q,"edui-shortcutsubmenu edui-popup")});for(var p=0,r;r=l[p++];)"none"!=r.style.display&&(h=!0);return h},show:function(l,p){function r(v){0>v.left&&(v.left=0);0>v.top&&(v.top=0);u.style.cssText="position:absolute;left:"+v.left+"px;top:"+v.top+"px;"}function q(v){v.tagName||(v=v.getDom());
            t.left=parseInt(v.style.left);t.top=parseInt(v.style.top);t.top-=u.offsetHeight+15;r(t)}var t={},u=this.getDom(),w=a.getFixedLayer();this.eventType=l.type;u.style.cssText="display:block;left:-9999px";"contextmenu"==l.type&&p?(p=g.getElementsByTagName(w,"div","edui-contextmenu")[0])?q(p):this.editor.addListener("aftershowcontextmenu",function(v,y){q(y)}):(t=a.getViewportOffsetByEvent(l),t.top-=u.offsetHeight+this.SPACE,t.left+=this.SPACE+20,r(t),this.setOpacity(u,.2));this.isHidden=!1;this.left=l.screenX+
            u.offsetWidth/2-this.SPACE;this.top=l.screenY-u.offsetHeight/2-this.SPACE;this.editor&&(u.style.zIndex=1*this.editor.container.style.zIndex+10,w.style.zIndex=u.style.zIndex-1)},hide:function(){this.getDom()&&(this.getDom().style.display="none");this.isHidden=!0},postRender:function(){if(c.isArray(this.items))for(var l=0,p;p=this.items[l++];)p.postRender()},getHtmlTpl:function(){if(c.isArray(this.items)){var l=[];for(var p=0;p<this.items.length;p++)l[p]=this.items[p].renderHtml();l=l.join("")}else l=
            this.items;return'<div id="##" class="%% edui-toolbar" data-src="shortcutmenu" onmousedown="return false;" onselectstart="return false;" >'+l+"</div>"}};c.inherits(n,d);g.on(document,"mousedown",function(l){k(l)});g.on(window,"scroll",function(l){k(l)})})();(function(){var k=C.editor.utils,b=C.editor.ui.UIBase,d=C.editor.ui.Breakline=function(a){this.initOptions(a);this.initSeparator()};d.prototype={uiName:"Breakline",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return"<br/>"}};
        k.inherits(d,b)})();(function(){var k=C.editor.utils,b=C.editor.dom.domUtils,d=C.editor.ui.UIBase,a=C.editor.ui.Message=function(c){this.initOptions(c);this.initMessage()};a.prototype={initMessage:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-message %%"> <div id="##_closer" class="edui-message-closer">\u00d7</div> <div id="##_body" class="edui-message-body edui-message-type-info"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-message-content">  </div> </div></div>'},
        reset:function(c){var g=this;c.keepshow||(clearTimeout(this.timer),g.timer=setTimeout(function(){g.hide()},c.timeout||4E3));void 0!==c.content&&g.setContent(c.content);void 0!==c.type&&g.setType(c.type);g.show()},postRender:function(){var c=this,g=this.getDom("closer");g&&b.on(g,"click",function(){c.hide()})},setContent:function(c){this.getDom("content").innerHTML=c},setType:function(c){c=c||"info";var g=this.getDom("body");g.className=g.className.replace(/edui-message-type-[\w-]+/,"edui-message-type-"+
            c)},getContent:function(){return this.getDom("content").innerHTML},getType:function(){var c=this.getDom("body").match(/edui-message-type-([\w-]+)/);return c?c[1]:""},show:function(){this.getDom().style.display="block"},hide:function(){var c=this.getDom();c&&(c.style.display="none",c.parentNode&&c.parentNode.removeChild(c))}};k.inherits(a,d)})();(function(){var k=C.editor.utils,b=C.editor.ui,d=b.Dialog;b.buttons={};b.Dialog=function(h){var n=new d(h);n.addListener("hide",function(){if(n.editor){var l=
        n.editor;try{if(B.gecko){var p=l.window.scrollY,r=l.window.scrollX;l.body.focus();l.window.scrollTo(r,p)}else l.focus()}catch(q){}}});return n};for(var a={anchor:"~/dialogs/anchor/anchor.html",insertimage:"~/dialogs/image/image.html",link:"~/dialogs/link/link.html",spechars:"~/dialogs/spechars/spechars.html",searchreplace:"~/dialogs/searchreplace/searchreplace.html",map:"~/dialogs/map/map.html",gmap:"~/dialogs/gmap/gmap.html",insertvideo:"~/dialogs/video/video.html",help:"~/dialogs/help/help.html",
            preview:"~/dialogs/preview/preview.html",emotion:"~/dialogs/emotion/emotion.html",wordimage:"~/dialogs/wordimage/wordimage.html",attachment:"~/dialogs/attachment/attachment.html",insertframe:"~/dialogs/insertframe/insertframe.html",edittip:"~/dialogs/table/edittip.html",edittable:"~/dialogs/table/edittable.html",edittd:"~/dialogs/table/edittd.html",webapp:"~/dialogs/webapp/webapp.html",snapscreen:"~/dialogs/snapscreen/snapscreen.html",scrawl:"~/dialogs/scrawl/scrawl.html",music:"~/dialogs/music/music.html",
            template:"~/dialogs/template/template.html",background:"~/dialogs/background/background.html",charts:"~/dialogs/charts/charts.html"},c="undo redo formatmatch bold italic underline fontborder touppercase tolowercase strikethrough subscript superscript source indent outdent blockquote pasteplain pagebreak selectall print horizontal removeformat time date unlink insertparagraphbeforetable insertrow insertcol mergeright mergedown deleterow deletecol splittorows splittocols splittocells mergecells deletetable drafts".split(" "),
                                                                                                                                                                g=0,e;e=c[g++];)e=e.toLowerCase(),b[e]=function(h){return function(n){var l=new b.Button({className:"edui-for-"+h,title:n.options.labelMap[h]||n.getLang("labelMap."+h)||"",onclick:function(){n.execCommand(h)},theme:n.options.theme,showText:!1});b.buttons[h]=l;n.addListener("selectionchange",function(p,r,q){p=n.queryCommandState(h);-1==p?(l.setDisabled(!0),l.setChecked(!1)):q||(l.setDisabled(!1),l.setChecked(p))});return l}}(e);b.cleardoc=function(h){var n=new b.Button({className:"edui-for-cleardoc",
        title:h.options.labelMap.cleardoc||h.getLang("labelMap.cleardoc")||"",theme:h.options.theme,onclick:function(){confirm(h.getLang("confirmClear"))&&h.execCommand("cleardoc")}});b.buttons.cleardoc=n;h.addListener("selectionchange",function(){n.setDisabled(-1==h.queryCommandState("cleardoc"))});return n};c={justify:["left","right","center","justify"],imagefloat:["none","left","center","right"],directionality:["ltr","rtl"]};for(var f in c)(function(h,n){for(var l=0,p;p=n[l++];)(function(r){b[h.replace("float",
        "")+r]=function(q){var t=new b.Button({className:"edui-for-"+h.replace("float","")+r,title:q.options.labelMap[h.replace("float","")+r]||q.getLang("labelMap."+h.replace("float","")+r)||"",theme:q.options.theme,onclick:function(){q.execCommand(h,r)}});b.buttons[h]=t;q.addListener("selectionchange",function(u,w,v){t.setDisabled(-1==q.queryCommandState(h));t.setChecked(q.queryCommandValue(h)==r&&!v)});return t}})(p)})(f,c[f]);for(g=0;e=["backcolor","forecolor"][g++];)b[e]=function(h){return function(n){var l=
        new b.ColorButton({className:"edui-for-"+h,color:"default",title:n.options.labelMap[h]||n.getLang("labelMap."+h)||"",editor:n,onpickcolor:function(p,r){n.execCommand(h,r)},onpicknocolor:function(){n.execCommand(h,"default");this.setColor("transparent");this.color="default"},onbuttonclick:function(){n.execCommand(h,this.color)}});b.buttons[h]=l;n.addListener("selectionchange",function(){l.setDisabled(-1==n.queryCommandState(h))});return l}}(e);c={noOk:["searchreplace","help","spechars","webapp","preview"],
        ok:"attachment anchor link insertimage map gmap insertframe wordimage insertvideo insertframe edittip edittable edittd scrawl template music background charts".split(" ")};for(f in c)(function(h,n){for(var l=0,p;p=n[l++];)B.opera&&"searchreplace"===p||function(r){b[r]=function(q,t,u){t=t||(q.options.iframeUrlMap||{})[r]||a[r];u=q.options.labelMap[r]||q.getLang("labelMap."+r)||"";if(t){var w=new b.Dialog(k.extend({iframeUrl:q.ui.mapUrl(t),editor:q,className:"edui-for-"+r,title:u,holdScroll:"insertimage"===
            r,fullscreen:/charts|preview/.test(r),closeDialog:q.getLang("closeDialog")},"ok"==h?{buttons:[{className:"edui-okbutton",label:q.getLang("ok"),editor:q,onclick:function(){w.close(!0)}},{className:"edui-cancelbutton",label:q.getLang("cancel"),editor:q,onclick:function(){w.close(!1)}}]}:{}));q.ui._dialogs[r+"Dialog"]=w}var v=new b.Button({className:"edui-for-"+r,title:u,onclick:function(){if(w)switch(r){case "wordimage":var y=q.execCommand("wordimage");y&&y.length&&(w.render(),w.open());break;case "scrawl":-1!=
        q.queryCommandState("scrawl")&&(w.render(),w.open());break;default:w.render(),w.open()}},theme:q.options.theme,disabled:"scrawl"==r&&-1==q.queryCommandState("scrawl")||"charts"==r});b.buttons[r]=v;q.addListener("selectionchange",function(){if(!(r in{edittable:1})){var y=q.queryCommandState(r);v.getDom()&&(v.setDisabled(-1==y),v.setChecked(y))}});return v}}(p.toLowerCase())})(f,c[f]);b.snapscreen=function(h,n,l){l=h.options.labelMap.snapscreen||h.getLang("labelMap.snapscreen")||"";var p=new b.Button({className:"edui-for-snapscreen",
        title:l,onclick:function(){h.execCommand("snapscreen")},theme:h.options.theme});b.buttons.snapscreen=p;if(n=n||(h.options.iframeUrlMap||{}).snapscreen||a.snapscreen){var r=new b.Dialog({iframeUrl:h.ui.mapUrl(n),editor:h,className:"edui-for-snapscreen",title:l,buttons:[{className:"edui-okbutton",label:h.getLang("ok"),editor:h,onclick:function(){r.close(!0)}},{className:"edui-cancelbutton",label:h.getLang("cancel"),editor:h,onclick:function(){r.close(!1)}}]});r.render();h.ui._dialogs.snapscreenDialog=
        r}h.addListener("selectionchange",function(){p.setDisabled(-1==h.queryCommandState("snapscreen"))});return p};b.insertcode=function(h,n,l){n=h.options.insertcode||[];l=h.options.labelMap.insertcode||h.getLang("labelMap.insertcode")||"";var p=[];k.each(n,function(q,t){p.push({label:q,value:t,theme:h.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" >'+(this.label||"")+"</div>"}})});var r=new b.Combox({editor:h,items:p,onselect:function(q,t){h.execCommand("insertcode",
            this.items[t].value)},onbuttonclick:function(){this.showPopup()},title:l,initValue:l,className:"edui-for-insertcode",indexByValue:function(q){if(q)for(var t=0,u;u=this.items[t];t++)if(-1!=u.value.indexOf(q))return t;return-1}});b.buttons.insertcode=r;h.addListener("selectionchange",function(q,t,u){u||(-1==h.queryCommandState("insertcode")?r.setDisabled(!0):(r.setDisabled(!1),(q=h.queryCommandValue("insertcode"))?(q&&(q=q.replace(/['"]/g,"").split(",")[0]),r.setValue(q)):r.setValue(l)))});return r};
        b.fontfamily=function(h,n,l){n=h.options.fontfamily||[];l=h.options.labelMap.fontfamily||h.getLang("labelMap.fontfamily")||"";if(n.length){for(var p=0,r,q=[];r=n[p];p++){var t=h.getLang("fontfamily")[r.name]||"";(function(w,v){q.push({label:w,value:v,theme:h.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="font-family:'+k.unhtml(this.value)+'">'+(this.label||"")+"</div>"}})})(r.label||t,r.val)}var u=new b.Combox({editor:h,items:q,onselect:function(w,v){h.execCommand("FontFamily",
                this.items[v].value)},onbuttonclick:function(){this.showPopup()},title:l,initValue:l,className:"edui-for-fontfamily",indexByValue:function(w){if(w)for(var v=0,y;y=this.items[v];v++)if(-1!=y.value.indexOf(w))return v;return-1}});b.buttons.fontfamily=u;h.addListener("selectionchange",function(w,v,y){y||(-1==h.queryCommandState("FontFamily")?u.setDisabled(!0):(u.setDisabled(!1),(w=h.queryCommandValue("FontFamily"))&&(w=w.replace(/['"]/g,"").split(",")[0]),u.setValue(w)))});return u}};b.fontsize=function(h,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          n,l){l=h.options.labelMap.fontsize||h.getLang("labelMap.fontsize")||"";n=n||h.options.fontsize||[];if(n.length){for(var p=[],r=0;r<n.length;r++){var q=n[r]+"px";p.push({label:q,value:q,theme:h.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="line-height:1;font-size:'+this.value+'">'+(this.label||"")+"</div>"}})}var t=new b.Combox({editor:h,items:p,title:l,initValue:l,onselect:function(u,w){h.execCommand("FontSize",this.items[w].value)},onbuttonclick:function(){this.showPopup()},
            className:"edui-for-fontsize"});b.buttons.fontsize=t;h.addListener("selectionchange",function(u,w,v){v||(-1==h.queryCommandState("FontSize")?t.setDisabled(!0):(t.setDisabled(!1),t.setValue(h.queryCommandValue("FontSize"))))});return t}};b.paragraph=function(h,n,l){l=h.options.labelMap.paragraph||h.getLang("labelMap.paragraph")||"";n=h.options.paragraph||[];if(!k.isEmptyObject(n)){var p=[],r;for(r in n)p.push({value:r,label:n[r]||h.getLang("paragraph")[r],theme:h.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><span class="edui-for-'+
                this.value+'">'+(this.label||"")+"</span></div>"}});var q=new b.Combox({editor:h,items:p,title:l,initValue:l,className:"edui-for-paragraph",onselect:function(t,u){h.execCommand("Paragraph",this.items[u].value)},onbuttonclick:function(){this.showPopup()}});b.buttons.paragraph=q;h.addListener("selectionchange",function(t,u,w){w||(-1==h.queryCommandState("Paragraph")?q.setDisabled(!0):(q.setDisabled(!1),t=h.queryCommandValue("Paragraph"),-1!=q.indexByValue(t)?q.setValue(t):q.setValue(q.initValue)))});
            return q}};b.customstyle=function(h){var n=h.options.customstyle||[],l=h.options.labelMap.customstyle||h.getLang("labelMap.customstyle")||"";if(n.length){for(var p=h.getLang("customstyle"),r=0,q=[],t;t=n[r++];)(function(w){var v={};v.label=w.label?w.label:p[w.name];v.style=w.style;v.className=w.className;v.tag=w.tag;q.push({label:v.label,value:v,theme:h.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><'+v.tag+" "+(v.className?' class="'+v.className+'"':"")+(v.style?
                ' style="'+v.style+'"':"")+">"+v.label+"</"+v.tag+"></div>"}})})(t);var u=new b.Combox({editor:h,items:q,title:l,initValue:l,className:"edui-for-customstyle",onselect:function(w,v){h.execCommand("customstyle",this.items[v].value)},onbuttonclick:function(){this.showPopup()},indexByValue:function(w){for(var v=0,y;y=this.items[v++];)if(y.label==w)return v-1;return-1}});b.buttons.customstyle=u;h.addListener("selectionchange",function(w,v,y){y||(-1==h.queryCommandState("customstyle")?u.setDisabled(!0):
            (u.setDisabled(!1),w=h.queryCommandValue("customstyle"),-1!=u.indexByValue(w)?u.setValue(w):u.setValue(u.initValue)))});return u}};b.inserttable=function(h,n,l){l=h.options.labelMap.inserttable||h.getLang("labelMap.inserttable")||"";var p=new b.TableButton({editor:h,title:l,className:"edui-for-inserttable",onpicktable:function(r,q,t){h.execCommand("InsertTable",{numRows:t,numCols:q,border:1})},onbuttonclick:function(){this.showPopup()}});b.buttons.inserttable=p;h.addListener("selectionchange",function(){p.setDisabled(-1==
            h.queryCommandState("inserttable"))});return p};b.lineheight=function(h){var n=h.options.lineheight||[];if(n.length){for(var l=0,p,r=[];p=n[l++];)r.push({label:p,value:p,theme:h.options.theme,onclick:function(){h.execCommand("lineheight",this.value)}});var q=new b.MenuButton({editor:h,className:"edui-for-lineheight",title:h.options.labelMap.lineheight||h.getLang("labelMap.lineheight")||"",items:r,onbuttonclick:function(){var t=h.queryCommandValue("LineHeight")||this.value;h.execCommand("LineHeight",
                t)}});b.buttons.lineheight=q;h.addListener("selectionchange",function(){var t=h.queryCommandState("LineHeight");if(-1==t)q.setDisabled(!0);else{q.setDisabled(!1);var u=h.queryCommandValue("LineHeight");u&&q.setValue((u+"").replace(/cm/,""));q.setChecked(t)}});return q}};f=["top","bottom"];for(c=0;g=f[c++];)(function(h){b["rowspacing"+h]=function(n){var l=n.options["rowspacing"+h]||[];if(!l.length)return null;for(var p=0,r,q=[];r=l[p++];)q.push({label:r,value:r,theme:n.options.theme,onclick:function(){n.execCommand("rowspacing",
                this.value,h)}});var t=new b.MenuButton({editor:n,className:"edui-for-rowspacing"+h,title:n.options.labelMap["rowspacing"+h]||n.getLang("labelMap.rowspacing"+h)||"",items:q,onbuttonclick:function(){var u=n.queryCommandValue("rowspacing",h)||this.value;n.execCommand("rowspacing",u,h)}});b.buttons[h]=t;n.addListener("selectionchange",function(){var u=n.queryCommandState("rowspacing",h);if(-1==u)t.setDisabled(!0);else{t.setDisabled(!1);var w=n.queryCommandValue("rowspacing",h);w&&t.setValue((w+"").replace(/%/,
            ""));t.setChecked(u)}});return t}})(g);f=["insertorderedlist","insertunorderedlist"];for(c=0;g=f[c++];)(function(h){b[h]=function(n){var l=n.options[h],p=function(){n.execCommand(h,this.value)},r=[],q;for(q in l)r.push({label:l[q]||n.getLang()[h][q]||"",value:q,theme:n.options.theme,onclick:p});var t=new b.MenuButton({editor:n,className:"edui-for-"+h,title:n.getLang("labelMap."+h)||"",items:r,onbuttonclick:function(){var u=n.queryCommandValue(h)||this.value;n.execCommand(h,u)}});b.buttons[h]=t;n.addListener("selectionchange",
            function(){var u=n.queryCommandState(h);if(-1==u)t.setDisabled(!0);else{t.setDisabled(!1);var w=n.queryCommandValue(h);t.setValue(w);t.setChecked(u)}});return t}})(g);b.fullscreen=function(h,n){n=h.options.labelMap.fullscreen||h.getLang("labelMap.fullscreen")||"";var l=new b.Button({className:"edui-for-fullscreen",title:n,theme:h.options.theme,onclick:function(){h.ui&&h.ui.setFullScreen(!h.ui.isFullScreen());this.setChecked(h.ui.isFullScreen())}});b.buttons.fullscreen=l;h.addListener("selectionchange",
            function(){var p=h.queryCommandState("fullscreen");l.setDisabled(-1==p);l.setChecked(h.ui.isFullScreen())});return l};b.emotion=function(h,n){var l=new b.MultiMenuPop({title:h.options.labelMap.emotion||h.getLang("labelMap.emotion")||"",editor:h,className:"edui-for-emotion",iframeUrl:h.ui.mapUrl(n||(h.options.iframeUrlMap||{}).emotion||a.emotion)});b.buttons.emotion=l;h.addListener("selectionchange",function(){l.setDisabled(-1==h.queryCommandState("emotion"))});return l};b.autotypeset=function(h){var n=
            new b.AutoTypeSetButton({editor:h,title:h.options.labelMap.autotypeset||h.getLang("labelMap.autotypeset")||"",className:"edui-for-autotypeset",onbuttonclick:function(){h.execCommand("autotypeset")}});b.buttons.autotypeset=n;h.addListener("selectionchange",function(){n.setDisabled(-1==h.queryCommandState("autotypeset"))});return n};b.simpleupload=function(h){var n=new b.Button({className:"edui-for-simpleupload",title:h.options.labelMap.simpleupload||h.getLang("labelMap.simpleupload")||"",onclick:function(){},
            theme:h.options.theme,showText:!1});b.buttons.simpleupload=n;h.addListener("ready",function(){var l=n.getDom("body").children[0];h.fireEvent("simpleuploadbtnready",l)});h.addListener("selectionchange",function(l,p,r){l=h.queryCommandState("simpleupload");-1==l?(n.setDisabled(!0),n.setChecked(!1)):r||(n.setDisabled(!1),n.setChecked(l))});return n}})();(function(){function k(f){this.initOptions(f);this.initEditorUI()}var b=C.editor.utils,d=C.editor.ui.uiUtils,a=C.editor.ui.UIBase,c=C.editor.dom.domUtils,
        g=[];k.prototype={uiName:"editor",initEditorUI:function(){function f(t,u){t.setOpt({wordCount:!0,maximumWords:1E4,wordCountMsg:t.options.wordCountMsg||t.getLang("wordCountMsg"),wordOverFlowMsg:t.options.wordOverFlowMsg||t.getLang("wordOverFlowMsg")});var w=t.options,v=w.maximumWords,y=w.wordCountMsg,A=w.wordOverFlowMsg;u=u.getDom("wordcount");w.wordCount&&(w=t.getContentLength(!0),w>v?(u.innerHTML=A,t.fireEvent("wordcountoverflow")):u.innerHTML=y.replace("{#leave}",v-w).replace("{#count}",w))}this.editor.ui=
            this;this._dialogs={};this.initUIBase();this._initToolbars();var h=this.editor,n=this;h.addListener("ready",function(){h.getDialog=function(t){return h.ui._dialogs[t+"Dialog"]};c.on(h.window,"scroll",function(t){C.editor.ui.Popup.postHide(t)});h.ui._actualFrameWidth=h.options.initialFrameWidth;UE.browser.ie&&6===UE.browser.version&&h.container.ownerDocument.execCommand("BackgroundImageCache",!1,!0);h.options.elementPathEnabled&&(h.ui.getDom("elementpath").innerHTML='<div class="edui-editor-breadcrumb">'+
            h.getLang("elementPathTip")+":</div>");h.options.wordCount&&(c.on(h.document,"click",function(){f(h,n);c.un(h.document,"click",arguments.callee)}),h.ui.getDom("wordcount").innerHTML=h.getLang("wordCountTip"));h.ui._scale();h.options.scaleEnabled?(h.autoHeightEnabled&&h.disableAutoHeight(),n.enableScale()):n.disableScale();h.options.elementPathEnabled||h.options.wordCount||h.options.scaleEnabled||(h.ui.getDom("elementpath").style.display="none",h.ui.getDom("wordcount").style.display="none",h.ui.getDom("scale").style.display=
            "none");h.selection.isFocus()&&h.fireEvent("selectionchange",!1,!0)});h.addListener("mousedown",function(t,u){C.editor.ui.Popup.postHide(u,u.target||u.srcElement);C.editor.ui.ShortCutMenu.postHide(u)});h.addListener("delcells",function(){UE.ui.edittip&&new UE.ui.edittip(h);h.getDialog("edittip").open()});var l,p=!1,r;h.addListener("afterpaste",function(){h.queryCommandState("pasteplain")||(C.editor.ui.PastePicker&&(l=new C.editor.ui.Popup({content:new C.editor.ui.PastePicker({editor:h}),editor:h,
            className:"edui-wordpastepop"}),l.render()),p=!0)});h.addListener("afterinserthtml",function(){clearTimeout(r);r=setTimeout(function(){if(l&&(p||h.ui._isTransfer)){if(l.isHidden()){var t=c.createElement(h.document,"span",{style:"line-height:0px;",innerHTML:"\ufeff"});h.selection.getRange().insertNode(t);var u=wa(t,"firstChild","previousSibling");u&&l.showAnchor(3==u.nodeType?u.parentNode:u);c.remove(t)}else l.show();delete h.ui._isTransfer;p=!1}},200)});h.addListener("contextmenu",function(t,u){C.editor.ui.Popup.postHide(u)});
            h.addListener("keydown",function(t,u){l&&l.dispose(u);t=u.keyCode||u.which;if(u.altKey&&90==t)UE.ui.buttons.fullscreen.onclick()});h.addListener("wordcount",function(t){f(this,n)});h.addListener("selectionchange",function(){if(h.options.elementPathEnabled)n[(-1==h.queryCommandState("elementpath")?"dis":"en")+"ableElementPath"]();if(h.options.scaleEnabled)n[(-1==h.queryCommandState("scale")?"dis":"en")+"ableScale"]()});var q=new C.editor.ui.Popup({editor:h,content:"",className:"edui-bubble",_onEditButtonClick:function(){this.hide();
                    h.ui._dialogs.linkDialog.open()},_onImgEditButtonClick:function(t){this.hide();h.ui._dialogs[t]&&h.ui._dialogs[t].open()},_onImgSetFloat:function(t){this.hide();h.execCommand("imagefloat",t)},_setIframeAlign:function(t){var u=q.anchorEl,w=u.cloneNode(!0);switch(t){case -2:w.setAttribute("align","");break;case -1:w.setAttribute("align","left");break;case 1:w.setAttribute("align","right")}u.parentNode.insertBefore(w,u);c.remove(u);q.anchorEl=w;q.showAnchor(q.anchorEl)},_updateIframe:function(){var t=
                    h._iframe=q.anchorEl;c.hasClass(t,"ueditor_baidumap")?(h.selection.getRange().selectNode(t).select(),h.ui._dialogs.mapDialog.open()):h.ui._dialogs.insertframeDialog.open();q.hide()},_onRemoveButtonClick:function(t){h.execCommand(t);this.hide()},queryAutoHide:function(t){return t&&t.ownerDocument==h.document&&("img"==t.tagName.toLowerCase()||c.findParentByTagName(t,"a",!0))?t!==q.anchorEl:C.editor.ui.Popup.prototype.queryAutoHide.call(this,t)}});q.render();h.options.imagePopup&&(h.addListener("mouseover",
                function(t,u){u=u||window.event;t=u.target||u.srcElement;h.ui._dialogs.insertframeDialog&&/iframe/ig.test(t.tagName)&&((u=q.formatHtml("<nobr>"+h.getLang("property")+': <span onclick=$$._setIframeAlign(-2) class="edui-clickable">'+h.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(-1) class="edui-clickable">'+h.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(1) class="edui-clickable">'+h.getLang("justifyright")+'</span>&nbsp;&nbsp; <span onclick="$$._updateIframe( this);" class="edui-clickable">'+
                    h.getLang("modify")+"</span></nobr>"))?(q.getDom("content").innerHTML=u,q.anchorEl=t,q.showAnchor(q.anchorEl)):q.hide())}),h.addListener("selectionchange",function(t,u){if(u){t="";u=h.selection.getRange().getClosedNode();var w=h.ui._dialogs;if(u&&"IMG"==u.tagName){var v="insertimageDialog";if(-1!=u.className.indexOf("edui-faked-video")||-1!=u.className.indexOf("edui-upload-video"))v="insertvideoDialog";-1!=u.className.indexOf("edui-faked-webapp")&&(v="webappDialog");-1!=u.src.indexOf("http://api.map.baidu.com")&&
            (v="mapDialog");-1!=u.className.indexOf("edui-faked-music")&&(v="musicDialog");-1!=u.src.indexOf("http://maps.google.com/maps/api/staticmap")&&(v="gmapDialog");u.getAttribute("anchorname")&&(v="anchorDialog",t=q.formatHtml("<nobr>"+h.getLang("property")+': <span onclick=$$._onImgEditButtonClick("anchorDialog") class="edui-clickable">'+h.getLang("modify")+"</span>&nbsp;&nbsp;<span onclick=$$._onRemoveButtonClick('anchor') class=\"edui-clickable\">"+h.getLang("delete")+"</span></nobr>"));u.getAttribute("word_img")&&
            (h.word_img=[u.getAttribute("word_img")],v="wordimageDialog");if(c.hasClass(u,"loadingclass")||c.hasClass(u,"loaderrorclass"))v="";if(!w[v])return;w="<nobr>"+h.getLang("property")+': <span onclick=$$._onImgSetFloat("none") class="edui-clickable">'+h.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("left") class="edui-clickable">'+h.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("right") class="edui-clickable">'+h.getLang("justifyright")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("center") class="edui-clickable">'+
                h.getLang("justifycenter")+"</span>&nbsp;&nbsp;<span onclick=\"$$._onImgEditButtonClick('"+v+'\');" class="edui-clickable">'+h.getLang("modify")+"</span></nobr>";!t&&(t=q.formatHtml(w))}if(h.ui._dialogs.linkDialog){var y=h.queryCommandValue("link"),A;y&&(A=y.getAttribute("_href")||y.getAttribute("href",2))&&(w=A,30<A.length&&(w=A.substring(0,20)+"..."),t&&(t+='<div style="height:5px;"></div>'),t+=q.formatHtml("<nobr>"+h.getLang("anthorMsg")+': <a target="_blank" href="'+A+'" title="'+A+'" >'+w+'</a> <span class="edui-clickable" onclick="$$._onEditButtonClick();">'+
                h.getLang("modify")+'</span> <span class="edui-clickable" onclick="$$._onRemoveButtonClick(\'unlink\');"> '+h.getLang("clear")+"</span></nobr>"),q.showAnchor(y))}t?(q.getDom("content").innerHTML=t,q.anchorEl=u||y,q.showAnchor(q.anchorEl)):q.hide()}}))},_initToolbars:function(){for(var f=this.editor,h=this.toolbars||[],n=[],l=0;l<h.length;l++){for(var p=h[l],r=new C.editor.ui.Toolbar({theme:f.options.theme}),q=0;q<p.length;q++){var t=p[q],u=null;if("string"==typeof t){if(t=t.toLowerCase(),"|"==t&&
        (t="Separator"),"||"==t&&(t="Breakline"),C.editor.ui[t]&&(u=new C.editor.ui[t](f)),"fullscreen"==t){n&&n[0]?n[0].items.splice(0,0,u):u&&r.items.splice(0,0,u);continue}}else u=t;u&&u.id&&r.add(u)}n[l]=r}b.each(UE._customizeUI,function(w,v){if(w.id&&w.id!=f.key)return!1;if(v=w.execFn.call(f,f,v))w=w.index,void 0===w&&(w=r.items.length),r.add(v,w)});this.toolbars=n},getHtmlTpl:function(){return'<div id="##" class="%%"><div id="##_toolbarbox" class="%%-toolbarbox">'+(this.toolbars.length?'<div id="##_toolbarboxouter" class="%%-toolbarboxouter"><div class="%%-toolbarboxinner">'+
            this.renderToolbarBoxHtml()+"</div></div>":"")+'<div id="##_toolbarmsg" class="%%-toolbarmsg" style="display:none;"><div id = "##_upload_dialog" class="%%-toolbarmsg-upload" onclick="$$.showWordImageDialog();">'+this.editor.getLang("clickToUpload")+'</div><div class="%%-toolbarmsg-close" onclick="$$.hideToolbarMsg();">x</div><div id="##_toolbarmsg_label" class="%%-toolbarmsg-label"></div><div style="height:0;overflow:hidden;clear:both;"></div></div><div id="##_message_holder" class="%%-messageholder"></div></div><div id="##_iframeholder" class="%%-iframeholder"></div><div id="##_bottombar" class="%%-bottomContainer"><table><tr><td id="##_elementpath" class="%%-bottombar"></td><td id="##_wordcount" class="%%-wordcount"></td><td id="##_scale" class="%%-scale"><div class="%%-icon"></div></td></tr></table></div><div id="##_scalelayer"></div></div>'},
        showWordImageDialog:function(){this._dialogs.wordimageDialog.open()},renderToolbarBoxHtml:function(){for(var f=[],h=0;h<this.toolbars.length;h++)f.push(this.toolbars[h].renderHtml());return f.join("")},setFullScreen:function(f){var h=this.editor,n=h.container.parentNode.parentNode;if(this._fullscreen!=f){this._fullscreen=f;this.editor.fireEvent("beforefullscreenchange",f);if(C.editor.browser.gecko)var l=h.selection.getRange().createBookmark();if(f){for(;"BODY"!=n.tagName;){var p=C.editor.dom.domUtils.getComputedStyle(n,
            "position");g.push(p);n.style.position="static";n=n.parentNode}this._bakHtmlOverflow=document.documentElement.style.overflow;this._bakBodyOverflow=document.body.style.overflow;this._bakAutoHeight=this.editor.autoHeightEnabled;this._bakScrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop);this._bakEditorContaninerWidth=h.iframe.parentNode.offsetWidth;this._bakAutoHeight&&(h.autoHeightEnabled=!1,this.editor.disableAutoHeight());document.documentElement.style.overflow="hidden";
            window.scrollTo(0,window.scrollY);this._bakCssText=this.getDom().style.cssText;this._bakCssText1=this.getDom("iframeholder").style.cssText;h.iframe.parentNode.style.width="";this._updateFullScreen()}else{for(;"BODY"!=n.tagName;)n.style.position=g.shift(),n=n.parentNode;this.getDom().style.cssText=this._bakCssText;this.getDom("iframeholder").style.cssText=this._bakCssText1;this._bakAutoHeight&&(h.autoHeightEnabled=!0,this.editor.enableAutoHeight());document.documentElement.style.overflow=this._bakHtmlOverflow;
            document.body.style.overflow=this._bakBodyOverflow;h.iframe.parentNode.style.width=this._bakEditorContaninerWidth+"px";window.scrollTo(0,this._bakScrollTop)}if(B.gecko&&"true"===h.body.contentEditable){var r=document.createElement("input");document.body.appendChild(r);h.body.contentEditable=!1;setTimeout(function(){r.focus();setTimeout(function(){h.body.contentEditable=!0;h.fireEvent("fullscreenchanged",f);h.selection.getRange().moveToBookmark(l).select(!0);C.editor.dom.domUtils.remove(r);f&&window.scroll(0,
            0)},0)},0)}"true"===h.body.contentEditable&&(this.editor.fireEvent("fullscreenchanged",f),this.triggerLayout())}},_updateFullScreen:function(){if(this._fullscreen){var f=d.getViewportRect();this.getDom().style.cssText="border:0;position:absolute;left:0;top:"+(this.editor.options.topOffset||0)+"px;width:"+f.width+"px;height:"+f.height+"px;z-index:"+(1*this.getDom().style.zIndex+100);d.setViewportOffset(this.getDom(),{left:0,top:this.editor.options.topOffset||0});this.editor.setHeight(f.height-this.getDom("toolbarbox").offsetHeight-
            this.getDom("bottombar").offsetHeight-(this.editor.options.topOffset||0),!0);if(B.gecko)try{window.onresize()}catch(h){}}},_updateElementPath:function(){var f=this.getDom("elementpath"),h;if(this.elementPathEnabled&&(h=this.editor.queryCommandValue("elementpath"))){for(var n=[],l=0,p;p=h[l];l++)n[l]=this.formatHtml('<span unselectable="on" onclick="$$.editor.execCommand(&quot;elementpath&quot;, &quot;'+l+'&quot;);">'+p+"</span>");f.innerHTML='<div class="edui-editor-breadcrumb" onmousedown="return false;">'+
            this.editor.getLang("elementPathTip")+": "+n.join(" &gt; ")+"</div>"}else f.style.display="none"},disableElementPath:function(){var f=this.getDom("elementpath");f.innerHTML="";f.style.display="none";this.elementPathEnabled=!1},enableElementPath:function(){this.getDom("elementpath").style.display="";this.elementPathEnabled=!0;this._updateElementPath()},_scale:function(){function f(){E=c.getXY(q);I||(I=r.options.minFrameHeight+u.offsetHeight+w.offsetHeight);y.style.cssText="position:absolute;left:0;display:;top:0;background-color:#41ABFF;opacity:0.4;filter: Alpha(opacity=40);width:"+
            q.offsetWidth+"px;height:"+q.offsetHeight+"px;z-index:"+(r.options.zIndex+1);c.on(p,"mousemove",h);c.on(t,"mouseup",n);c.on(p,"mouseup",n)}function h(ca){l();ca=ca||window.event;T=ca.pageX||p.documentElement.scrollLeft+ca.clientX;L=ca.pageY||p.documentElement.scrollTop+ca.clientY;ba=T-E.x;S=L-E.y;ba>=H&&(A=!0,y.style.width=ba+"px");S>=I&&(A=!0,y.style.height=S+"px")}function n(){A&&(A=!1,r.ui._actualFrameWidth=y.offsetWidth-2,q.style.width=r.ui._actualFrameWidth+"px",r.setHeight(y.offsetHeight-w.offsetHeight-
            u.offsetHeight-2,!0));y&&(y.style.display="none");l();c.un(p,"mousemove",h);c.un(t,"mouseup",n);c.un(p,"mouseup",n)}function l(){B.ie?p.selection.clear():window.getSelection().removeAllRanges()}var p=document,r=this.editor,q=r.container,t=r.document,u=this.getDom("toolbarbox"),w=this.getDom("bottombar"),v=this.getDom("scale"),y=this.getDom("scalelayer"),A=!1,E=null,I=0,H=r.options.minFrameWidth,T=0,L=0,ba=0,S=0,Y=this;this.editor.addListener("fullscreenchanged",function(ca,pa){pa?Y.disableScale():
            Y.editor.options.scaleEnabled&&(Y.enableScale(),ca=Y.editor.document.createElement("span"),Y.editor.body.appendChild(ca),Y.editor.body.style.height=Math.max(c.getXY(ca).y,Y.editor.iframe.offsetHeight-20)+"px",c.remove(ca))});this.enableScale=function(){1!=r.queryCommandState("source")&&(v.style.display="",this.scaleEnabled=!0,c.on(v,"mousedown",f))};this.disableScale=function(){v.style.display="none";this.scaleEnabled=!1;c.un(v,"mousedown",f)}},isFullScreen:function(){return this._fullscreen},postRender:function(){a.prototype.postRender.call(this);
            for(var f=0;f<this.toolbars.length;f++)this.toolbars[f].postRender();var h=this,n,l=C.editor.dom.domUtils,p=function(){clearTimeout(n);n=setTimeout(function(){h._updateFullScreen()})};l.on(window,"resize",p);h.addListener("destroy",function(){l.un(window,"resize",p);clearTimeout(n)})},showToolbarMsg:function(f,h){this.getDom("toolbarmsg_label").innerHTML=f;this.getDom("toolbarmsg").style.display="";h||(this.getDom("upload_dialog").style.display="none")},hideToolbarMsg:function(){this.getDom("toolbarmsg").style.display=
            "none"},mapUrl:function(f){return f?f.replace("~/",this.editor.options.UEDITOR_HOME_URL||""):""},triggerLayout:function(){var f=this.getDom();f.style.zoom="1"==f.style.zoom?"100%":"1"}};b.inherits(k,C.editor.ui.UIBase);var e={};UE.ui.Editor=function(f){var h=new UE.Editor(f);h.options.editor=h;b.loadFile(document,{href:h.options.themePath+h.options.theme+"/css/ueditor.css",tag:"link",type:"text/css",rel:"stylesheet"});var n=h.render;h.render=function(l){l.constructor===String&&(h.key=l,e[l]=h);b.domReady(function(){function p(){h.setOpt({labelMap:h.options.labelMap||
            h.getLang("labelMap")});new k(h.options);if(l&&(l.constructor===String&&(l=document.getElementById(l)),l&&l.getAttribute("name")&&(h.options.textarea=l.getAttribute("name")),l&&/script|textarea/ig.test(l.tagName))){var r=document.createElement("div");l.parentNode.insertBefore(r,l);var q=l.value||l.innerHTML;h.options.initialContent=/^[\t\r\n ]*$/.test(q)?h.options.initialContent:q.replace(/>[\n\r\t]+([ ]{4})+/g,">").replace(/[\n\r\t]+([ ]{4})+</g,"<").replace(/>[\n\r\t]+</g,"><");l.className&&(r.className=
        l.className);l.style.cssText&&(r.style.cssText=l.style.cssText);/textarea/i.test(l.tagName)?(h.textarea=l,h.textarea.style.display="none"):l.parentNode.removeChild(l);l.id&&(r.id=l.id,c.removeAttributes(l,"id"));l=r;l.innerHTML=""}c.addClass(l,"edui-"+h.options.theme);h.ui.render(l);r=h.options;h.container=h.ui.getDom();q=c.findParents(l,!0);for(var t=[],u=0,w;w=q[u];u++)t[u]=w.style.display,w.style.display="block";r.initialFrameWidth?r.minFrameWidth=r.initialFrameWidth:(r.minFrameWidth=r.initialFrameWidth=
        l.offsetWidth,u=l.style.width,/%$/.test(u)&&(r.initialFrameWidth=u));r.initialFrameHeight?r.minFrameHeight=r.initialFrameHeight:r.initialFrameHeight=r.minFrameHeight=l.offsetHeight;for(u=0;w=q[u];u++)w.style.display=t[u];l.style.height&&(l.style.height="");h.container.style.width=r.initialFrameWidth+(/%$/.test(r.initialFrameWidth)?"":"px");h.container.style.zIndex=r.zIndex;n.call(h,h.ui.getDom("iframeholder"));h.fireEvent("afteruiready")}h.langIsReady?p():h.addListener("langReady",p)})};return h};
        UE.getEditor=function(f,h){var n=e[f];n||(n=e[f]=new UE.ui.Editor(h),n.render(f));return n};UE.delEditor=function(f){var h;if(h=e[f])h.key&&h.destroy(),delete e[f]};UE.registerUI=function(f,h,n,l){b.each(f.split(/\s+/),function(p){UE._customizeUI[p]={id:l,execFn:h,index:n}})}})();UE.registerUI("message",function(k){function b(){var e=g.ui.getDom("toolbarbox");e&&(a.style.top=e.offsetHeight+3+"px");a.style.zIndex=Math.max(g.options.zIndex,g.iframe.style.zIndex)+1}var d=C.editor.ui.Message,a,c=[],g=
        k;g.addListener("ready",function(){a=document.getElementById(g.ui.id+"_message_holder");b();setTimeout(function(){b()},500)});g.addListener("showmessage",function(e,f){f=x.isString(f)?{content:f}:f;e=new d({timeout:f.timeout,type:f.type,content:f.content,keepshow:f.keepshow,editor:g});var h=f.id||"msg_"+(+new Date).toString(36);e.render(a);c[h]=e;e.reset(f);b();return h});g.addListener("updatemessage",function(e,f,h){h=x.isString(h)?{content:h}:h;e=c[f];e.render(a);e&&e.reset(h)});g.addListener("hidemessage",
        function(e,f){(e=c[f])&&e.hide()})});UE.registerUI("autosave",function(k){var b=null,d=null;k.on("afterautosave",function(){clearTimeout(b);b=setTimeout(function(){d&&k.trigger("hidemessage",d);d=k.trigger("showmessage",{content:k.getLang("autosave.success"),timeout:2E3})},2E3)})})})();
